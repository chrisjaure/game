!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),EventEmitter=(require("pixi.js"),require("eventemitter3")),utils=require("./utils"),Entity=function(_EventEmitter){function Entity(game,options){_classCallCheck(this,Entity);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Entity).call(this));return _this.game=game,_this.options=options,_this}return _inherits(Entity,_EventEmitter),_createClass(Entity,[{key:"addToScene",value:function(scene){scene.stage.addChild(this.entity),this.update&&(this.boundUpdate=this.update.bind(this),scene.on("update",this.boundUpdate)),this.render&&scene.on("render",this.render.bind(this)),this.scene=scene}},{key:"removeFromScene",value:function(){this.scene&&(this.scene.stage.removeChild(this.entity),this.body&&this.scene.stage.removeChild(this.body),this.update&&this.scene.removeListener("update",this.boundUpdate),this.render&&this.scene.removeListener("render",this.render),this.scene=null,this.removed=!0)}},{key:"getBoundingBox",value:function(){return"circle"===this.boundingType?{x:this.entity.x,y:this.entity.y,radius:this.entity.width/2}:{x:this.entity.x,y:this.entity.y,width:this.entity.width,height:this.entity.height}}},{key:"render",value:function(){this.game.debug&&this.scene&&utils.showBoundingBox(this,this.scene.stage)}}]),Entity}(EventEmitter);module.exports=Entity},{"./utils":4,eventemitter3:305,"pixi.js":413}],2:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PIXI=require("pixi.js"),kb=require("kb-controls"),EventEmitter=require("eventemitter3"),Stats=require("stats-js"),raf=(require("./utils"),require("raf")),Game=function(_EventEmitter){function Game(_ref){var _ref$width=_ref.width,width=void 0===_ref$width?600:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?400:_ref$height,_ref$background=_ref.background,background=void 0===_ref$background?16777215:_ref$background,_ref$resolution=_ref.resolution,resolution=void 0===_ref$resolution?window.devicePixelRatio:_ref$resolution;_classCallCheck(this,Game);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Game).call(this));return _this.PIXI=PIXI,_this.width=width,_this.height=height,PIXI.SCALE_MODES.DEFAULT=PIXI.SCALE_MODES.NEAREST,_this.stage=new PIXI.Container(background),_this.renderer=PIXI.autoDetectRenderer(width,height,{resolution:resolution}),_this.renderer.view.style.width=width+"px",_this.renderer.view.style.height=height+"px",document.body.appendChild(_this.renderer.view),_this.keyboard=kb({"<left>":"left",A:"left","<right>":"right",D:"right","<up>":"up",W:"up","<down>":"down",S:"down","<space>":"space"}),_this}return _inherits(Game,_EventEmitter),_createClass(Game,[{key:"preload",value:function(cb){var assets=[];this.emit("preload",assets),assets.length?(assets.forEach(function(asset){return PIXI.loader.add(asset,asset)}),PIXI.loader.on("complete",cb),PIXI.loader.load()):cb()}},{key:"boot",value:function(cb){var _this2=this;cb=cb||function(){},this.preload(function(){_this2.emit("load"),raf(function tick(time){this.update(time),this.render(time),raf(tick.bind(this))}.bind(_this2)),cb()}),this.debug&&(this.stats=new Stats,this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement))}},{key:"update",value:function(time){this.emit("update",time)}},{key:"render",value:function(time){this.debug&&this.stats.begin(),this.emit("render",time),this.renderer.render(this.stage),this.debug&&this.stats.end()}},{key:"worldBounds",get:function(){return{x:0,y:0,width:this.renderer.width/this.renderer.resolution,height:this.renderer.height/this.renderer.resolution}}}]),Game}(EventEmitter);module.exports=Game},{"./utils":4,eventemitter3:305,"kb-controls":308,"pixi.js":413,raf:438,"stats-js":447}],3:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PIXI=require("pixi.js"),EventEmitter=require("eventemitter3"),active=Symbol("active"),Scene=function(_EventEmitter){function Scene(game){_classCallCheck(this,Scene);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Scene).call(this));return _this.game=game,_this.stage=new PIXI.Container,game.stage.addChild(_this.stage),game.on("update",function(time){_this[active]&&_this.emit("update",time)}),game.on("render",function(time){_this[active]&&_this.emit("render",time)}),_this}return _inherits(Scene,_EventEmitter),_createClass(Scene,[{key:"active",set:function(value){var event=value?"active":"inactive";this[active]=value,this.emit(event)},get:function(){return this[active]}}]),Scene}(EventEmitter);module.exports=Scene},{eventemitter3:305,"pixi.js":413}],4:[function(require,module,exports){"use strict";var PIXI=require("pixi.js"),boxCollide=require("box-collide"),circleCollide=function(circle1,circle2){var dx=circle1.x+circle1.radius-(circle2.x+circle2.radius),dy=circle1.y+circle1.radius-(circle2.y+circle2.radius),distance=Math.sqrt(dx*dx+dy*dy);return distance<circle1.radius+circle2.radius};exports.collide=function(collection1,collection2,cb){Array.isArray(collection1)||(collection1=[collection1]),Array.isArray(collection2)||(collection2=[collection2]),collection1.forEach(function(item1){var item1Bounds=item1.getBoundingBox();collection2.forEach(function(item2){var item2Bounds=item2.getBoundingBox();void 0!==item1Bounds.radius&&void 0!==item2Bounds.radius?circleCollide(item1Bounds,item2Bounds)&&cb(item1,item2):boxCollide(item1.getBoundingBox(),item2.getBoundingBox())&&cb(item1,item2)})})},exports.frameRange=function(start,end,prefix){for(var frames=[],i=start;end>=i;i++)frames.push(new PIXI.Texture.fromFrame((prefix||null)+i));return frames},exports.showBoundingBox=function(object,stage){if(stage){var bounds=object.getBoundingBox();if(!object.body){var box=new PIXI.Graphics;box.alpha=.3,stage.addChild(box),object.body=box}object.body.clear(),object.body.x=bounds.x,object.body.y=bounds.y,object.body.lineStyle(2,65280,1),void 0!==bounds.radius?object.body.drawCircle(bounds.radius,bounds.radius,bounds.radius):object.body.drawRect(0,0,bounds.width,bounds.height)}},exports.getFramesFromSpriteSheet=function(baseTexture,frameWidth,frameHeight){for(var frames=[],i=0;i<baseTexture.width-frameWidth;i+=frameWidth)frames.push(new PIXI.Texture(baseTexture,new PIXI.Rectangle(i,0,frameWidth,frameHeight)));return frames}},{"box-collide":300,"pixi.js":413}],5:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Entity=require("../engine/entity"),random=(require("../engine/utils"),require("random-ext")),boxCollide=require("box-collide"),Dust=function(_Entity){function Dust(game){_classCallCheck(this,Dust);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Dust).apply(this,arguments));_this.speed=3,_this.boundingType="circle";var entity=_this.entity=new game.PIXI.Graphics;return entity.beginFill(16774998),entity.drawCircle(4,4,4),entity.endFill(),entity.x=game.worldBounds.width,entity.y=random.integer(game.worldBounds.height-entity.height,entity.height),_this}return _inherits(Dust,_Entity),_createClass(Dust,[{key:"update",value:function(){return boxCollide(this.entity,this.game.worldBounds)?void(this.entity.x-=this.speed):void this.removeFromScene()}}]),Dust}(Entity);module.exports=Dust},{"../engine/entity":1,"../engine/utils":4,"box-collide":300,"random-ext":439}],6:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Entity=require("../engine/entity"),Meter=(require("../engine/utils"),function(_Entity){function Meter(game){_classCallCheck(this,Meter);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Meter).apply(this,arguments)),entity=_this.entity=new game.PIXI.Container,outline=_this.outline=new game.PIXI.Graphics,bar=_this.bar=new game.PIXI.Graphics;return outline.lineStyle(1,0),outline.beginFill(16777215),outline.drawRect(0,0,100,20),bar.position={x:1.5,y:1.5},entity.addChild(outline),entity.addChild(bar),_this}return _inherits(Meter,_Entity),_createClass(Meter,[{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"setPercent",value:function(percent){this.bar.clear(),this.bar.beginFill(15312384),this.bar.drawRect(0,0,98*percent,18),this.bar.endFill()}}]),Meter}(Entity));module.exports=Meter},{"../engine/entity":1,"../engine/utils":4}],7:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PIXI=require("pixi.js"),TWEEN=require("tween.js"),utils=require("../engine/utils"),Entity=require("../engine/entity"),Howl=(require("box-collide"),require("howler").Howl),Player=function(_Entity){function Player(){_classCallCheck(this,Player);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Player).apply(this,arguments));_this.assets=["assets/ship.png"],_this.speed=6,_this.boundingType="circle";var frames=utils.getFramesFromSpriteSheet(PIXI.utils.TextureCache[_this.assets[0]].baseTexture,32,32);_this.flyFrames=frames.slice(1,5),_this.stopFrames=frames.slice(5,12);var entity=_this.entity=new PIXI.Container;entity.x=_this.options.x||0,entity.y=_this.options.y||0,entity.scale={x:2,y:2};var sprite=_this.sprite=new PIXI.extras.MovieClip(_this.flyFrames);return sprite.animationSpeed=.2,sprite.loop=!0,sprite.play(),sprite.rotation=1.5*Math.PI,sprite.position.y=sprite.height,entity.addChild(sprite),_this.shineGetSound=new Howl({urls:["assets/shineget.wav"],volume:.6}),_this.hitSound=new Howl({urls:["assets/hit.wav"]}),entity.tween=new TWEEN.Tween(entity),_this}return _inherits(Player,_Entity),_createClass(Player,null,[{key:"preload",value:function(game){game.on("preload",function(assets){return assets.push("assets/ship.png")})}}]),_createClass(Player,[{key:"reset",value:function(){this.speed=6,this.entity.x=this.options.x||0,this.entity.y=this.options.y||0}},{key:"shineGet",value:function(){this.speed-=.1,this.shineGetSound.play()}},{key:"hit",value:function(){this.speed+=.2,this.speed>6&&(this.speed=6),this.hitSound.play()}},{key:"update",value:function(){var keyboard=this.game.keyboard;if(keyboard.left,keyboard.right,keyboard.up&&(this.shouldTween=!1,this.entity.y-=this.speed,this.tweenTo="up"),keyboard.down&&(this.shouldTween=!1,this.entity.y+=this.speed,this.tweenTo="down"),this.tweenTo&&!keyboard.up&&!keyboard.down){var tweenTo=0;this.shouldTween=!0,tweenTo="up"===this.tweenTo?Math.max(0,this.entity.y-2*this.speed):Math.min(this.game.worldBounds.height-this.entity.height,this.entity.y+2*this.speed),this.entity.tween.to({y:tweenTo},150).easing(TWEEN.Easing.Quadratic.Out).start(),this.tweenTo=null}this.positionInBounds()}},{key:"render",value:function(time){_get(Object.getPrototypeOf(Player.prototype),"render",this).apply(this,arguments),this.shouldTween&&(this.shouldTween=this.entity.tween.update(time))}},{key:"positionInBounds",value:function(){var worldBounds=this.game.worldBounds;this.entity.x<0&&(this.entity.x=0),this.entity.y<0&&(this.entity.y=0),this.entity.x+this.entity.width>worldBounds.width&&(this.entity.x=worldBounds.width-this.entity.width),this.entity.y+this.entity.height>worldBounds.height&&(this.entity.y=worldBounds.height-this.entity.height)}},{key:"getGunPosition",value:function(){return{x:this.entity.x+this.entity.width,y:this.entity.y+this.entity.height/2-2,width:this.entity.width,height:this.entity.height}}}]),Player}(Entity);module.exports=Player},{"../engine/entity":1,"../engine/utils":4,"box-collide":300,howler:307,"pixi.js":413,"tween.js":448}],8:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Entity=require("../engine/entity"),random=(require("../engine/utils"),require("random-ext")),boxCollide=require("box-collide"),Rock=function(_Entity){function Rock(game){_classCallCheck(this,Rock);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Rock).apply(this,arguments));_this.speed=2,_this.boundingType="circle";var radius=random.integer(40,15),entity=_this.entity=new game.PIXI.Graphics;return entity.beginFill(8358799),entity.drawCircle(radius,radius,radius),entity.endFill(),entity.x=game.worldBounds.width,entity.y=random.integer(game.worldBounds.height-entity.height,entity.height),_this}return _inherits(Rock,_Entity),_createClass(Rock,[{key:"update",value:function(){return boxCollide(this.entity,this.game.worldBounds)?void(this.entity.x-=this.speed):void this.removeFromScene()}}]),Rock}(Entity);module.exports=Rock},{"../engine/entity":1,"../engine/utils":4,"box-collide":300,"random-ext":439}],9:[function(require,module,exports){"use strict";var Game=(require("babel-polyfill"),require("./engine/game")),game=new Game({background:1974067}),start=require("./scenes/start")(game),background=require("./scenes/background")(game),play=require("./scenes/play")(game),win=require("./scenes/win")(game);start.on("inactive",function(){play.active=!0,background.active=!0}),play.on("win",function(){play.active=!1,background.active=!1,win.active=!0}),win.on("inactive",function(){play.active=!0,background.active=!0}),game.boot()},{"./engine/game":2,"./scenes/background":451,"./scenes/play":452,"./scenes/start":453,"./scenes/win":454,"babel-polyfill":10}],10:[function(require,module,exports){(function(global){"use strict";function define(O,key,value){O[key]||_Object$defineProperty(O,key,{writable:!0,configurable:!0,value:value})}var _Object$defineProperty=require("babel-runtime/core-js/object/define-property").default;if(require("core-js/shim"),require("babel-regenerator-runtime"),require("core-js/fn/regexp/escape"),global._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");global._babelPolyfill=!0,define(String.prototype,"padLeft","".padStart),define(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(key){[][key]&&define(Array,key,Function.call.bind([][key]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-regenerator-runtime":298,"babel-runtime/core-js/object/define-property":299,"core-js/fn/regexp/escape":11,"core-js/shim":297}],11:[function(require,module,exports){require("../../modules/core.regexp.escape"),module.exports=require("../../modules/_core").RegExp.escape},{"../../modules/_core":31,"../../modules/core.regexp.escape":125}],12:[function(require,module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},{}],13:[function(require,module,exports){var cof=require("./_cof");module.exports=function(it,msg){if("number"!=typeof it&&"Number"!=cof(it))throw TypeError(msg);return+it}},{"./_cof":26}],14:[function(require,module,exports){var UNSCOPABLES=require("./_wks")("unscopables"),ArrayProto=Array.prototype;void 0==ArrayProto[UNSCOPABLES]&&require("./_hide")(ArrayProto,UNSCOPABLES,{}),module.exports=function(key){ArrayProto[UNSCOPABLES][key]=!0}},{"./_hide":47,"./_wks":122}],15:[function(require,module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||void 0!==forbiddenField&&forbiddenField in it)throw TypeError(name+": incorrect invocation!");return it}},{}],16:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},{"./_is-object":56}],17:[function(require,module,exports){"use strict";var toObject=require("./_to-object"),toIndex=require("./_to-index"),toLength=require("./_to-length");module.exports=[].copyWithin||function(target,start){var O=toObject(this),len=toLength(O.length),to=toIndex(target,len),from=toIndex(start,len),end=arguments.length>2?arguments[2]:void 0,count=Math.min((void 0===end?len:toIndex(end,len))-from,len-to),inc=1;for(to>from&&from+count>to&&(inc=-1,from+=count-1,to+=count-1);count-- >0;)from in O?O[to]=O[from]:delete O[to],to+=inc,from+=inc;return O}},{"./_to-index":112,"./_to-length":115,"./_to-object":116}],18:[function(require,module,exports){"use strict";var toObject=require("./_to-object"),toIndex=require("./_to-index"),toLength=require("./_to-length");module.exports=function(value){for(var O=toObject(this),length=toLength(O.length),aLen=arguments.length,index=toIndex(aLen>1?arguments[1]:void 0,length),end=aLen>2?arguments[2]:void 0,endPos=void 0===end?length:toIndex(end,length);endPos>index;)O[index++]=value;return O}},{"./_to-index":112,"./_to-length":115,"./_to-object":116}],19:[function(require,module,exports){var forOf=require("./_for-of");module.exports=function(iter,ITERATOR){var result=[];return forOf(iter,!1,result.push,result,ITERATOR),result}},{"./_for-of":44}],20:[function(require,module,exports){var toIObject=require("./_to-iobject"),toLength=require("./_to-length"),toIndex=require("./_to-index");module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIObject($this),length=toLength(O.length),index=toIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if(value=O[index++],value!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index;return!IS_INCLUDES&&-1}}},{"./_to-index":112,"./_to-iobject":114,"./_to-length":115}],21:[function(require,module,exports){var ctx=require("./_ctx"),IObject=require("./_iobject"),toObject=require("./_to-object"),toLength=require("./_to-length"),asc=require("./_array-species-create");module.exports=function(TYPE,$create){var IS_MAP=1==TYPE,IS_FILTER=2==TYPE,IS_SOME=3==TYPE,IS_EVERY=4==TYPE,IS_FIND_INDEX=6==TYPE,NO_HOLES=5==TYPE||IS_FIND_INDEX,create=$create||asc;return function($this,callbackfn,that){for(var val,res,O=toObject($this),self=IObject(O),f=ctx(callbackfn,that,3),length=toLength(self.length),index=0,result=IS_MAP?create($this,length):IS_FILTER?create($this,0):void 0;length>index;index++)if((NO_HOLES||index in self)&&(val=self[index],res=f(val,index,O),TYPE))if(IS_MAP)result[index]=res;else if(res)switch(TYPE){case 3:return!0;case 5:return val;case 6:return index;case 2:result.push(val)}else if(IS_EVERY)return!1;return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result}}},{"./_array-species-create":23,"./_ctx":32,"./_iobject":52,"./_to-length":115,"./_to-object":116}],22:[function(require,module,exports){var aFunction=require("./_a-function"),toObject=require("./_to-object"),IObject=require("./_iobject"),toLength=require("./_to-length");module.exports=function(that,callbackfn,aLen,memo,isRight){aFunction(callbackfn);var O=toObject(that),self=IObject(O),length=toLength(O.length),index=isRight?length-1:0,i=isRight?-1:1;if(2>aLen)for(;;){if(index in self){memo=self[index],index+=i;break}if(index+=i,isRight?0>index:index>=length)throw TypeError("Reduce of empty array with no initial value")}for(;isRight?index>=0:length>index;index+=i)index in self&&(memo=callbackfn(memo,self[index],index,O));return memo}},{"./_a-function":12,"./_iobject":52,"./_to-length":115,"./_to-object":116}],23:[function(require,module,exports){var isObject=require("./_is-object"),isArray=require("./_is-array"),SPECIES=require("./_wks")("species");module.exports=function(original,length){var C;return isArray(original)&&(C=original.constructor,"function"!=typeof C||C!==Array&&!isArray(C.prototype)||(C=void 0),isObject(C)&&(C=C[SPECIES],null===C&&(C=void 0))),new(void 0===C?Array:C)(length)}},{"./_is-array":54,"./_is-object":56,"./_wks":122}],24:[function(require,module,exports){"use strict";var aFunction=require("./_a-function"),isObject=require("./_is-object"),invoke=require("./_invoke"),arraySlice=[].slice,factories={},construct=function(F,len,args){if(!(len in factories)){for(var n=[],i=0;len>i;i++)n[i]="a["+i+"]";factories[len]=Function("F,a","return new F("+n.join(",")+")")}return factories[len](F,args)};module.exports=Function.bind||function(that){var fn=aFunction(this),partArgs=arraySlice.call(arguments,1),bound=function(){var args=partArgs.concat(arraySlice.call(arguments));return this instanceof bound?construct(fn,args.length,args):invoke(fn,args,that)};return isObject(fn.prototype)&&(bound.prototype=fn.prototype),bound}},{"./_a-function":12,"./_invoke":51,"./_is-object":56}],25:[function(require,module,exports){var cof=require("./_cof"),TAG=require("./_wks")("toStringTag"),ARG="Arguments"==cof(function(){return arguments}()),tryGet=function(it,key){try{return it[key]}catch(e){}};module.exports=function(it){var O,T,B;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(T=tryGet(O=Object(it),TAG))?T:ARG?cof(O):"Object"==(B=cof(O))&&"function"==typeof O.callee?"Arguments":B}},{"./_cof":26,"./_wks":122}],26:[function(require,module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},{}],27:[function(require,module,exports){"use strict";var dP=require("./_object-dp").f,create=require("./_object-create"),redefineAll=(require("./_hide"),require("./_redefine-all")),ctx=require("./_ctx"),anInstance=require("./_an-instance"),defined=require("./_defined"),forOf=require("./_for-of"),$iterDefine=require("./_iter-define"),step=require("./_iter-step"),setSpecies=require("./_set-species"),DESCRIPTORS=require("./_descriptors"),fastKey=require("./_meta").fastKey,SIZE=DESCRIPTORS?"_s":"size",getEntry=function(that,key){var entry,index=fastKey(key);if("F"!==index)return that._i[index];for(entry=that._f;entry;entry=entry.n)if(entry.k==key)return entry};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,"_i"),that._i=create(null),that._f=void 0,that._l=void 0,that[SIZE]=0,void 0!=iterable&&forOf(iterable,IS_MAP,that[ADDER],that)});return redefineAll(C.prototype,{clear:function(){for(var that=this,data=that._i,entry=that._f;entry;entry=entry.n)entry.r=!0,entry.p&&(entry.p=entry.p.n=void 0),delete data[entry.i];that._f=that._l=void 0,that[SIZE]=0},delete:function(key){var that=this,entry=getEntry(that,key);if(entry){var next=entry.n,prev=entry.p;delete that._i[entry.i],entry.r=!0,prev&&(prev.n=next),next&&(next.p=prev),that._f==entry&&(that._f=next),that._l==entry&&(that._l=prev),that[SIZE]--}return!!entry},forEach:function(callbackfn){anInstance(this,C,"forEach");for(var entry,f=ctx(callbackfn,arguments.length>1?arguments[1]:void 0,3);entry=entry?entry.n:this._f;)for(f(entry.v,entry.k,this);entry&&entry.r;)entry=entry.p;
},has:function(key){return!!getEntry(this,key)}}),DESCRIPTORS&&dP(C.prototype,"size",{get:function(){return defined(this[SIZE])}}),C},def:function(that,key,value){var prev,index,entry=getEntry(that,key);return entry?entry.v=value:(that._l=entry={i:index=fastKey(key,!0),k:key,v:value,p:prev=that._l,n:void 0,r:!1},that._f||(that._f=entry),prev&&(prev.n=entry),that[SIZE]++,"F"!==index&&(that._i[index]=entry)),that},getEntry:getEntry,setStrong:function(C,NAME,IS_MAP){$iterDefine(C,NAME,function(iterated,kind){this._t=iterated,this._k=kind,this._l=void 0},function(){for(var that=this,kind=that._k,entry=that._l;entry&&entry.r;)entry=entry.p;return that._t&&(that._l=entry=entry?entry.n:that._t._f)?"keys"==kind?step(0,entry.k):"values"==kind?step(0,entry.v):step(0,[entry.k,entry.v]):(that._t=void 0,step(1))},IS_MAP?"entries":"values",!IS_MAP,!0),setSpecies(NAME)}}},{"./_an-instance":15,"./_ctx":32,"./_defined":34,"./_descriptors":35,"./_for-of":44,"./_hide":47,"./_iter-define":60,"./_iter-step":62,"./_meta":69,"./_object-create":73,"./_object-dp":74,"./_redefine-all":93,"./_set-species":98}],28:[function(require,module,exports){var classof=require("./_classof"),from=require("./_array-from-iterable");module.exports=function(NAME){return function(){if(classof(this)!=NAME)throw TypeError(NAME+"#toJSON isn't generic");return from(this)}}},{"./_array-from-iterable":19,"./_classof":25}],29:[function(require,module,exports){"use strict";var redefineAll=require("./_redefine-all"),getWeak=require("./_meta").getWeak,anObject=require("./_an-object"),isObject=require("./_is-object"),anInstance=require("./_an-instance"),forOf=require("./_for-of"),createArrayMethod=require("./_array-methods"),$has=require("./_has"),arrayFind=createArrayMethod(5),arrayFindIndex=createArrayMethod(6),id=0,uncaughtFrozenStore=function(that){return that._l||(that._l=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.a=[]},findUncaughtFrozen=function(store,key){return arrayFind(store.a,function(it){return it[0]===key})};UncaughtFrozenStore.prototype={get:function(key){var entry=findUncaughtFrozen(this,key);return entry?entry[1]:void 0},has:function(key){return!!findUncaughtFrozen(this,key)},set:function(key,value){var entry=findUncaughtFrozen(this,key);entry?entry[1]=value:this.a.push([key,value])},delete:function(key){var index=arrayFindIndex(this.a,function(it){return it[0]===key});return~index&&this.a.splice(index,1),!!~index}},module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,"_i"),that._i=id++,that._l=void 0,void 0!=iterable&&forOf(iterable,IS_MAP,that[ADDER],that)});return redefineAll(C.prototype,{delete:function(key){if(!isObject(key))return!1;var data=getWeak(key);return data===!0?uncaughtFrozenStore(this).delete(key):data&&$has(data,this._i)&&delete data[this._i]},has:function(key){if(!isObject(key))return!1;var data=getWeak(key);return data===!0?uncaughtFrozenStore(this).has(key):data&&$has(data,this._i)}}),C},def:function(that,key,value){var data=getWeak(anObject(key),!0);return data===!0?uncaughtFrozenStore(that).set(key,value):data[that._i]=value,that},ufstore:uncaughtFrozenStore}},{"./_an-instance":15,"./_an-object":16,"./_array-methods":21,"./_for-of":44,"./_has":46,"./_is-object":56,"./_meta":69,"./_redefine-all":93}],30:[function(require,module,exports){"use strict";var global=require("./_global"),$export=require("./_export"),redefine=require("./_redefine"),redefineAll=require("./_redefine-all"),meta=require("./_meta"),forOf=require("./_for-of"),anInstance=require("./_an-instance"),isObject=require("./_is-object"),fails=require("./_fails"),$iterDetect=require("./_iter-detect"),setToStringTag=require("./_set-to-string-tag"),inheritIfRequired=require("./_inherit-if-required");module.exports=function(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=global[NAME],C=Base,ADDER=IS_MAP?"set":"add",proto=C&&C.prototype,O={},fixMethod=function(KEY){var fn=proto[KEY];redefine(proto,KEY,"delete"==KEY?function(a){return IS_WEAK&&!isObject(a)?!1:fn.call(this,0===a?0:a)}:"has"==KEY?function(a){return IS_WEAK&&!isObject(a)?!1:fn.call(this,0===a?0:a)}:"get"==KEY?function(a){return IS_WEAK&&!isObject(a)?void 0:fn.call(this,0===a?0:a)}:"add"==KEY?function(a){return fn.call(this,0===a?0:a),this}:function(a,b){return fn.call(this,0===a?0:a,b),this})};if("function"==typeof C&&(IS_WEAK||proto.forEach&&!fails(function(){(new C).entries().next()}))){var instance=new C,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails(function(){instance.has(1)}),ACCEPT_ITERABLES=$iterDetect(function(iter){new C(iter)}),BUGGY_ZERO=!IS_WEAK&&fails(function(){for(var $instance=new C,index=5;index--;)$instance[ADDER](index,index);return!$instance.has(-0)});ACCEPT_ITERABLES||(C=wrapper(function(target,iterable){anInstance(target,C,NAME);var that=inheritIfRequired(new Base,target,C);return void 0!=iterable&&forOf(iterable,IS_MAP,that[ADDER],that),that}),C.prototype=proto,proto.constructor=C),(THROWS_ON_PRIMITIVES||BUGGY_ZERO)&&(fixMethod("delete"),fixMethod("has"),IS_MAP&&fixMethod("get")),(BUGGY_ZERO||HASNT_CHAINING)&&fixMethod(ADDER),IS_WEAK&&proto.clear&&delete proto.clear}else C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER),redefineAll(C.prototype,methods),meta.NEED=!0;return setToStringTag(C,NAME),O[NAME]=C,$export($export.G+$export.W+$export.F*(C!=Base),O),IS_WEAK||common.setStrong(C,NAME,IS_MAP),C}},{"./_an-instance":15,"./_export":39,"./_fails":41,"./_for-of":44,"./_global":45,"./_inherit-if-required":50,"./_is-object":56,"./_iter-detect":61,"./_meta":69,"./_redefine":94,"./_redefine-all":93,"./_set-to-string-tag":99}],31:[function(require,module,exports){var core=module.exports={version:"2.2.1"};"number"==typeof __e&&(__e=core)},{}],32:[function(require,module,exports){var aFunction=require("./_a-function");module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},{"./_a-function":12}],33:[function(require,module,exports){"use strict";var anObject=require("./_an-object"),toPrimitive=require("./_to-primitive"),NUMBER="number";module.exports=function(hint){if("string"!==hint&&hint!==NUMBER&&"default"!==hint)throw TypeError("Incorrect hint");return toPrimitive(anObject(this),hint!=NUMBER)}},{"./_an-object":16,"./_to-primitive":117}],34:[function(require,module,exports){module.exports=function(it){if(void 0==it)throw TypeError("Can't call method on  "+it);return it}},{}],35:[function(require,module,exports){module.exports=!require("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":41}],36:[function(require,module,exports){var isObject=require("./_is-object"),document=require("./_global").document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},{"./_global":45,"./_is-object":56}],37:[function(require,module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],38:[function(require,module,exports){var getKeys=require("./_object-keys"),gOPS=require("./_object-gops"),pIE=require("./_object-pie");module.exports=function(it){var result=getKeys(it),getSymbols=gOPS.f;if(getSymbols)for(var key,symbols=getSymbols(it),isEnum=pIE.f,i=0;symbols.length>i;)isEnum.call(it,key=symbols[i++])&&result.push(key);return result}},{"./_object-gops":80,"./_object-keys":83,"./_object-pie":84}],39:[function(require,module,exports){var global=require("./_global"),core=require("./_core"),hide=require("./_hide"),redefine=require("./_redefine"),ctx=require("./_ctx"),PROTOTYPE="prototype",$export=function(type,name,source){var key,own,out,exp,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,target=IS_GLOBAL?global:IS_STATIC?global[name]||(global[name]={}):(global[name]||{})[PROTOTYPE],exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports[PROTOTYPE]||(exports[PROTOTYPE]={});IS_GLOBAL&&(source=name);for(key in source)own=!IS_FORCED&&target&&void 0!==target[key],out=(own?target:source)[key],exp=IS_BIND&&own?ctx(out,global):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,target&&redefine(target,key,out,type&$export.U),exports[key]!=out&&hide(exports,key,exp),IS_PROTO&&expProto[key]!=out&&(expProto[key]=out)};global.core=core,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export},{"./_core":31,"./_ctx":32,"./_global":45,"./_hide":47,"./_redefine":94}],40:[function(require,module,exports){var MATCH=require("./_wks")("match");module.exports=function(KEY){var re=/./;try{"/./"[KEY](re)}catch(e){try{return re[MATCH]=!1,!"/./"[KEY](re)}catch(f){}}return!0}},{"./_wks":122}],41:[function(require,module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},{}],42:[function(require,module,exports){"use strict";var hide=require("./_hide"),redefine=require("./_redefine"),fails=require("./_fails"),defined=require("./_defined"),wks=require("./_wks");module.exports=function(KEY,length,exec){var SYMBOL=wks(KEY),fns=exec(defined,SYMBOL,""[KEY]),strfn=fns[0],rxfn=fns[1];fails(function(){var O={};return O[SYMBOL]=function(){return 7},7!=""[KEY](O)})&&(redefine(String.prototype,KEY,strfn),hide(RegExp.prototype,SYMBOL,2==length?function(string,arg){return rxfn.call(string,this,arg)}:function(string){return rxfn.call(string,this)}))}},{"./_defined":34,"./_fails":41,"./_hide":47,"./_redefine":94,"./_wks":122}],43:[function(require,module,exports){"use strict";var anObject=require("./_an-object");module.exports=function(){var that=anObject(this),result="";return that.global&&(result+="g"),that.ignoreCase&&(result+="i"),that.multiline&&(result+="m"),that.unicode&&(result+="u"),that.sticky&&(result+="y"),result}},{"./_an-object":16}],44:[function(require,module,exports){var ctx=require("./_ctx"),call=require("./_iter-call"),isArrayIter=require("./_is-array-iter"),anObject=require("./_an-object"),toLength=require("./_to-length"),getIterFn=require("./core.get-iterator-method");module.exports=function(iterable,entries,fn,that,ITERATOR){var length,step,iterator,iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0;if("function"!=typeof iterFn)throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn))for(length=toLength(iterable.length);length>index;index++)entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]);else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;)call(iterator,f,step.value,entries)}},{"./_an-object":16,"./_ctx":32,"./_is-array-iter":53,"./_iter-call":58,"./_to-length":115,"./core.get-iterator-method":123}],45:[function(require,module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},{}],46:[function(require,module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},{}],47:[function(require,module,exports){var dP=require("./_object-dp"),createDesc=require("./_property-desc");module.exports=require("./_descriptors")?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){return object[key]=value,object}},{"./_descriptors":35,"./_object-dp":74,"./_property-desc":92}],48:[function(require,module,exports){module.exports=require("./_global").document&&document.documentElement},{"./_global":45}],49:[function(require,module,exports){module.exports=!require("./_descriptors")&&!require("./_fails")(function(){return 7!=Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":35,"./_dom-create":36,"./_fails":41}],50:[function(require,module,exports){var isObject=require("./_is-object"),setPrototypeOf=require("./_set-proto").set;module.exports=function(that,target,C){var P,S=target.constructor;return S!==C&&"function"==typeof S&&(P=S.prototype)!==C.prototype&&isObject(P)&&setPrototypeOf&&setPrototypeOf(that,P),that}},{"./_is-object":56,"./_set-proto":97}],51:[function(require,module,exports){module.exports=function(fn,args,that){var un=void 0===that;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},{}],52:[function(require,module,exports){var cof=require("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return"String"==cof(it)?it.split(""):Object(it)}},{"./_cof":26}],53:[function(require,module,exports){var Iterators=require("./_iterators"),ITERATOR=require("./_wks")("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},{"./_iterators":63,"./_wks":122}],54:[function(require,module,exports){var cof=require("./_cof");module.exports=Array.isArray||function(arg){return"Array"==cof(arg)}},{"./_cof":26}],55:[function(require,module,exports){var isObject=require("./_is-object"),floor=Math.floor;module.exports=function(it){return!isObject(it)&&isFinite(it)&&floor(it)===it}},{"./_is-object":56}],56:[function(require,module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},{}],57:[function(require,module,exports){var isObject=require("./_is-object"),cof=require("./_cof"),MATCH=require("./_wks")("match");module.exports=function(it){var isRegExp;return isObject(it)&&(void 0!==(isRegExp=it[MATCH])?!!isRegExp:"RegExp"==cof(it))}},{"./_cof":26,"./_is-object":56,"./_wks":122}],58:[function(require,module,exports){var anObject=require("./_an-object");module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator.return;throw void 0!==ret&&anObject(ret.call(iterator)),e}}},{"./_an-object":16}],59:[function(require,module,exports){"use strict";var create=require("./_object-create"),descriptor=require("./_property-desc"),setToStringTag=require("./_set-to-string-tag"),IteratorPrototype={};require("./_hide")(IteratorPrototype,require("./_wks")("iterator"),function(){return this}),module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)}),setToStringTag(Constructor,NAME+" Iterator")}},{"./_hide":47,"./_object-create":73,"./_property-desc":92,"./_set-to-string-tag":99,"./_wks":122}],60:[function(require,module,exports){"use strict";var LIBRARY=require("./_library"),$export=require("./_export"),redefine=require("./_redefine"),hide=require("./_hide"),has=require("./_has"),Iterators=require("./_iterators"),$iterCreate=require("./_iter-create"),setToStringTag=require("./_set-to-string-tag"),getPrototypeOf=require("./_object-gpo"),ITERATOR=require("./_wks")("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var methods,key,IteratorPrototype,getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function(){return new Constructor(this,kind)};case VALUES:return function(){return new Constructor(this,kind)}}return function(){return new Constructor(this,kind)}},TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=!1,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),$entries=DEFAULT?DEF_VALUES?getMethod("entries"):$default:void 0,$anyNative="Array"==NAME?proto.entries||$native:$native;if($anyNative&&(IteratorPrototype=getPrototypeOf($anyNative.call(new Base)),IteratorPrototype!==Object.prototype&&(setToStringTag(IteratorPrototype,TAG,!0),LIBRARY||has(IteratorPrototype,ITERATOR)||hide(IteratorPrototype,ITERATOR,returnThis))),DEF_VALUES&&$native&&$native.name!==VALUES&&(VALUES_BUG=!0,$default=function(){return $native.call(this)}),LIBRARY&&!FORCED||!BUGGY&&!VALUES_BUG&&proto[ITERATOR]||hide(proto,ITERATOR,$default),Iterators[NAME]=$default,Iterators[TAG]=returnThis,DEFAULT)if(methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries},FORCED)for(key in methods)key in proto||redefine(proto,key,methods[key]);else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);return methods}},{"./_export":39,"./_has":46,"./_hide":47,"./_iter-create":59,"./_iterators":63,"./_library":65,"./_object-gpo":81,"./_redefine":94,"./_set-to-string-tag":99,"./_wks":122}],61:[function(require,module,exports){var ITERATOR=require("./_wks")("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR]();riter.return=function(){SAFE_CLOSING=!0},Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return!1;var safe=!1;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){safe=!0},arr[ITERATOR]=function(){return iter},exec(arr)}catch(e){}return safe}},{"./_wks":122}],62:[function(require,module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},{}],63:[function(require,module,exports){module.exports={}},{}],64:[function(require,module,exports){var getKeys=require("./_object-keys"),toIObject=require("./_to-iobject");module.exports=function(object,el){for(var key,O=toIObject(object),keys=getKeys(O),length=keys.length,index=0;length>index;)if(O[key=keys[index++]]===el)return key}},{"./_object-keys":83,"./_to-iobject":114}],65:[function(require,module,exports){module.exports=!1},{}],66:[function(require,module,exports){module.exports=Math.expm1||function(x){return 0==(x=+x)?x:x>-1e-6&&1e-6>x?x+x*x/2:Math.exp(x)-1}},{}],67:[function(require,module,exports){module.exports=Math.log1p||function(x){return(x=+x)>-1e-8&&1e-8>x?x-x*x/2:Math.log(1+x)}},{}],68:[function(require,module,exports){module.exports=Math.sign||function(x){return 0==(x=+x)||x!=x?x:0>x?-1:1}},{}],69:[function(require,module,exports){var META=require("./_uid")("meta"),isObject=require("./_is-object"),has=require("./_has"),setDesc=require("./_object-dp").f,id=0,isExtensible=Object.isExtensible||function(){return!0},FREEZE=!require("./_fails")(function(){return isExtensible(Object.preventExtensions({}))}),setMeta=function(it){setDesc(it,META,{value:{i:"O"+ ++id,w:{}}})},fastKey=function(it,create){if(!isObject(it))return"symbol"==typeof it?it:("string"==typeof it?"S":"P")+it;if(!has(it,META)){if(!isExtensible(it))return"F";if(!create)return"E";setMeta(it)}return it[META].i},getWeak=function(it,create){if(!has(it,META)){if(!isExtensible(it))return!0;if(!create)return!1;setMeta(it)}return it[META].w},onFreeze=function(it){return FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META)&&setMeta(it),it},meta=module.exports={KEY:META,NEED:!1,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze}},{"./_fails":41,"./_has":46,"./_is-object":56,"./_object-dp":74,"./_uid":121}],70:[function(require,module,exports){var Map=require("./es6.map"),$export=require("./_export"),shared=require("./_shared")("metadata"),store=shared.store||(shared.store=new(require("./es6.weak-map"))),getOrCreateMetadataMap=function(target,targetKey,create){var targetMetadata=store.get(target);if(!targetMetadata){if(!create)return;store.set(target,targetMetadata=new Map)}var keyMetadata=targetMetadata.get(targetKey);if(!keyMetadata){if(!create)return;targetMetadata.set(targetKey,keyMetadata=new Map)}return keyMetadata},ordinaryHasOwnMetadata=function(MetadataKey,O,P){var metadataMap=getOrCreateMetadataMap(O,P,!1);return void 0===metadataMap?!1:metadataMap.has(MetadataKey)},ordinaryGetOwnMetadata=function(MetadataKey,O,P){var metadataMap=getOrCreateMetadataMap(O,P,!1);return void 0===metadataMap?void 0:metadataMap.get(MetadataKey)},ordinaryDefineOwnMetadata=function(MetadataKey,MetadataValue,O,P){getOrCreateMetadataMap(O,P,!0).set(MetadataKey,MetadataValue)},ordinaryOwnMetadataKeys=function(target,targetKey){var metadataMap=getOrCreateMetadataMap(target,targetKey,!1),keys=[];return metadataMap&&metadataMap.forEach(function(_,key){keys.push(key)}),keys},toMetaKey=function(it){return void 0===it||"symbol"==typeof it?it:String(it)},exp=function(O){$export($export.S,"Reflect",O)};module.exports={store:store,map:getOrCreateMetadataMap,has:ordinaryHasOwnMetadata,get:ordinaryGetOwnMetadata,set:ordinaryDefineOwnMetadata,keys:ordinaryOwnMetadataKeys,key:toMetaKey,exp:exp}},{"./_export":39,"./_shared":101,"./es6.map":155,"./es6.weak-map":261}],71:[function(require,module,exports){var head,last,notify,global=require("./_global"),macrotask=require("./_task").set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode="process"==require("./_cof")(process),flush=function(){var parent,fn;for(isNode&&(parent=process.domain)&&parent.exit();head;)fn=head.fn,fn(),head=head.next;last=void 0,parent&&parent.enter()};if(isNode)notify=function(){process.nextTick(flush)};else if(Observer){var toggle=!0,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}}else notify=Promise&&Promise.resolve?function(){Promise.resolve().then(flush)}:function(){macrotask.call(global,flush)};module.exports=function(fn){var task={fn:fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}},{"./_cof":26,"./_global":45,"./_task":111}],72:[function(require,module,exports){"use strict";var getKeys=require("./_object-keys"),gOPS=require("./_object-gops"),pIE=require("./_object-pie"),toObject=require("./_to-object"),IObject=require("./_iobject"),$assign=Object.assign;module.exports=!$assign||require("./_fails")(function(){var A={},B={},S=Symbol(),K="abcdefghijklmnopqrst";return A[S]=7,K.split("").forEach(function(k){B[k]=k}),7!=$assign({},A)[S]||Object.keys($assign({},B)).join("")!=K})?function(target,source){for(var T=toObject(target),aLen=arguments.length,index=1,getSymbols=gOPS.f,isEnum=pIE.f;aLen>index;)for(var key,S=IObject(arguments[index++]),keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S),length=keys.length,j=0;length>j;)isEnum.call(S,key=keys[j++])&&(T[key]=S[key]);return T}:$assign},{"./_fails":41,"./_iobject":52,"./_object-gops":80,"./_object-keys":83,"./_object-pie":84,"./_to-object":116}],73:[function(require,module,exports){var anObject=require("./_an-object"),dPs=require("./_object-dps"),enumBugKeys=require("./_enum-bug-keys"),IE_PROTO=require("./_shared-key")("IE_PROTO"),Empty=function(){},PROTOTYPE="prototype",createDict=function(){var iframeDocument,iframe=require("./_dom-create")("iframe"),i=enumBugKeys.length,gt=">";for(iframe.style.display="none",require("./_html").appendChild(iframe),iframe.src="javascript:",iframeDocument=iframe.contentWindow.document,iframeDocument.open(),iframeDocument.write("<script>document.F=Object</script"+gt),iframeDocument.close(),createDict=iframeDocument.F;i--;)delete createDict[PROTOTYPE][enumBugKeys[i]];return createDict()};module.exports=Object.create||function(O,Properties){var result;return null!==O?(Empty[PROTOTYPE]=anObject(O),result=new Empty,Empty[PROTOTYPE]=null,result[IE_PROTO]=O):result=createDict(),void 0===Properties?result:dPs(result,Properties)}},{"./_an-object":16,"./_dom-create":36,"./_enum-bug-keys":37,"./_html":48,"./_object-dps":75,"./_shared-key":100}],74:[function(require,module,exports){var anObject=require("./_an-object"),IE8_DOM_DEFINE=require("./_ie8-dom-define"),toPrimitive=require("./_to-primitive"),dP=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");return"value"in Attributes&&(O[P]=Attributes.value),O}},{"./_an-object":16,"./_descriptors":35,"./_ie8-dom-define":49,"./_to-primitive":117}],75:[function(require,module,exports){var dP=require("./_object-dp"),anObject=require("./_an-object"),getKeys=require("./_object-keys");module.exports=require("./_descriptors")?Object.defineProperties:function(O,Properties){anObject(O);for(var P,keys=getKeys(Properties),length=keys.length,i=0;length>i;)dP.f(O,P=keys[i++],Properties[P]);return O}},{"./_an-object":16,"./_descriptors":35,"./_object-dp":74,"./_object-keys":83}],76:[function(require,module,exports){module.exports=require("./_library")||!require("./_fails")(function(){var K=Math.random();__defineSetter__.call(null,K,function(){}),delete require("./_global")[K]})},{"./_fails":41,"./_global":45,"./_library":65}],77:[function(require,module,exports){var pIE=require("./_object-pie"),createDesc=require("./_property-desc"),toIObject=require("./_to-iobject"),toPrimitive=require("./_to-primitive"),has=require("./_has"),IE8_DOM_DEFINE=require("./_ie8-dom-define"),gOPD=Object.getOwnPropertyDescriptor;exports.f=require("./_descriptors")?gOPD:function(O,P){if(O=toIObject(O),P=toPrimitive(P,!0),IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}return has(O,P)?createDesc(!pIE.f.call(O,P),O[P]):void 0}},{"./_descriptors":35,"./_has":46,"./_ie8-dom-define":49,"./_object-pie":84,"./_property-desc":92,"./_to-iobject":114,"./_to-primitive":117}],78:[function(require,module,exports){var toIObject=require("./_to-iobject"),gOPN=require("./_object-gopn").f,toString={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(it){try{return gOPN(it)}catch(e){return windowNames.slice()}};module.exports.f=function(it){return windowNames&&"[object Window]"==toString.call(it)?getWindowNames(it):gOPN(toIObject(it))}},{"./_object-gopn":79,"./_to-iobject":114}],79:[function(require,module,exports){var $keys=require("./_object-keys-internal"),hiddenKeys=require("./_enum-bug-keys").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function(O){return $keys(O,hiddenKeys)}},{"./_enum-bug-keys":37,"./_object-keys-internal":82}],80:[function(require,module,exports){exports.f=Object.getOwnPropertySymbols},{}],81:[function(require,module,exports){var has=require("./_has"),toObject=require("./_to-object"),IE_PROTO=require("./_shared-key")("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectProto:null}},{"./_has":46,"./_shared-key":100,"./_to-object":116}],82:[function(require,module,exports){var has=require("./_has"),toIObject=require("./_to-iobject"),arrayIndexOf=require("./_array-includes")(!1),IE_PROTO=require("./_shared-key")("IE_PROTO");module.exports=function(object,names){var key,O=toIObject(object),i=0,result=[];for(key in O)key!=IE_PROTO&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~arrayIndexOf(result,key)||result.push(key));return result}},{"./_array-includes":20,"./_has":46,"./_shared-key":100,"./_to-iobject":114}],83:[function(require,module,exports){var $keys=require("./_object-keys-internal"),enumBugKeys=require("./_enum-bug-keys");module.exports=Object.keys||function(O){return $keys(O,enumBugKeys)}},{"./_enum-bug-keys":37,"./_object-keys-internal":82}],84:[function(require,module,exports){exports.f={}.propertyIsEnumerable},{}],85:[function(require,module,exports){var $export=require("./_export"),core=require("./_core"),fails=require("./_fails");module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn),$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},{"./_core":31,"./_export":39,"./_fails":41}],86:[function(require,module,exports){var getKeys=require("./_object-keys"),toIObject=require("./_to-iobject"),isEnum=require("./_object-pie").f;module.exports=function(isEntries){return function(it){for(var key,O=toIObject(it),keys=getKeys(O),length=keys.length,i=0,result=[];length>i;)isEnum.call(O,key=keys[i++])&&result.push(isEntries?[key,O[key]]:O[key]);return result}}},{"./_object-keys":83,"./_object-pie":84,"./_to-iobject":114}],87:[function(require,module,exports){var gOPN=require("./_object-gopn"),gOPS=require("./_object-gops"),anObject=require("./_an-object"),Reflect=require("./_global").Reflect;module.exports=Reflect&&Reflect.ownKeys||function(it){var keys=gOPN.f(anObject(it)),getSymbols=gOPS.f;return getSymbols?keys.concat(getSymbols(it)):keys}},{"./_an-object":16,"./_global":45,"./_object-gopn":79,"./_object-gops":80}],88:[function(require,module,exports){var $parseFloat=require("./_global").parseFloat,$trim=require("./_string-trim").trim;module.exports=1/$parseFloat(require("./_string-ws")+"-0")!==-(1/0)?function(str){var string=$trim(String(str),3),result=$parseFloat(string);return 0===result&&"-"==string.charAt(0)?-0:result}:$parseFloat},{"./_global":45,"./_string-trim":109,"./_string-ws":110}],89:[function(require,module,exports){var $parseInt=require("./_global").parseInt,$trim=require("./_string-trim").trim,ws=require("./_string-ws"),hex=/^[\-+]?0[xX]/;module.exports=8!==$parseInt(ws+"08")||22!==$parseInt(ws+"0x16")?function(str,radix){var string=$trim(String(str),3);return $parseInt(string,radix>>>0||(hex.test(string)?16:10))}:$parseInt},{"./_global":45,"./_string-trim":109,"./_string-ws":110}],90:[function(require,module,exports){"use strict";var path=require("./_path"),invoke=require("./_invoke"),aFunction=require("./_a-function");module.exports=function(){for(var fn=aFunction(this),length=arguments.length,pargs=Array(length),i=0,_=path._,holder=!1;length>i;)(pargs[i]=arguments[i++])===_&&(holder=!0);return function(){var args,that=this,aLen=arguments.length,j=0,k=0;if(!holder&&!aLen)return invoke(fn,pargs,that);if(args=pargs.slice(),holder)for(;length>j;j++)args[j]===_&&(args[j]=arguments[k++]);for(;aLen>k;)args.push(arguments[k++]);return invoke(fn,args,that)}}},{"./_a-function":12,"./_invoke":51,"./_path":91}],91:[function(require,module,exports){module.exports=require("./_global")},{"./_global":45}],92:[function(require,module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},{}],93:[function(require,module,exports){var redefine=require("./_redefine");module.exports=function(target,src,safe){for(var key in src)redefine(target,key,src[key],safe);return target}},{"./_redefine":94}],94:[function(require,module,exports){var global=require("./_global"),hide=require("./_hide"),has=require("./_has"),SRC=require("./_uid")("src"),TO_STRING="toString",$toString=Function[TO_STRING],TPL=(""+$toString).split(TO_STRING);require("./_core").inspectSource=function(it){return $toString.call(it)},(module.exports=function(O,key,val,safe){var isFunction="function"==typeof val;isFunction&&(has(val,"name")||hide(val,"name",key)),O[key]!==val&&(isFunction&&(has(val,SRC)||hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)))),O===global?O[key]=val:safe?O[key]?O[key]=val:hide(O,key,val):(delete O[key],hide(O,key,val)))})(Function.prototype,TO_STRING,function(){return"function"==typeof this&&this[SRC]||$toString.call(this)})},{"./_core":31,"./_global":45,"./_has":46,"./_hide":47,"./_uid":121}],95:[function(require,module,exports){
module.exports=function(regExp,replace){var replacer=replace===Object(replace)?function(part){return replace[part]}:replace;return function(it){return String(it).replace(regExp,replacer)}}},{}],96:[function(require,module,exports){module.exports=Object.is||function(x,y){return x===y?0!==x||1/x===1/y:x!=x&&y!=y}},{}],97:[function(require,module,exports){var isObject=require("./_is-object"),anObject=require("./_an-object"),check=function(O,proto){if(anObject(O),!isObject(proto)&&null!==proto)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=require("./_ctx")(Function.call,require("./_object-gopd").f(Object.prototype,"__proto__").set,2),set(test,[]),buggy=!(test instanceof Array)}catch(e){buggy=!0}return function(O,proto){return check(O,proto),buggy?O.__proto__=proto:set(O,proto),O}}({},!1):void 0),check:check}},{"./_an-object":16,"./_ctx":32,"./_is-object":56,"./_object-gopd":77}],98:[function(require,module,exports){"use strict";var global=require("./_global"),dP=require("./_object-dp"),DESCRIPTORS=require("./_descriptors"),SPECIES=require("./_wks")("species");module.exports=function(KEY){var C=global[KEY];DESCRIPTORS&&C&&!C[SPECIES]&&dP.f(C,SPECIES,{configurable:!0,get:function(){return this}})}},{"./_descriptors":35,"./_global":45,"./_object-dp":74,"./_wks":122}],99:[function(require,module,exports){var def=require("./_object-dp").f,has=require("./_has"),TAG=require("./_wks")("toStringTag");module.exports=function(it,tag,stat){it&&!has(it=stat?it:it.prototype,TAG)&&def(it,TAG,{configurable:!0,value:tag})}},{"./_has":46,"./_object-dp":74,"./_wks":122}],100:[function(require,module,exports){var shared=require("./_shared")("keys"),uid=require("./_uid");module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},{"./_shared":101,"./_uid":121}],101:[function(require,module,exports){var global=require("./_global"),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},{"./_global":45}],102:[function(require,module,exports){var anObject=require("./_an-object"),aFunction=require("./_a-function"),SPECIES=require("./_wks")("species");module.exports=function(O,D){var S,C=anObject(O).constructor;return void 0===C||void 0==(S=anObject(C)[SPECIES])?D:aFunction(S)}},{"./_a-function":12,"./_an-object":16,"./_wks":122}],103:[function(require,module,exports){var fails=require("./_fails");module.exports=function(method,arg){return!!method&&fails(function(){arg?method.call(null,function(){},1):method.call(null)})}},{"./_fails":41}],104:[function(require,module,exports){var toInteger=require("./_to-integer"),defined=require("./_defined");module.exports=function(TO_STRING){return function(that,pos){var a,b,s=String(defined(that)),i=toInteger(pos),l=s.length;return 0>i||i>=l?TO_STRING?"":void 0:(a=s.charCodeAt(i),55296>a||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536)}}},{"./_defined":34,"./_to-integer":113}],105:[function(require,module,exports){var isRegExp=require("./_is-regexp"),defined=require("./_defined");module.exports=function(that,searchString,NAME){if(isRegExp(searchString))throw TypeError("String#"+NAME+" doesn't accept regex!");return String(defined(that))}},{"./_defined":34,"./_is-regexp":57}],106:[function(require,module,exports){var $export=require("./_export"),fails=require("./_fails"),defined=require("./_defined"),quot=/"/g,createHTML=function(string,tag,attribute,value){var S=String(defined(string)),p1="<"+tag;return""!==attribute&&(p1+=" "+attribute+'="'+String(value).replace(quot,"&quot;")+'"'),p1+">"+S+"</"+tag+">"};module.exports=function(NAME,exec){var O={};O[NAME]=exec(createHTML),$export($export.P+$export.F*fails(function(){var test=""[NAME]('"');return test!==test.toLowerCase()||test.split('"').length>3}),"String",O)}},{"./_defined":34,"./_export":39,"./_fails":41}],107:[function(require,module,exports){var toLength=require("./_to-length"),repeat=require("./_string-repeat"),defined=require("./_defined");module.exports=function(that,maxLength,fillString,left){var S=String(defined(that)),stringLength=S.length,fillStr=void 0===fillString?" ":String(fillString),intMaxLength=toLength(maxLength);if(stringLength>=intMaxLength)return S;""==fillStr&&(fillStr=" ");var fillLen=intMaxLength-stringLength,stringFiller=repeat.call(fillStr,Math.ceil(fillLen/fillStr.length));return stringFiller.length>fillLen&&(stringFiller=stringFiller.slice(0,fillLen)),left?stringFiller+S:S+stringFiller}},{"./_defined":34,"./_string-repeat":108,"./_to-length":115}],108:[function(require,module,exports){"use strict";var toInteger=require("./_to-integer"),defined=require("./_defined");module.exports=function(count){var str=String(defined(this)),res="",n=toInteger(count);if(0>n||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str))1&n&&(res+=str);return res}},{"./_defined":34,"./_to-integer":113}],109:[function(require,module,exports){var $export=require("./_export"),defined=require("./_defined"),fails=require("./_fails"),spaces=require("./_string-ws"),space="["+spaces+"]",non="",ltrim=RegExp("^"+space+space+"*"),rtrim=RegExp(space+space+"*$"),exporter=function(KEY,exec,ALIAS){var exp={},FORCE=fails(function(){return!!spaces[KEY]()||non[KEY]()!=non}),fn=exp[KEY]=FORCE?exec(trim):spaces[KEY];ALIAS&&(exp[ALIAS]=fn),$export($export.P+$export.F*FORCE,"String",exp)},trim=exporter.trim=function(string,TYPE){return string=String(defined(string)),1&TYPE&&(string=string.replace(ltrim,"")),2&TYPE&&(string=string.replace(rtrim,"")),string};module.exports=exporter},{"./_defined":34,"./_export":39,"./_fails":41,"./_string-ws":110}],110:[function(require,module,exports){module.exports="	\n\v\f\r \u2028\u2029\ufeff"},{}],111:[function(require,module,exports){var defer,channel,port,ctx=require("./_ctx"),invoke=require("./_invoke"),html=require("./_html"),cel=require("./_dom-create"),global=require("./_global"),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},listener=function(event){run.call(event.data)};setTask&&clearTask||(setTask=function(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){invoke("function"==typeof fn?fn:Function(fn),args)},defer(counter),counter},clearTask=function(id){delete queue[id]},"process"==require("./_cof")(process)?defer=function(id){process.nextTick(ctx(run,id,1))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=ctx(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer=function(id){global.postMessage(id+"","*")},global.addEventListener("message",listener,!1)):defer=ONREADYSTATECHANGE in cel("script")?function(id){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run.call(id)}}:function(id){setTimeout(ctx(run,id,1),0)}),module.exports={set:setTask,clear:clearTask}},{"./_cof":26,"./_ctx":32,"./_dom-create":36,"./_global":45,"./_html":48,"./_invoke":51}],112:[function(require,module,exports){var toInteger=require("./_to-integer"),max=Math.max,min=Math.min;module.exports=function(index,length){return index=toInteger(index),0>index?max(index+length,0):min(index,length)}},{"./_to-integer":113}],113:[function(require,module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},{}],114:[function(require,module,exports){var IObject=require("./_iobject"),defined=require("./_defined");module.exports=function(it){return IObject(defined(it))}},{"./_defined":34,"./_iobject":52}],115:[function(require,module,exports){var toInteger=require("./_to-integer"),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},{"./_to-integer":113}],116:[function(require,module,exports){var defined=require("./_defined");module.exports=function(it){return Object(defined(it))}},{"./_defined":34}],117:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;if("function"==typeof(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(!S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":56}],118:[function(require,module,exports){"use strict";if(require("./_descriptors")){var LIBRARY=require("./_library"),global=require("./_global"),fails=require("./_fails"),$export=require("./_export"),$typed=require("./_typed"),$buffer=require("./_typed-buffer"),ctx=require("./_ctx"),anInstance=require("./_an-instance"),propertyDesc=require("./_property-desc"),hide=require("./_hide"),redefineAll=require("./_redefine-all"),toInteger=(require("./_is-integer"),require("./_to-integer")),toLength=require("./_to-length"),toIndex=require("./_to-index"),toPrimitive=require("./_to-primitive"),has=require("./_has"),same=require("./_same-value"),classof=require("./_classof"),isObject=require("./_is-object"),toObject=require("./_to-object"),isArrayIter=require("./_is-array-iter"),create=require("./_object-create"),getPrototypeOf=require("./_object-gpo"),gOPN=require("./_object-gopn").f,getIterFn=(require("./core.is-iterable"),require("./core.get-iterator-method")),uid=require("./_uid"),wks=require("./_wks"),createArrayMethod=require("./_array-methods"),createArrayIncludes=require("./_array-includes"),speciesConstructor=require("./_species-constructor"),ArrayIterators=require("./es6.array.iterator"),Iterators=require("./_iterators"),$iterDetect=require("./_iter-detect"),setSpecies=require("./_set-species"),arrayFill=require("./_array-fill"),arrayCopyWithin=require("./_array-copy-within"),$DP=require("./_object-dp"),$GOPD=require("./_object-gopd"),dP=$DP.f,gOPD=$GOPD.f,RangeError=global.RangeError,TypeError=global.TypeError,Uint8Array=global.Uint8Array,ARRAY_BUFFER="ArrayBuffer",SHARED_BUFFER="Shared"+ARRAY_BUFFER,BYTES_PER_ELEMENT="BYTES_PER_ELEMENT",PROTOTYPE="prototype",ArrayProto=Array[PROTOTYPE],$ArrayBuffer=$buffer.ArrayBuffer,$DataView=$buffer.DataView,arrayForEach=createArrayMethod(0),arrayFilter=createArrayMethod(2),arraySome=createArrayMethod(3),arrayEvery=createArrayMethod(4),arrayFind=createArrayMethod(5),arrayFindIndex=createArrayMethod(6),arrayIncludes=createArrayIncludes(!0),arrayIndexOf=createArrayIncludes(!1),arrayValues=ArrayIterators.values,arrayKeys=ArrayIterators.keys,arrayEntries=ArrayIterators.entries,arrayLastIndexOf=ArrayProto.lastIndexOf,arrayReduce=ArrayProto.reduce,arrayReduceRight=ArrayProto.reduceRight,arrayJoin=ArrayProto.join,arraySort=ArrayProto.sort,arraySlice=ArrayProto.slice,arrayToString=ArrayProto.toString,arrayToLocaleString=ArrayProto.toLocaleString,ITERATOR=wks("iterator"),TAG=wks("toStringTag"),TYPED_CONSTRUCTOR=uid("typed_constructor"),DEF_CONSTRUCTOR=uid("def_constructor"),ALL_CONSTRUCTORS=$typed.CONSTR,TYPED_ARRAY=$typed.TYPED,VIEW=$typed.VIEW,WRONG_LENGTH="Wrong length!",$map=createArrayMethod(1,function(O,length){return allocate(speciesConstructor(O,O[DEF_CONSTRUCTOR]),length)}),LITTLE_ENDIAN=fails(function(){return 1===new Uint8Array(new Uint16Array([1]).buffer)[0]}),FORCED_SET=!!Uint8Array&&!!Uint8Array[PROTOTYPE].set&&fails(function(){new Uint8Array(1).set({})}),strictToLength=function(it,SAME){if(void 0===it)throw TypeError(WRONG_LENGTH);var number=+it,length=toLength(it);if(SAME&&!same(number,length))throw RangeError(WRONG_LENGTH);return length},toOffset=function(it,BYTES){var offset=toInteger(it);if(0>offset||offset%BYTES)throw RangeError("Wrong offset!");return offset},validate=function(it){if(isObject(it)&&TYPED_ARRAY in it)return it;throw TypeError(it+" is not a typed array!")},allocate=function(C,length){if(!(isObject(C)&&TYPED_CONSTRUCTOR in C))throw TypeError("It is not a typed array constructor!");return new C(length)},speciesFromList=function(O,list){return fromList(speciesConstructor(O,O[DEF_CONSTRUCTOR]),list)},fromList=function(C,list){for(var index=0,length=list.length,result=allocate(C,length);length>index;)result[index]=list[index++];return result},addGetter=function(it,key,internal){dP(it,key,{get:function(){return this._d[internal]}})},$from=function(source){var i,length,values,result,step,iterator,O=toObject(source),aLen=arguments.length,mapfn=aLen>1?arguments[1]:void 0,mapping=void 0!==mapfn,iterFn=getIterFn(O);if(void 0!=iterFn&&!isArrayIter(iterFn)){for(iterator=iterFn.call(O),values=[],i=0;!(step=iterator.next()).done;i++)values.push(step.value);O=values}for(mapping&&aLen>2&&(mapfn=ctx(mapfn,arguments[2],2)),i=0,length=toLength(O.length),result=allocate(this,length);length>i;i++)result[i]=mapping?mapfn(O[i],i):O[i];return result},$of=function(){for(var index=0,length=arguments.length,result=allocate(this,length);length>index;)result[index]=arguments[index++];return result},TO_LOCALE_BUG=!!Uint8Array&&fails(function(){arrayToLocaleString.call(new Uint8Array(1))}),$toLocaleString=function(){return arrayToLocaleString.apply(TO_LOCALE_BUG?arraySlice.call(validate(this)):validate(this),arguments)},proto={copyWithin:function(target,start){return arrayCopyWithin.call(validate(this),target,start,arguments.length>2?arguments[2]:void 0)},every:function(callbackfn){return arrayEvery(validate(this),callbackfn,arguments.length>1?arguments[1]:void 0)},fill:function(value){return arrayFill.apply(validate(this),arguments)},filter:function(callbackfn){return speciesFromList(this,arrayFilter(validate(this),callbackfn,arguments.length>1?arguments[1]:void 0))},find:function(predicate){return arrayFind(validate(this),predicate,arguments.length>1?arguments[1]:void 0)},findIndex:function(predicate){return arrayFindIndex(validate(this),predicate,arguments.length>1?arguments[1]:void 0)},forEach:function(callbackfn){arrayForEach(validate(this),callbackfn,arguments.length>1?arguments[1]:void 0)},indexOf:function(searchElement){return arrayIndexOf(validate(this),searchElement,arguments.length>1?arguments[1]:void 0)},includes:function(searchElement){return arrayIncludes(validate(this),searchElement,arguments.length>1?arguments[1]:void 0)},join:function(separator){return arrayJoin.apply(validate(this),arguments)},lastIndexOf:function(searchElement){return arrayLastIndexOf.apply(validate(this),arguments)},map:function(mapfn){return $map(validate(this),mapfn,arguments.length>1?arguments[1]:void 0)},reduce:function(callbackfn){return arrayReduce.apply(validate(this),arguments)},reduceRight:function(callbackfn){return arrayReduceRight.apply(validate(this),arguments)},reverse:function(){for(var value,that=this,length=validate(that).length,middle=Math.floor(length/2),index=0;middle>index;)value=that[index],that[index++]=that[--length],that[length]=value;return that},some:function(callbackfn){return arraySome(validate(this),callbackfn,arguments.length>1?arguments[1]:void 0)},sort:function(comparefn){return arraySort.call(validate(this),comparefn)},subarray:function(begin,end){var O=validate(this),length=O.length,$begin=toIndex(begin,length);return new(speciesConstructor(O,O[DEF_CONSTRUCTOR]))(O.buffer,O.byteOffset+$begin*O.BYTES_PER_ELEMENT,toLength((void 0===end?length:toIndex(end,length))-$begin))}},$slice=function(start,end){return speciesFromList(this,arraySlice.call(validate(this),start,end))},$set=function(arrayLike){validate(this);var offset=toOffset(arguments[1],1),length=this.length,src=toObject(arrayLike),len=toLength(src.length),index=0;if(len+offset>length)throw RangeError(WRONG_LENGTH);for(;len>index;)this[offset+index]=src[index++]},$iterators={entries:function(){return arrayEntries.call(validate(this))},keys:function(){return arrayKeys.call(validate(this))},values:function(){return arrayValues.call(validate(this))}},isTAIndex=function(target,key){return isObject(target)&&target[TYPED_ARRAY]&&"symbol"!=typeof key&&key in target&&String(+key)==String(key)},$getDesc=function(target,key){return isTAIndex(target,key=toPrimitive(key,!0))?propertyDesc(2,target[key]):gOPD(target,key)},$setDesc=function(target,key,desc){return!(isTAIndex(target,key=toPrimitive(key,!0))&&isObject(desc)&&has(desc,"value"))||has(desc,"get")||has(desc,"set")||desc.configurable||has(desc,"writable")&&!desc.writable||has(desc,"enumerable")&&!desc.enumerable?dP(target,key,desc):(target[key]=desc.value,target)};ALL_CONSTRUCTORS||($GOPD.f=$getDesc,$DP.f=$setDesc),$export($export.S+$export.F*!ALL_CONSTRUCTORS,"Object",{getOwnPropertyDescriptor:$getDesc,defineProperty:$setDesc}),fails(function(){arrayToString.call({})})&&(arrayToString=arrayToLocaleString=function(){return arrayJoin.call(this)});var $TypedArrayPrototype$=redefineAll({},proto);redefineAll($TypedArrayPrototype$,$iterators),hide($TypedArrayPrototype$,ITERATOR,$iterators.values),redefineAll($TypedArrayPrototype$,{slice:$slice,set:$set,constructor:function(){},toString:arrayToString,toLocaleString:$toLocaleString}),addGetter($TypedArrayPrototype$,"buffer","b"),addGetter($TypedArrayPrototype$,"byteOffset","o"),addGetter($TypedArrayPrototype$,"byteLength","l"),addGetter($TypedArrayPrototype$,"length","e"),dP($TypedArrayPrototype$,TAG,{get:function(){return this[TYPED_ARRAY]}}),module.exports=function(KEY,BYTES,wrapper,CLAMPED){CLAMPED=!!CLAMPED;var NAME=KEY+(CLAMPED?"Clamped":"")+"Array",ISNT_UINT8="Uint8Array"!=NAME,GETTER="get"+KEY,SETTER="set"+KEY,TypedArray=global[NAME],Base=TypedArray||{},TAC=TypedArray&&getPrototypeOf(TypedArray),FORCED=!TypedArray||!$typed.ABV,O={},TypedArrayPrototype=TypedArray&&TypedArray[PROTOTYPE],getter=function(that,index){var data=that._d;return data.v[GETTER](index*BYTES+data.o,LITTLE_ENDIAN)},setter=function(that,index,value){var data=that._d;CLAMPED&&(value=(value=Math.round(value))<0?0:value>255?255:255&value),data.v[SETTER](index*BYTES+data.o,value,LITTLE_ENDIAN)},addElement=function(that,index){dP(that,index,{get:function(){return getter(this,index)},set:function(value){return setter(this,index,value)},enumerable:!0})};FORCED?(TypedArray=wrapper(function(that,data,$offset,$length){anInstance(that,TypedArray,NAME,"_d");var buffer,byteLength,length,klass,index=0,offset=0;if(isObject(data)){if(!(data instanceof $ArrayBuffer||(klass=classof(data))==ARRAY_BUFFER||klass==SHARED_BUFFER))return TYPED_ARRAY in data?fromList(TypedArray,data):$from.call(TypedArray,data);buffer=data,offset=toOffset($offset,BYTES);var $len=data.byteLength;if(void 0===$length){if($len%BYTES)throw RangeError(WRONG_LENGTH);if(byteLength=$len-offset,0>byteLength)throw RangeError(WRONG_LENGTH)}else if(byteLength=toLength($length)*BYTES,byteLength+offset>$len)throw RangeError(WRONG_LENGTH);length=byteLength/BYTES}else length=strictToLength(data,!0),byteLength=length*BYTES,buffer=new $ArrayBuffer(byteLength);for(hide(that,"_d",{b:buffer,o:offset,l:byteLength,e:length,v:new $DataView(buffer)});length>index;)addElement(that,index++)}),TypedArrayPrototype=TypedArray[PROTOTYPE]=create($TypedArrayPrototype$),hide(TypedArrayPrototype,"constructor",TypedArray)):$iterDetect(function(iter){new TypedArray(null),new TypedArray(iter)},!0)||(TypedArray=wrapper(function(that,data,$offset,$length){anInstance(that,TypedArray,NAME);var klass;return isObject(data)?data instanceof $ArrayBuffer||(klass=classof(data))==ARRAY_BUFFER||klass==SHARED_BUFFER?void 0!==$length?new Base(data,toOffset($offset,BYTES),$length):void 0!==$offset?new Base(data,toOffset($offset,BYTES)):new Base(data):TYPED_ARRAY in data?fromList(TypedArray,data):$from.call(TypedArray,data):new Base(strictToLength(data,ISNT_UINT8))}),arrayForEach(TAC!==Function.prototype?gOPN(Base).concat(gOPN(TAC)):gOPN(Base),function(key){key in TypedArray||hide(TypedArray,key,Base[key])}),TypedArray[PROTOTYPE]=TypedArrayPrototype,LIBRARY||(TypedArrayPrototype.constructor=TypedArray));var $nativeIterator=TypedArrayPrototype[ITERATOR],CORRECT_ITER_NAME=!!$nativeIterator&&("values"==$nativeIterator.name||void 0==$nativeIterator.name),$iterator=$iterators.values;hide(TypedArray,TYPED_CONSTRUCTOR,!0),hide(TypedArrayPrototype,TYPED_ARRAY,NAME),hide(TypedArrayPrototype,VIEW,!0),hide(TypedArrayPrototype,DEF_CONSTRUCTOR,TypedArray),(CLAMPED?new TypedArray(1)[TAG]==NAME:TAG in TypedArrayPrototype)||dP(TypedArrayPrototype,TAG,{get:function(){return NAME}}),O[NAME]=TypedArray,$export($export.G+$export.W+$export.F*(TypedArray!=Base),O),$export($export.S,NAME,{BYTES_PER_ELEMENT:BYTES,from:$from,of:$of}),BYTES_PER_ELEMENT in TypedArrayPrototype||hide(TypedArrayPrototype,BYTES_PER_ELEMENT,BYTES),$export($export.P,NAME,proto),setSpecies(NAME),$export($export.P+$export.F*FORCED_SET,NAME,{set:$set}),$export($export.P+$export.F*!CORRECT_ITER_NAME,NAME,$iterators),$export($export.P+$export.F*(TypedArrayPrototype.toString!=arrayToString),NAME,{toString:arrayToString}),$export($export.P+$export.F*fails(function(){new TypedArray(1).slice()}),NAME,{slice:$slice}),$export($export.P+$export.F*(fails(function(){return[1,2].toLocaleString()!=new TypedArray([1,2]).toLocaleString()})||!fails(function(){TypedArrayPrototype.toLocaleString.call([1,2])})),NAME,{toLocaleString:$toLocaleString}),Iterators[NAME]=CORRECT_ITER_NAME?$nativeIterator:$iterator,LIBRARY||CORRECT_ITER_NAME||hide(TypedArrayPrototype,ITERATOR,$iterator)}}else module.exports=function(){}},{"./_an-instance":15,"./_array-copy-within":17,"./_array-fill":18,"./_array-includes":20,"./_array-methods":21,"./_classof":25,"./_ctx":32,"./_descriptors":35,"./_export":39,"./_fails":41,"./_global":45,"./_has":46,"./_hide":47,"./_is-array-iter":53,"./_is-integer":55,"./_is-object":56,"./_iter-detect":61,"./_iterators":63,"./_library":65,"./_object-create":73,"./_object-dp":74,"./_object-gopd":77,"./_object-gopn":79,"./_object-gpo":81,"./_property-desc":92,"./_redefine-all":93,"./_same-value":96,"./_set-species":98,"./_species-constructor":102,"./_to-index":112,"./_to-integer":113,"./_to-length":115,"./_to-object":116,"./_to-primitive":117,"./_typed":120,"./_typed-buffer":119,"./_uid":121,"./_wks":122,"./core.get-iterator-method":123,"./core.is-iterable":124,"./es6.array.iterator":136}],119:[function(require,module,exports){"use strict";var global=require("./_global"),DESCRIPTORS=require("./_descriptors"),LIBRARY=require("./_library"),$typed=require("./_typed"),hide=require("./_hide"),redefineAll=require("./_redefine-all"),fails=require("./_fails"),anInstance=require("./_an-instance"),toInteger=require("./_to-integer"),toLength=require("./_to-length"),gOPN=require("./_object-gopn").f,dP=require("./_object-dp").f,arrayFill=require("./_array-fill"),setToStringTag=require("./_set-to-string-tag"),ARRAY_BUFFER="ArrayBuffer",DATA_VIEW="DataView",PROTOTYPE="prototype",WRONG_LENGTH="Wrong length!",WRONG_INDEX="Wrong index!",$ArrayBuffer=global[ARRAY_BUFFER],$DataView=global[DATA_VIEW],Math=global.Math,RangeError=(global.parseInt,global.RangeError),Infinity=global.Infinity,BaseBuffer=$ArrayBuffer,abs=Math.abs,pow=Math.pow,floor=(Math.min,Math.floor),log=Math.log,LN2=Math.LN2,BUFFER="buffer",BYTE_LENGTH="byteLength",BYTE_OFFSET="byteOffset",$BUFFER=DESCRIPTORS?"_b":BUFFER,$LENGTH=DESCRIPTORS?"_l":BYTE_LENGTH,$OFFSET=DESCRIPTORS?"_o":BYTE_OFFSET,packIEEE754=function(value,mLen,nBytes){var e,m,c,buffer=Array(nBytes),eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?pow(2,-24)-pow(2,-77):0,i=0,s=0>value||0===value&&0>1/value?1:0;for(value=abs(value),value!=value||value===Infinity?(m=value!=value?1:0,e=eMax):(e=floor(log(value)/LN2),value*(c=pow(2,-e))<1&&(e--,c*=2),value+=e+eBias>=1?rt/c:rt*pow(2,1-eBias),value*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*pow(2,mLen),e+=eBias):(m=value*pow(2,eBias-1)*pow(2,mLen),e=0));mLen>=8;buffer[i++]=255&m,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[i++]=255&e,e/=256,eLen-=8);return buffer[--i]|=128*s,buffer},unpackIEEE754=function(buffer,mLen,nBytes){var m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=eLen-7,i=nBytes-1,s=buffer[i--],e=127&s;for(s>>=7;nBits>0;e=256*e+buffer[i],i--,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[i],i--,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:s?-Infinity:Infinity;m+=pow(2,mLen),e-=eBias}return(s?-1:1)*m*pow(2,e-mLen)},unpackI32=function(bytes){return bytes[3]<<24|bytes[2]<<16|bytes[1]<<8|bytes[0]},packI8=function(it){return[255&it]},packI16=function(it){return[255&it,it>>8&255]},packI32=function(it){return[255&it,it>>8&255,it>>16&255,it>>24&255]},packF64=function(it){return packIEEE754(it,52,8)},packF32=function(it){return packIEEE754(it,23,4)},addGetter=function(C,key,internal){dP(C[PROTOTYPE],key,{get:function(){return this[internal]}})},get=function(view,bytes,index,isLittleEndian){var numIndex=+index,intIndex=toInteger(numIndex);if(numIndex!=intIndex||0>intIndex||intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);var store=view[$BUFFER]._b,start=intIndex+view[$OFFSET],pack=store.slice(start,start+bytes);return isLittleEndian?pack:pack.reverse()},set=function(view,bytes,index,conversion,value,isLittleEndian){var numIndex=+index,intIndex=toInteger(numIndex);if(numIndex!=intIndex||0>intIndex||intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);for(var store=view[$BUFFER]._b,start=intIndex+view[$OFFSET],pack=conversion(+value),i=0;bytes>i;i++)store[start+i]=pack[isLittleEndian?i:bytes-i-1]},validateArrayBufferArguments=function(that,length){anInstance(that,$ArrayBuffer,ARRAY_BUFFER);var numberLength=+length,byteLength=toLength(numberLength);if(numberLength!=byteLength)throw RangeError(WRONG_LENGTH);return byteLength};if($typed.ABV){if(!fails(function(){new $ArrayBuffer})||!fails(function(){new $ArrayBuffer(.5)})){$ArrayBuffer=function(length){return new BaseBuffer(validateArrayBufferArguments(this,length))};for(var key,ArrayBufferProto=$ArrayBuffer[PROTOTYPE]=BaseBuffer[PROTOTYPE],keys=gOPN(BaseBuffer),j=0;keys.length>j;)(key=keys[j++])in $ArrayBuffer||hide($ArrayBuffer,key,BaseBuffer[key]);LIBRARY||(ArrayBufferProto.constructor=$ArrayBuffer)}var view=new $DataView(new $ArrayBuffer(2)),$setInt8=$DataView[PROTOTYPE].setInt8;view.setInt8(0,2147483648),view.setInt8(1,2147483649),!view.getInt8(0)&&view.getInt8(1)||redefineAll($DataView[PROTOTYPE],{setInt8:function(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24)},setUint8:function(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24)}},!0)}else $ArrayBuffer=function(length){var byteLength=validateArrayBufferArguments(this,length);this._b=arrayFill.call(Array(byteLength),0),this[$LENGTH]=byteLength},$DataView=function(buffer,byteOffset,byteLength){anInstance(this,$DataView,DATA_VIEW),anInstance(buffer,$ArrayBuffer,DATA_VIEW);var bufferLength=buffer[$LENGTH],offset=toInteger(byteOffset);if(0>offset||offset>bufferLength)throw RangeError("Wrong offset!");if(byteLength=void 0===byteLength?bufferLength-offset:toLength(byteLength),offset+byteLength>bufferLength)throw RangeError(WRONG_LENGTH);this[$BUFFER]=buffer,this[$OFFSET]=offset,this[$LENGTH]=byteLength},DESCRIPTORS&&(addGetter($ArrayBuffer,BYTE_LENGTH,"_l"),addGetter($DataView,BUFFER,"_b"),addGetter($DataView,BYTE_LENGTH,"_l"),addGetter($DataView,BYTE_OFFSET,"_o")),redefineAll($DataView[PROTOTYPE],{getInt8:function(byteOffset){return get(this,1,byteOffset)[0]<<24>>24},getUint8:function(byteOffset){return get(this,1,byteOffset)[0]},getInt16:function(byteOffset){var bytes=get(this,2,byteOffset,arguments[1]);return(bytes[1]<<8|bytes[0])<<16>>16},getUint16:function(byteOffset){var bytes=get(this,2,byteOffset,arguments[1]);return bytes[1]<<8|bytes[0]},getInt32:function(byteOffset){return unpackI32(get(this,4,byteOffset,arguments[1]))},getUint32:function(byteOffset){return unpackI32(get(this,4,byteOffset,arguments[1]))>>>0},getFloat32:function(byteOffset){return unpackIEEE754(get(this,4,byteOffset,arguments[1]),23,4)},getFloat64:function(byteOffset){return unpackIEEE754(get(this,8,byteOffset,arguments[1]),52,8)},setInt8:function(byteOffset,value){set(this,1,byteOffset,packI8,value)},setUint8:function(byteOffset,value){set(this,1,byteOffset,packI8,value)},setInt16:function(byteOffset,value){set(this,2,byteOffset,packI16,value,arguments[2])},setUint16:function(byteOffset,value){set(this,2,byteOffset,packI16,value,arguments[2])},setInt32:function(byteOffset,value){set(this,4,byteOffset,packI32,value,arguments[2])},setUint32:function(byteOffset,value){set(this,4,byteOffset,packI32,value,arguments[2])},setFloat32:function(byteOffset,value){set(this,4,byteOffset,packF32,value,arguments[2])},setFloat64:function(byteOffset,value){set(this,8,byteOffset,packF64,value,arguments[2])}});setToStringTag($ArrayBuffer,ARRAY_BUFFER),setToStringTag($DataView,DATA_VIEW),hide($DataView[PROTOTYPE],$typed.VIEW,!0),exports[ARRAY_BUFFER]=$ArrayBuffer,exports[DATA_VIEW]=$DataView},{"./_an-instance":15,"./_array-fill":18,"./_descriptors":35,"./_fails":41,"./_global":45,"./_hide":47,"./_library":65,"./_object-dp":74,"./_object-gopn":79,"./_redefine-all":93,"./_set-to-string-tag":99,"./_to-integer":113,"./_to-length":115,"./_typed":120}],120:[function(require,module,exports){for(var Typed,global=require("./_global"),hide=require("./_hide"),uid=require("./_uid"),TYPED=uid("typed_array"),VIEW=uid("view"),ABV=!(!global.ArrayBuffer||!global.DataView),CONSTR=ABV,i=0,l=9,TypedArrayConstructors="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l>i;)(Typed=global[TypedArrayConstructors[i++]])?(hide(Typed.prototype,TYPED,!0),hide(Typed.prototype,VIEW,!0)):CONSTR=!1;module.exports={ABV:ABV,CONSTR:CONSTR,TYPED:TYPED,VIEW:VIEW}},{"./_global":45,"./_hide":47,"./_uid":121}],121:[function(require,module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(void 0===key?"":key,")_",(++id+px).toString(36))}},{}],122:[function(require,module,exports){var store=require("./_shared")("wks"),uid=require("./_uid"),Symbol=require("./_global").Symbol,USE_SYMBOL="function"==typeof Symbol;module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))}},{"./_global":45,"./_shared":101,"./_uid":121}],123:[function(require,module,exports){var classof=require("./_classof"),ITERATOR=require("./_wks")("iterator"),Iterators=require("./_iterators");module.exports=require("./_core").getIteratorMethod=function(it){return void 0!=it?it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]:void 0}},{"./_classof":25,"./_core":31,"./_iterators":63,"./_wks":122}],124:[function(require,module,exports){var classof=require("./_classof"),ITERATOR=require("./_wks")("iterator"),Iterators=require("./_iterators");module.exports=require("./_core").isIterable=function(it){var O=Object(it);return void 0!==O[ITERATOR]||"@@iterator"in O||Iterators.hasOwnProperty(classof(O))}},{"./_classof":25,"./_core":31,"./_iterators":63,"./_wks":122}],125:[function(require,module,exports){var $export=require("./_export"),$re=require("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");$export($export.S,"RegExp",{escape:function(it){return $re(it)}})},{"./_export":39,"./_replacer":95}],126:[function(require,module,exports){var $export=require("./_export");$export($export.P,"Array",{copyWithin:require("./_array-copy-within")}),require("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":14,"./_array-copy-within":17,"./_export":39}],127:[function(require,module,exports){"use strict";var $export=require("./_export"),$every=require("./_array-methods")(4);$export($export.P+$export.F*!require("./_strict-method")([].every,!0),"Array",{every:function(callbackfn){return $every(this,callbackfn,arguments[1]);
}})},{"./_array-methods":21,"./_export":39,"./_strict-method":103}],128:[function(require,module,exports){var $export=require("./_export");$export($export.P,"Array",{fill:require("./_array-fill")}),require("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":14,"./_array-fill":18,"./_export":39}],129:[function(require,module,exports){"use strict";var $export=require("./_export"),$filter=require("./_array-methods")(2);$export($export.P+$export.F*!require("./_strict-method")([].filter,!0),"Array",{filter:function(callbackfn){return $filter(this,callbackfn,arguments[1])}})},{"./_array-methods":21,"./_export":39,"./_strict-method":103}],130:[function(require,module,exports){"use strict";var $export=require("./_export"),$find=require("./_array-methods")(6),KEY="findIndex",forced=!0;KEY in[]&&Array(1)[KEY](function(){forced=!1}),$export($export.P+$export.F*forced,"Array",{findIndex:function(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:void 0)}}),require("./_add-to-unscopables")(KEY)},{"./_add-to-unscopables":14,"./_array-methods":21,"./_export":39}],131:[function(require,module,exports){"use strict";var $export=require("./_export"),$find=require("./_array-methods")(5),KEY="find",forced=!0;KEY in[]&&Array(1)[KEY](function(){forced=!1}),$export($export.P+$export.F*forced,"Array",{find:function(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:void 0)}}),require("./_add-to-unscopables")(KEY)},{"./_add-to-unscopables":14,"./_array-methods":21,"./_export":39}],132:[function(require,module,exports){"use strict";var $export=require("./_export"),$forEach=require("./_array-methods")(0),STRICT=require("./_strict-method")([].forEach,!0);$export($export.P+$export.F*!STRICT,"Array",{forEach:function(callbackfn){return $forEach(this,callbackfn,arguments[1])}})},{"./_array-methods":21,"./_export":39,"./_strict-method":103}],133:[function(require,module,exports){"use strict";var ctx=require("./_ctx"),$export=require("./_export"),toObject=require("./_to-object"),call=require("./_iter-call"),isArrayIter=require("./_is-array-iter"),toLength=require("./_to-length"),getIterFn=require("./core.get-iterator-method");$export($export.S+$export.F*!require("./_iter-detect")(function(iter){Array.from(iter)}),"Array",{from:function(arrayLike){var length,result,step,iterator,O=toObject(arrayLike),C="function"==typeof this?this:Array,aLen=arguments.length,mapfn=aLen>1?arguments[1]:void 0,mapping=void 0!==mapfn,index=0,iterFn=getIterFn(O);if(mapping&&(mapfn=ctx(mapfn,aLen>2?arguments[2]:void 0,2)),void 0==iterFn||C==Array&&isArrayIter(iterFn))for(length=toLength(O.length),result=new C(length);length>index;index++)result[index]=mapping?mapfn(O[index],index):O[index];else for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++)result[index]=mapping?call(iterator,mapfn,[step.value,index],!0):step.value;return result.length=index,result}})},{"./_ctx":32,"./_export":39,"./_is-array-iter":53,"./_iter-call":58,"./_iter-detect":61,"./_to-length":115,"./_to-object":116,"./core.get-iterator-method":123}],134:[function(require,module,exports){"use strict";var $export=require("./_export"),$indexOf=require("./_array-includes")(!1);$export($export.P+$export.F*!require("./_strict-method")([].indexOf),"Array",{indexOf:function(searchElement){return $indexOf(this,searchElement,arguments[1])}})},{"./_array-includes":20,"./_export":39,"./_strict-method":103}],135:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Array",{isArray:require("./_is-array")})},{"./_export":39,"./_is-array":54}],136:[function(require,module,exports){"use strict";var addToUnscopables=require("./_add-to-unscopables"),step=require("./_iter-step"),Iterators=require("./_iterators"),toIObject=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",function(iterated,kind){this._t=toIObject(iterated),this._i=0,this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;return!O||index>=O.length?(this._t=void 0,step(1)):"keys"==kind?step(0,index):"values"==kind?step(0,O[index]):step(0,[index,O[index]])},"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},{"./_add-to-unscopables":14,"./_iter-define":60,"./_iter-step":62,"./_iterators":63,"./_to-iobject":114}],137:[function(require,module,exports){"use strict";var $export=require("./_export"),toIObject=require("./_to-iobject"),arrayJoin=[].join;$export($export.P+$export.F*(require("./_iobject")!=Object||!require("./_strict-method")(arrayJoin)),"Array",{join:function(separator){return arrayJoin.call(toIObject(this),void 0===separator?",":separator)}})},{"./_export":39,"./_iobject":52,"./_strict-method":103,"./_to-iobject":114}],138:[function(require,module,exports){"use strict";var $export=require("./_export"),toIObject=require("./_to-iobject"),toInteger=require("./_to-integer"),toLength=require("./_to-length");$export($export.P+$export.F*!require("./_strict-method")([].lastIndexOf),"Array",{lastIndexOf:function(searchElement){var O=toIObject(this),length=toLength(O.length),index=length-1;for(arguments.length>1&&(index=Math.min(index,toInteger(arguments[1]))),0>index&&(index=length+index);index>=0;index--)if(index in O&&O[index]===searchElement)return index;return-1}})},{"./_export":39,"./_strict-method":103,"./_to-integer":113,"./_to-iobject":114,"./_to-length":115}],139:[function(require,module,exports){"use strict";var $export=require("./_export"),$map=require("./_array-methods")(1);$export($export.P+$export.F*!require("./_strict-method")([].map,!0),"Array",{map:function(callbackfn){return $map(this,callbackfn,arguments[1])}})},{"./_array-methods":21,"./_export":39,"./_strict-method":103}],140:[function(require,module,exports){"use strict";var $export=require("./_export");$export($export.S+$export.F*require("./_fails")(function(){function F(){}return!(Array.of.call(F)instanceof F)}),"Array",{of:function(){for(var index=0,aLen=arguments.length,result=new("function"==typeof this?this:Array)(aLen);aLen>index;)result[index]=arguments[index++];return result.length=aLen,result}})},{"./_export":39,"./_fails":41}],141:[function(require,module,exports){"use strict";var $export=require("./_export"),$reduce=require("./_array-reduce");$export($export.P+$export.F*!require("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments[1],!0)}})},{"./_array-reduce":22,"./_export":39,"./_strict-method":103}],142:[function(require,module,exports){"use strict";var $export=require("./_export"),$reduce=require("./_array-reduce");$export($export.P+$export.F*!require("./_strict-method")([].reduce,!0),"Array",{reduce:function(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments[1],!1)}})},{"./_array-reduce":22,"./_export":39,"./_strict-method":103}],143:[function(require,module,exports){"use strict";var $export=require("./_export"),html=require("./_html"),cof=require("./_cof"),toIndex=require("./_to-index"),toLength=require("./_to-length"),arraySlice=[].slice;$export($export.P+$export.F*require("./_fails")(function(){html&&arraySlice.call(html)}),"Array",{slice:function(begin,end){var len=toLength(this.length),klass=cof(this);if(end=void 0===end?len:end,"Array"==klass)return arraySlice.call(this,begin,end);for(var start=toIndex(begin,len),upTo=toIndex(end,len),size=toLength(upTo-start),cloned=Array(size),i=0;size>i;i++)cloned[i]="String"==klass?this.charAt(start+i):this[start+i];return cloned}})},{"./_cof":26,"./_export":39,"./_fails":41,"./_html":48,"./_to-index":112,"./_to-length":115}],144:[function(require,module,exports){"use strict";var $export=require("./_export"),$some=require("./_array-methods")(3);$export($export.P+$export.F*!require("./_strict-method")([].some,!0),"Array",{some:function(callbackfn){return $some(this,callbackfn,arguments[1])}})},{"./_array-methods":21,"./_export":39,"./_strict-method":103}],145:[function(require,module,exports){"use strict";var $export=require("./_export"),aFunction=require("./_a-function"),toObject=require("./_to-object"),fails=require("./_fails"),$sort=[].sort,test=[1,2,3];$export($export.P+$export.F*(fails(function(){test.sort(void 0)})||!fails(function(){test.sort(null)})||!require("./_strict-method")($sort)),"Array",{sort:function(comparefn){return void 0===comparefn?$sort.call(toObject(this)):$sort.call(toObject(this),aFunction(comparefn))}})},{"./_a-function":12,"./_export":39,"./_fails":41,"./_strict-method":103,"./_to-object":116}],146:[function(require,module,exports){require("./_set-species")("Array")},{"./_set-species":98}],147:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":39}],148:[function(require,module,exports){"use strict";var $export=require("./_export"),fails=require("./_fails"),getTime=Date.prototype.getTime,lz=function(num){return num>9?num:"0"+num};$export($export.P+$export.F*(fails(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!fails(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(getTime.call(this)))throw RangeError("Invalid time value");var d=this,y=d.getUTCFullYear(),m=d.getUTCMilliseconds(),s=0>y?"-":y>9999?"+":"";return s+("00000"+Math.abs(y)).slice(s?-6:-4)+"-"+lz(d.getUTCMonth()+1)+"-"+lz(d.getUTCDate())+"T"+lz(d.getUTCHours())+":"+lz(d.getUTCMinutes())+":"+lz(d.getUTCSeconds())+"."+(m>99?m:"0"+lz(m))+"Z"}})},{"./_export":39,"./_fails":41}],149:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),toPrimitive=require("./_to-primitive");$export($export.P+$export.F*require("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(key){var O=toObject(this),pv=toPrimitive(O);return"number"!=typeof pv||isFinite(pv)?O.toISOString():null}})},{"./_export":39,"./_fails":41,"./_to-object":116,"./_to-primitive":117}],150:[function(require,module,exports){var TO_PRIMITIVE=require("./_wks")("toPrimitive"),proto=Date.prototype;TO_PRIMITIVE in proto||require("./_hide")(proto,TO_PRIMITIVE,require("./_date-to-primitive"))},{"./_date-to-primitive":33,"./_hide":47,"./_wks":122}],151:[function(require,module,exports){var DateProto=Date.prototype,INVALID_DATE="Invalid Date",TO_STRING="toString",$toString=DateProto[TO_STRING],getTime=DateProto.getTime;new Date(NaN)+""!=INVALID_DATE&&require("./_redefine")(DateProto,TO_STRING,function(){var value=getTime.call(this);return value===value?$toString.call(this):INVALID_DATE})},{"./_redefine":94}],152:[function(require,module,exports){var $export=require("./_export");$export($export.P,"Function",{bind:require("./_bind")})},{"./_bind":24,"./_export":39}],153:[function(require,module,exports){"use strict";var isObject=require("./_is-object"),getPrototypeOf=require("./_object-gpo"),HAS_INSTANCE=require("./_wks")("hasInstance"),FunctionProto=Function.prototype;HAS_INSTANCE in FunctionProto||require("./_object-dp").f(FunctionProto,HAS_INSTANCE,{value:function(O){if("function"!=typeof this||!isObject(O))return!1;if(!isObject(this.prototype))return O instanceof this;for(;O=getPrototypeOf(O);)if(this.prototype===O)return!0;return!1}})},{"./_is-object":56,"./_object-dp":74,"./_object-gpo":81,"./_wks":122}],154:[function(require,module,exports){var dP=require("./_object-dp").f,createDesc=require("./_property-desc"),has=require("./_has"),FProto=Function.prototype,nameRE=/^\s*function ([^ (]*)/,NAME="name";NAME in FProto||require("./_descriptors")&&dP(FProto,NAME,{configurable:!0,get:function(){var match=(""+this).match(nameRE),name=match?match[1]:"";return has(this,NAME)||dP(this,NAME,createDesc(5,name)),name}})},{"./_descriptors":35,"./_has":46,"./_object-dp":74,"./_property-desc":92}],155:[function(require,module,exports){"use strict";var strong=require("./_collection-strong");module.exports=require("./_collection")("Map",function(get){return function(){return get(this,arguments.length>0?arguments[0]:void 0)}},{get:function(key){var entry=strong.getEntry(this,key);return entry&&entry.v},set:function(key,value){return strong.def(this,0===key?0:key,value)}},strong,!0)},{"./_collection":30,"./_collection-strong":27}],156:[function(require,module,exports){var $export=require("./_export"),log1p=require("./_math-log1p"),sqrt=Math.sqrt,$acosh=Math.acosh;$export($export.S+$export.F*!($acosh&&710==Math.floor($acosh(Number.MAX_VALUE))),"Math",{acosh:function(x){return(x=+x)<1?NaN:x>94906265.62425156?Math.log(x)+Math.LN2:log1p(x-1+sqrt(x-1)*sqrt(x+1))}})},{"./_export":39,"./_math-log1p":67}],157:[function(require,module,exports){function asinh(x){return isFinite(x=+x)&&0!=x?0>x?-asinh(-x):Math.log(x+Math.sqrt(x*x+1)):x}var $export=require("./_export");$export($export.S,"Math",{asinh:asinh})},{"./_export":39}],158:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{atanh:function(x){return 0==(x=+x)?x:Math.log((1+x)/(1-x))/2}})},{"./_export":39}],159:[function(require,module,exports){var $export=require("./_export"),sign=require("./_math-sign");$export($export.S,"Math",{cbrt:function(x){return sign(x=+x)*Math.pow(Math.abs(x),1/3)}})},{"./_export":39,"./_math-sign":68}],160:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{clz32:function(x){return(x>>>=0)?31-Math.floor(Math.log(x+.5)*Math.LOG2E):32}})},{"./_export":39}],161:[function(require,module,exports){var $export=require("./_export"),exp=Math.exp;$export($export.S,"Math",{cosh:function(x){return(exp(x=+x)+exp(-x))/2}})},{"./_export":39}],162:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{expm1:require("./_math-expm1")})},{"./_export":39,"./_math-expm1":66}],163:[function(require,module,exports){var $export=require("./_export"),sign=require("./_math-sign"),pow=Math.pow,EPSILON=pow(2,-52),EPSILON32=pow(2,-23),MAX32=pow(2,127)*(2-EPSILON32),MIN32=pow(2,-126),roundTiesToEven=function(n){return n+1/EPSILON-1/EPSILON};$export($export.S,"Math",{fround:function(x){var a,result,$abs=Math.abs(x),$sign=sign(x);return MIN32>$abs?$sign*roundTiesToEven($abs/MIN32/EPSILON32)*MIN32*EPSILON32:(a=(1+EPSILON32/EPSILON)*$abs,result=a-(a-$abs),result>MAX32||result!=result?$sign*(1/0):$sign*result)}})},{"./_export":39,"./_math-sign":68}],164:[function(require,module,exports){var $export=require("./_export"),abs=Math.abs;$export($export.S,"Math",{hypot:function(value1,value2){for(var arg,div,sum=0,i=0,aLen=arguments.length,larg=0;aLen>i;)arg=abs(arguments[i++]),arg>larg?(div=larg/arg,sum=sum*div*div+1,larg=arg):arg>0?(div=arg/larg,sum+=div*div):sum+=arg;return larg===1/0?1/0:larg*Math.sqrt(sum)}})},{"./_export":39}],165:[function(require,module,exports){var $export=require("./_export"),$imul=Math.imul;$export($export.S+$export.F*require("./_fails")(function(){return-5!=$imul(4294967295,5)||2!=$imul.length}),"Math",{imul:function(x,y){var UINT16=65535,xn=+x,yn=+y,xl=UINT16&xn,yl=UINT16&yn;return 0|xl*yl+((UINT16&xn>>>16)*yl+xl*(UINT16&yn>>>16)<<16>>>0)}})},{"./_export":39,"./_fails":41}],166:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{log10:function(x){return Math.log(x)/Math.LN10}})},{"./_export":39}],167:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{log1p:require("./_math-log1p")})},{"./_export":39,"./_math-log1p":67}],168:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{log2:function(x){return Math.log(x)/Math.LN2}})},{"./_export":39}],169:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{sign:require("./_math-sign")})},{"./_export":39,"./_math-sign":68}],170:[function(require,module,exports){var $export=require("./_export"),expm1=require("./_math-expm1"),exp=Math.exp;$export($export.S+$export.F*require("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(x){return Math.abs(x=+x)<1?(expm1(x)-expm1(-x))/2:(exp(x-1)-exp(-x-1))*(Math.E/2)}})},{"./_export":39,"./_fails":41,"./_math-expm1":66}],171:[function(require,module,exports){var $export=require("./_export"),expm1=require("./_math-expm1"),exp=Math.exp;$export($export.S,"Math",{tanh:function(x){var a=expm1(x=+x),b=expm1(-x);return a==1/0?1:b==1/0?-1:(a-b)/(exp(x)+exp(-x))}})},{"./_export":39,"./_math-expm1":66}],172:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{trunc:function(it){return(it>0?Math.floor:Math.ceil)(it)}})},{"./_export":39}],173:[function(require,module,exports){"use strict";var global=require("./_global"),has=require("./_has"),cof=require("./_cof"),inheritIfRequired=require("./_inherit-if-required"),toPrimitive=require("./_to-primitive"),fails=require("./_fails"),gOPN=require("./_object-gopn").f,gOPD=require("./_object-gopd").f,dP=require("./_object-dp").f,$trim=require("./_string-trim").trim,NUMBER="Number",$Number=global[NUMBER],Base=$Number,proto=$Number.prototype,BROKEN_COF=cof(require("./_object-create")(proto))==NUMBER,TRIM="trim"in String.prototype,toNumber=function(argument){var it=toPrimitive(argument,!1);if("string"==typeof it&&it.length>2){it=TRIM?it.trim():$trim(it,3);var third,radix,maxCode,first=it.charCodeAt(0);if(43===first||45===first){if(third=it.charCodeAt(2),88===third||120===third)return NaN}else if(48===first){switch(it.charCodeAt(1)){case 66:case 98:radix=2,maxCode=49;break;case 79:case 111:radix=8,maxCode=55;break;default:return+it}for(var code,digits=it.slice(2),i=0,l=digits.length;l>i;i++)if(code=digits.charCodeAt(i),48>code||code>maxCode)return NaN;return parseInt(digits,radix)}}return+it};if(!$Number(" 0o1")||!$Number("0b1")||$Number("+0x1")){$Number=function(value){var it=arguments.length<1?0:value,that=this;return that instanceof $Number&&(BROKEN_COF?fails(function(){proto.valueOf.call(that)}):cof(that)!=NUMBER)?inheritIfRequired(new Base(toNumber(it)),that,$Number):toNumber(it)};for(var key,keys=require("./_descriptors")?gOPN(Base):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;keys.length>j;j++)has(Base,key=keys[j])&&!has($Number,key)&&dP($Number,key,gOPD(Base,key));$Number.prototype=proto,proto.constructor=$Number,require("./_redefine")(global,NUMBER,$Number)}},{"./_cof":26,"./_descriptors":35,"./_fails":41,"./_global":45,"./_has":46,"./_inherit-if-required":50,"./_object-create":73,"./_object-dp":74,"./_object-gopd":77,"./_object-gopn":79,"./_redefine":94,"./_string-trim":109,"./_to-primitive":117}],174:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":39}],175:[function(require,module,exports){var $export=require("./_export"),_isFinite=require("./_global").isFinite;$export($export.S,"Number",{isFinite:function(it){return"number"==typeof it&&_isFinite(it)}})},{"./_export":39,"./_global":45}],176:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{isInteger:require("./_is-integer")})},{"./_export":39,"./_is-integer":55}],177:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{isNaN:function(number){return number!=number}})},{"./_export":39}],178:[function(require,module,exports){var $export=require("./_export"),isInteger=require("./_is-integer"),abs=Math.abs;$export($export.S,"Number",{isSafeInteger:function(number){return isInteger(number)&&abs(number)<=9007199254740991}})},{"./_export":39,"./_is-integer":55}],179:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":39}],180:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":39}],181:[function(require,module,exports){var $export=require("./_export"),$parseFloat=require("./_parse-float");$export($export.S+$export.F*(Number.parseFloat!=$parseFloat),"Number",{parseFloat:$parseFloat})},{"./_export":39,"./_parse-float":88}],182:[function(require,module,exports){var $export=require("./_export"),$parseInt=require("./_parse-int");$export($export.S+$export.F*(Number.parseInt!=$parseInt),"Number",{parseInt:$parseInt})},{"./_export":39,"./_parse-int":89}],183:[function(require,module,exports){"use strict";var $export=require("./_export"),toInteger=(require("./_an-instance"),require("./_to-integer")),aNumberValue=require("./_a-number-value"),repeat=require("./_string-repeat"),$toFixed=1..toFixed,floor=Math.floor,data=[0,0,0,0,0,0],ERROR="Number.toFixed: incorrect invocation!",ZERO="0",multiply=function(n,c){for(var i=-1,c2=c;++i<6;)c2+=n*data[i],data[i]=c2%1e7,c2=floor(c2/1e7)},divide=function(n){for(var i=6,c=0;--i>=0;)c+=data[i],data[i]=floor(c/n),c=c%n*1e7},numToString=function(){for(var i=6,s="";--i>=0;)if(""!==s||0===i||0!==data[i]){var t=String(data[i]);s=""===s?t:s+repeat.call(ZERO,7-t.length)+t}return s},pow=function(x,n,acc){return 0===n?acc:n%2===1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)},log=function(x){for(var n=0,x2=x;x2>=4096;)n+=12,x2/=4096;for(;x2>=2;)n+=1,x2/=2;return n};$export($export.P+$export.F*(!!$toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0))||!require("./_fails")(function(){$toFixed.call({})})),"Number",{toFixed:function(fractionDigits){var e,z,j,k,x=aNumberValue(this,ERROR),f=toInteger(fractionDigits),s="",m=ZERO;if(0>f||f>20)throw RangeError(ERROR);if(x!=x)return"NaN";if(-1e21>=x||x>=1e21)return String(x);if(0>x&&(s="-",x=-x),x>1e-21)if(e=log(x*pow(2,69,1))-69,z=0>e?x*pow(2,-e,1):x/pow(2,e,1),z*=4503599627370496,e=52-e,e>0){for(multiply(0,z),j=f;j>=7;)multiply(1e7,0),j-=7;for(multiply(pow(10,j,1),0),j=e-1;j>=23;)divide(1<<23),j-=23;divide(1<<j),multiply(1,1),divide(2),m=numToString()}else multiply(0,z),multiply(1<<-e,0),m=numToString()+repeat.call(ZERO,f);return f>0?(k=m.length,m=s+(f>=k?"0."+repeat.call(ZERO,f-k)+m:m.slice(0,k-f)+"."+m.slice(k-f))):m=s+m,m}})},{"./_a-number-value":13,"./_an-instance":15,"./_export":39,"./_fails":41,"./_string-repeat":108,"./_to-integer":113}],184:[function(require,module,exports){"use strict";var $export=require("./_export"),$fails=require("./_fails"),aNumberValue=require("./_a-number-value"),$toPrecision=1..toPrecision;$export($export.P+$export.F*($fails(function(){return"1"!==$toPrecision.call(1,void 0)})||!$fails(function(){$toPrecision.call({})})),"Number",{toPrecision:function(precision){var that=aNumberValue(this,"Number#toPrecision: incorrect invocation!");return void 0===precision?$toPrecision.call(that):$toPrecision.call(that,precision)}})},{"./_a-number-value":13,"./_export":39,"./_fails":41}],185:[function(require,module,exports){var $export=require("./_export");$export($export.S+$export.F,"Object",{assign:require("./_object-assign")})},{"./_export":39,"./_object-assign":72}],186:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Object",{create:require("./_object-create")})},{"./_export":39,"./_object-create":73}],187:[function(require,module,exports){var $export=require("./_export");$export($export.S+$export.F*!require("./_descriptors"),"Object",{defineProperties:require("./_object-dps")})},{"./_descriptors":35,"./_export":39,"./_object-dps":75}],188:[function(require,module,exports){var $export=require("./_export");$export($export.S+$export.F*!require("./_descriptors"),"Object",{defineProperty:require("./_object-dp").f})},{"./_descriptors":35,"./_export":39,"./_object-dp":74}],189:[function(require,module,exports){var isObject=require("./_is-object"),meta=require("./_meta").onFreeze;require("./_object-sap")("freeze",function($freeze){return function(it){return $freeze&&isObject(it)?$freeze(meta(it)):it}})},{"./_is-object":56,"./_meta":69,"./_object-sap":85}],190:[function(require,module,exports){var toIObject=require("./_to-iobject"),$getOwnPropertyDescriptor=require("./_object-gopd").f;require("./_object-sap")("getOwnPropertyDescriptor",function(){return function(it,key){return $getOwnPropertyDescriptor(toIObject(it),key)}})},{"./_object-gopd":77,"./_object-sap":85,"./_to-iobject":114}],191:[function(require,module,exports){require("./_object-sap")("getOwnPropertyNames",function(){return require("./_object-gopn-ext").f})},{"./_object-gopn-ext":78,"./_object-sap":85}],192:[function(require,module,exports){var toObject=require("./_to-object"),$getPrototypeOf=require("./_object-gpo");require("./_object-sap")("getPrototypeOf",function(){return function(it){return $getPrototypeOf(toObject(it))}})},{"./_object-gpo":81,"./_object-sap":85,"./_to-object":116}],193:[function(require,module,exports){var isObject=require("./_is-object");require("./_object-sap")("isExtensible",function($isExtensible){return function(it){return isObject(it)?$isExtensible?$isExtensible(it):!0:!1}})},{"./_is-object":56,"./_object-sap":85}],194:[function(require,module,exports){var isObject=require("./_is-object");require("./_object-sap")("isFrozen",function($isFrozen){return function(it){return isObject(it)?$isFrozen?$isFrozen(it):!1:!0}})},{"./_is-object":56,"./_object-sap":85}],195:[function(require,module,exports){var isObject=require("./_is-object");require("./_object-sap")("isSealed",function($isSealed){return function(it){return isObject(it)?$isSealed?$isSealed(it):!1:!0}})},{"./_is-object":56,"./_object-sap":85}],196:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Object",{is:require("./_same-value")})},{"./_export":39,"./_same-value":96}],197:[function(require,module,exports){var toObject=require("./_to-object"),$keys=require("./_object-keys");require("./_object-sap")("keys",function(){return function(it){return $keys(toObject(it))}})},{"./_object-keys":83,"./_object-sap":85,"./_to-object":116}],198:[function(require,module,exports){var isObject=require("./_is-object"),meta=require("./_meta").onFreeze;require("./_object-sap")("preventExtensions",function($preventExtensions){return function(it){return $preventExtensions&&isObject(it)?$preventExtensions(meta(it)):it}})},{"./_is-object":56,"./_meta":69,"./_object-sap":85}],199:[function(require,module,exports){var isObject=require("./_is-object"),meta=require("./_meta").onFreeze;require("./_object-sap")("seal",function($seal){return function(it){return $seal&&isObject(it)?$seal(meta(it)):it}})},{"./_is-object":56,"./_meta":69,"./_object-sap":85}],200:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Object",{setPrototypeOf:require("./_set-proto").set})},{"./_export":39,"./_set-proto":97}],201:[function(require,module,exports){"use strict";var classof=require("./_classof"),test={};test[require("./_wks")("toStringTag")]="z",test+""!="[object z]"&&require("./_redefine")(Object.prototype,"toString",function(){return"[object "+classof(this)+"]"},!0)},{"./_classof":25,"./_redefine":94,"./_wks":122}],202:[function(require,module,exports){var $export=require("./_export"),$parseFloat=require("./_parse-float");$export($export.G+$export.F*(parseFloat!=$parseFloat),{parseFloat:$parseFloat})},{"./_export":39,"./_parse-float":88}],203:[function(require,module,exports){var $export=require("./_export"),$parseInt=require("./_parse-int");$export($export.G+$export.F*(parseInt!=$parseInt),{parseInt:$parseInt})},{"./_export":39,"./_parse-int":89}],204:[function(require,module,exports){"use strict";var Internal,GenericPromiseCapability,Wrapper,LIBRARY=require("./_library"),global=require("./_global"),ctx=require("./_ctx"),classof=require("./_classof"),$export=require("./_export"),isObject=require("./_is-object"),aFunction=(require("./_an-object"),require("./_a-function")),anInstance=require("./_an-instance"),forOf=require("./_for-of"),speciesConstructor=(require("./_set-proto").set,require("./_species-constructor")),task=require("./_task").set,microtask=require("./_microtask"),PROMISE="Promise",TypeError=global.TypeError,process=global.process,$Promise=global[PROMISE],process=global.process,isNode="process"==classof(process),empty=function(){},USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1),FakePromise=(promise.constructor={})[require("./_wks")("species")]=function(exec){exec(empty,empty)};return(isNode||"function"==typeof PromiseRejectionEvent)&&promise.then(empty)instanceof FakePromise}catch(e){}}(),sameConstructor=function(a,b){return a===b||a===$Promise&&b===Wrapper},isThenable=function(it){var then;return isObject(it)&&"function"==typeof(then=it.then)?then:!1},newPromiseCapability=function(C){return sameConstructor($Promise,C)?new PromiseCapability(C):new GenericPromiseCapability(C)},PromiseCapability=GenericPromiseCapability=function(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject}),this.resolve=aFunction(resolve),this.reject=aFunction(reject)},perform=function(exec){try{exec()}catch(e){return{error:e}}},notify=function(promise,isReject){if(!promise._n){promise._n=!0;var chain=promise._c;microtask(function(){for(var value=promise._v,ok=1==promise._s,i=0,run=function(reaction){var result,then,handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2==promise._h&&onHandleUnhandled(promise),promise._h=1),handler===!0?result=value:(domain&&domain.enter(),result=handler(value),domain&&domain.exit()),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(e){reject(e)}};chain.length>i;)run(chain[i++]);promise._c=[],promise._n=!1,isReject&&!promise._h&&onUnhandled(promise)})}},onUnhandled=function(promise){task.call(global,function(){var abrupt,handler,console,value=promise._v;if(isUnhandled(promise)&&(abrupt=perform(function(){isNode?process.emit("unhandledRejection",value,promise):(handler=global.onunhandledrejection)?handler({promise:promise,reason:value}):(console=global.console)&&console.error&&console.error("Unhandled promise rejection",value)}),promise._h=isNode||isUnhandled(promise)?2:1),promise._a=void 0,abrupt)throw abrupt.error})},isUnhandled=function(promise){if(1==promise._h)return!1;for(var reaction,chain=promise._a||promise._c,i=0;chain.length>i;)if(reaction=chain[i++],reaction.fail||!isUnhandled(reaction.promise))return!1;return!0},onHandleUnhandled=function(promise){task.call(global,function(){var handler;isNode?process.emit("rejectionHandled",promise):(handler=global.onrejectionhandled)&&handler({promise:promise,reason:promise._v})})},$reject=function(value){var promise=this;promise._d||(promise._d=!0,promise=promise._w||promise,promise._v=value,promise._s=2,promise._a||(promise._a=promise._c.slice()),notify(promise,!0))},$resolve=function(value){var then,promise=this;if(!promise._d){promise._d=!0,promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");(then=isThenable(value))?microtask(function(){var wrapper={_w:promise,_d:!1};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}}):(promise._v=value,promise._s=1,notify(promise,!1))}catch(e){$reject.call({_w:promise,_d:!1},e)}}};USE_NATIVE||($Promise=function(executor){anInstance(this,$Promise,PROMISE,"_h"),aFunction(executor),Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}},Internal=function(executor){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Internal.prototype=require("./_redefine-all")($Promise.prototype,{
then:function(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));return reaction.ok="function"==typeof onFulfilled?onFulfilled:!0,reaction.fail="function"==typeof onRejected&&onRejected,reaction.domain=isNode?process.domain:void 0,this._c.push(reaction),this._a&&this._a.push(reaction),this._s&&notify(this,!1),reaction.promise},catch:function(onRejected){return this.then(void 0,onRejected)}}),PromiseCapability=function(){var promise=new Internal;this.promise=promise,this.resolve=ctx($resolve,promise,1),this.reject=ctx($reject,promise,1)}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise}),require("./_set-to-string-tag")($Promise,PROMISE),require("./_set-species")(PROMISE),Wrapper=require("./_core")[PROMISE],$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function(r){var capability=newPromiseCapability(this),$$reject=capability.reject;return $$reject(r),capability.promise}}),$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),PROMISE,{resolve:function(x){if(x instanceof $Promise&&sameConstructor(x.constructor,this))return x;var capability=newPromiseCapability(this),$$resolve=capability.resolve;return $$resolve(x),capability.promise}}),$export($export.S+$export.F*!(USE_NATIVE&&require("./_iter-detect")(function(iter){$Promise.all(iter).catch(empty)})),PROMISE,{all:function(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,abrupt=perform(function(){var values=[],index=0,remaining=1;forOf(iterable,!1,function(promise){var $index=index++,alreadyCalled=!1;values.push(void 0),remaining++,C.resolve(promise).then(function(value){alreadyCalled||(alreadyCalled=!0,values[$index]=value,--remaining||resolve(values))},reject)}),--remaining||resolve(values)});return abrupt&&reject(abrupt.error),capability.promise},race:function(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,abrupt=perform(function(){forOf(iterable,!1,function(promise){C.resolve(promise).then(capability.resolve,reject)})});return abrupt&&reject(abrupt.error),capability.promise}})},{"./_a-function":12,"./_an-instance":15,"./_an-object":16,"./_classof":25,"./_core":31,"./_ctx":32,"./_export":39,"./_for-of":44,"./_global":45,"./_is-object":56,"./_iter-detect":61,"./_library":65,"./_microtask":71,"./_redefine-all":93,"./_set-proto":97,"./_set-species":98,"./_set-to-string-tag":99,"./_species-constructor":102,"./_task":111,"./_wks":122}],205:[function(require,module,exports){var $export=require("./_export"),_apply=Function.apply;$export($export.S,"Reflect",{apply:function(target,thisArgument,argumentsList){return _apply.call(target,thisArgument,argumentsList)}})},{"./_export":39}],206:[function(require,module,exports){var $export=require("./_export"),create=require("./_object-create"),aFunction=require("./_a-function"),anObject=require("./_an-object"),isObject=require("./_is-object"),bind=require("./_bind");$export($export.S+$export.F*require("./_fails")(function(){function F(){}return!(Reflect.construct(function(){},[],F)instanceof F)}),"Reflect",{construct:function(Target,args){aFunction(Target);var newTarget=arguments.length<3?Target:aFunction(arguments[2]);if(Target==newTarget){if(void 0!=args)switch(anObject(args).length){case 0:return new Target;case 1:return new Target(args[0]);case 2:return new Target(args[0],args[1]);case 3:return new Target(args[0],args[1],args[2]);case 4:return new Target(args[0],args[1],args[2],args[3])}var $args=[null];return $args.push.apply($args,args),new(bind.apply(Target,$args))}var proto=newTarget.prototype,instance=create(isObject(proto)?proto:Object.prototype),result=Function.apply.call(Target,instance,args);return isObject(result)?result:instance}})},{"./_a-function":12,"./_an-object":16,"./_bind":24,"./_export":39,"./_fails":41,"./_is-object":56,"./_object-create":73}],207:[function(require,module,exports){var dP=require("./_object-dp"),$export=require("./_export"),anObject=require("./_an-object"),toPrimitive=require("./_to-primitive");$export($export.S+$export.F*require("./_fails")(function(){Reflect.defineProperty(dP.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(target,propertyKey,attributes){anObject(target),propertyKey=toPrimitive(propertyKey,!0),anObject(attributes);try{return dP.f(target,propertyKey,attributes),!0}catch(e){return!1}}})},{"./_an-object":16,"./_export":39,"./_fails":41,"./_object-dp":74,"./_to-primitive":117}],208:[function(require,module,exports){var $export=require("./_export"),gOPD=require("./_object-gopd").f,anObject=require("./_an-object");$export($export.S,"Reflect",{deleteProperty:function(target,propertyKey){var desc=gOPD(anObject(target),propertyKey);return desc&&!desc.configurable?!1:delete target[propertyKey]}})},{"./_an-object":16,"./_export":39,"./_object-gopd":77}],209:[function(require,module,exports){"use strict";var $export=require("./_export"),anObject=require("./_an-object"),Enumerate=function(iterated){this._t=anObject(iterated),this._i=0;var key,keys=this._k=[];for(key in iterated)keys.push(key)};require("./_iter-create")(Enumerate,"Object",function(){var key,that=this,keys=that._k;do if(that._i>=keys.length)return{value:void 0,done:!0};while(!((key=keys[that._i++])in that._t));return{value:key,done:!1}}),$export($export.S,"Reflect",{enumerate:function(target){return new Enumerate(target)}})},{"./_an-object":16,"./_export":39,"./_iter-create":59}],210:[function(require,module,exports){var gOPD=require("./_object-gopd"),$export=require("./_export"),anObject=require("./_an-object");$export($export.S,"Reflect",{getOwnPropertyDescriptor:function(target,propertyKey){return gOPD.f(anObject(target),propertyKey)}})},{"./_an-object":16,"./_export":39,"./_object-gopd":77}],211:[function(require,module,exports){var $export=require("./_export"),getProto=require("./_object-gpo"),anObject=require("./_an-object");$export($export.S,"Reflect",{getPrototypeOf:function(target){return getProto(anObject(target))}})},{"./_an-object":16,"./_export":39,"./_object-gpo":81}],212:[function(require,module,exports){function get(target,propertyKey){var desc,proto,receiver=arguments.length<3?target:arguments[2];return anObject(target)===receiver?target[propertyKey]:(desc=gOPD.f(target,propertyKey))?has(desc,"value")?desc.value:void 0!==desc.get?desc.get.call(receiver):void 0:isObject(proto=getPrototypeOf(target))?get(proto,propertyKey,receiver):void 0}var gOPD=require("./_object-gopd"),getPrototypeOf=require("./_object-gpo"),has=require("./_has"),$export=require("./_export"),isObject=require("./_is-object"),anObject=require("./_an-object");$export($export.S,"Reflect",{get:get})},{"./_an-object":16,"./_export":39,"./_has":46,"./_is-object":56,"./_object-gopd":77,"./_object-gpo":81}],213:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Reflect",{has:function(target,propertyKey){return propertyKey in target}})},{"./_export":39}],214:[function(require,module,exports){var $export=require("./_export"),anObject=require("./_an-object"),$isExtensible=Object.isExtensible;$export($export.S,"Reflect",{isExtensible:function(target){return anObject(target),$isExtensible?$isExtensible(target):!0}})},{"./_an-object":16,"./_export":39}],215:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Reflect",{ownKeys:require("./_own-keys")})},{"./_export":39,"./_own-keys":87}],216:[function(require,module,exports){var $export=require("./_export"),anObject=require("./_an-object"),$preventExtensions=Object.preventExtensions;$export($export.S,"Reflect",{preventExtensions:function(target){anObject(target);try{return $preventExtensions&&$preventExtensions(target),!0}catch(e){return!1}}})},{"./_an-object":16,"./_export":39}],217:[function(require,module,exports){var $export=require("./_export"),setProto=require("./_set-proto");setProto&&$export($export.S,"Reflect",{setPrototypeOf:function(target,proto){setProto.check(target,proto);try{return setProto.set(target,proto),!0}catch(e){return!1}}})},{"./_export":39,"./_set-proto":97}],218:[function(require,module,exports){function set(target,propertyKey,V){var existingDescriptor,proto,receiver=arguments.length<4?target:arguments[3],ownDesc=gOPD.f(anObject(target),propertyKey);if(!ownDesc){if(isObject(proto=getPrototypeOf(target)))return set(proto,propertyKey,V,receiver);ownDesc=createDesc(0)}return has(ownDesc,"value")?ownDesc.writable!==!1&&isObject(receiver)?(existingDescriptor=gOPD.f(receiver,propertyKey)||createDesc(0),existingDescriptor.value=V,dP.f(receiver,propertyKey,existingDescriptor),!0):!1:void 0===ownDesc.set?!1:(ownDesc.set.call(receiver,V),!0)}var dP=require("./_object-dp"),gOPD=require("./_object-gopd"),getPrototypeOf=require("./_object-gpo"),has=require("./_has"),$export=require("./_export"),createDesc=require("./_property-desc"),anObject=require("./_an-object"),isObject=require("./_is-object");$export($export.S,"Reflect",{set:set})},{"./_an-object":16,"./_export":39,"./_has":46,"./_is-object":56,"./_object-dp":74,"./_object-gopd":77,"./_object-gpo":81,"./_property-desc":92}],219:[function(require,module,exports){var global=require("./_global"),inheritIfRequired=require("./_inherit-if-required"),dP=require("./_object-dp").f,gOPN=require("./_object-gopn").f,isRegExp=require("./_is-regexp"),$flags=require("./_flags"),$RegExp=global.RegExp,Base=$RegExp,proto=$RegExp.prototype,re1=/a/g,re2=/a/g,CORRECT_NEW=new $RegExp(re1)!==re1;if(require("./_descriptors")&&(!CORRECT_NEW||require("./_fails")(function(){return re2[require("./_wks")("match")]=!1,$RegExp(re1)!=re1||$RegExp(re2)==re2||"/a/i"!=$RegExp(re1,"i")}))){$RegExp=function(p,f){var tiRE=this instanceof $RegExp,piRE=isRegExp(p),fiU=void 0===f;return!tiRE&&piRE&&p.constructor===$RegExp&&fiU?p:inheritIfRequired(CORRECT_NEW?new Base(piRE&&!fiU?p.source:p,f):Base((piRE=p instanceof $RegExp)?p.source:p,piRE&&fiU?$flags.call(p):f),tiRE?this:proto,$RegExp)};for(var proxy=(function(key){key in $RegExp||dP($RegExp,key,{configurable:!0,get:function(){return Base[key]},set:function(it){Base[key]=it}})}),keys=gOPN(Base),i=0;keys.length>i;)proxy(keys[i++]);proto.constructor=$RegExp,$RegExp.prototype=proto,require("./_redefine")(global,"RegExp",$RegExp)}require("./_set-species")("RegExp")},{"./_descriptors":35,"./_fails":41,"./_flags":43,"./_global":45,"./_inherit-if-required":50,"./_is-regexp":57,"./_object-dp":74,"./_object-gopn":79,"./_redefine":94,"./_set-species":98,"./_wks":122}],220:[function(require,module,exports){require("./_descriptors")&&"g"!=/./g.flags&&require("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:require("./_flags")})},{"./_descriptors":35,"./_flags":43,"./_object-dp":74}],221:[function(require,module,exports){require("./_fix-re-wks")("match",1,function(defined,MATCH,$match){return[function(regexp){"use strict";var O=defined(this),fn=void 0==regexp?void 0:regexp[MATCH];return void 0!==fn?fn.call(regexp,O):new RegExp(regexp)[MATCH](String(O))},$match]})},{"./_fix-re-wks":42}],222:[function(require,module,exports){require("./_fix-re-wks")("replace",2,function(defined,REPLACE,$replace){return[function(searchValue,replaceValue){"use strict";var O=defined(this),fn=void 0==searchValue?void 0:searchValue[REPLACE];return void 0!==fn?fn.call(searchValue,O,replaceValue):$replace.call(String(O),searchValue,replaceValue)},$replace]})},{"./_fix-re-wks":42}],223:[function(require,module,exports){require("./_fix-re-wks")("search",1,function(defined,SEARCH,$search){return[function(regexp){"use strict";var O=defined(this),fn=void 0==regexp?void 0:regexp[SEARCH];return void 0!==fn?fn.call(regexp,O):new RegExp(regexp)[SEARCH](String(O))},$search]})},{"./_fix-re-wks":42}],224:[function(require,module,exports){require("./_fix-re-wks")("split",2,function(defined,SPLIT,$split){"use strict";var isRegExp=require("./_is-regexp"),_split=$split,$push=[].push,$SPLIT="split",LENGTH="length",LAST_INDEX="lastIndex";if("c"=="abbc"[$SPLIT](/(b)*/)[1]||4!="test"[$SPLIT](/(?:)/,-1)[LENGTH]||2!="ab"[$SPLIT](/(?:ab)*/)[LENGTH]||4!="."[$SPLIT](/(.?)(.?)/)[LENGTH]||"."[$SPLIT](/()()/)[LENGTH]>1||""[$SPLIT](/.?/)[LENGTH]){var NPCG=void 0===/()??/.exec("")[1];$split=function(separator,limit){var string=String(this);if(void 0===separator&&0===limit)return[];if(!isRegExp(separator))return _split.call(string,separator,limit);var separator2,match,lastIndex,lastLength,i,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,splitLimit=void 0===limit?4294967295:limit>>>0,separatorCopy=new RegExp(separator.source,flags+"g");for(NPCG||(separator2=new RegExp("^"+separatorCopy.source+"$(?!\\s)",flags));(match=separatorCopy.exec(string))&&(lastIndex=match.index+match[0][LENGTH],!(lastIndex>lastLastIndex&&(output.push(string.slice(lastLastIndex,match.index)),!NPCG&&match[LENGTH]>1&&match[0].replace(separator2,function(){for(i=1;i<arguments[LENGTH]-2;i++)void 0===arguments[i]&&(match[i]=void 0)}),match[LENGTH]>1&&match.index<string[LENGTH]&&$push.apply(output,match.slice(1)),lastLength=match[0][LENGTH],lastLastIndex=lastIndex,output[LENGTH]>=splitLimit)));)separatorCopy[LAST_INDEX]===match.index&&separatorCopy[LAST_INDEX]++;return lastLastIndex===string[LENGTH]?!lastLength&&separatorCopy.test("")||output.push(""):output.push(string.slice(lastLastIndex)),output[LENGTH]>splitLimit?output.slice(0,splitLimit):output}}else"0"[$SPLIT](void 0,0)[LENGTH]&&($split=function(separator,limit){return void 0===separator&&0===limit?[]:_split.call(this,separator,limit)});return[function(separator,limit){var O=defined(this),fn=void 0==separator?void 0:separator[SPLIT];return void 0!==fn?fn.call(separator,O,limit):$split.call(String(O),separator,limit)},$split]})},{"./_fix-re-wks":42,"./_is-regexp":57}],225:[function(require,module,exports){"use strict";require("./es6.regexp.flags");var anObject=require("./_an-object"),$flags=require("./_flags"),DESCRIPTORS=require("./_descriptors"),TO_STRING="toString",$toString=/./[TO_STRING],define=function(fn){require("./_redefine")(RegExp.prototype,TO_STRING,fn,!0)};require("./_fails")(function(){return"/a/b"!=$toString.call({source:"a",flags:"b"})})?define(function(){var R=anObject(this);return"/".concat(R.source,"/","flags"in R?R.flags:!DESCRIPTORS&&R instanceof RegExp?$flags.call(R):void 0)}):$toString.name!=TO_STRING&&define(function(){return $toString.call(this)})},{"./_an-object":16,"./_descriptors":35,"./_fails":41,"./_flags":43,"./_redefine":94,"./es6.regexp.flags":220}],226:[function(require,module,exports){"use strict";var strong=require("./_collection-strong");module.exports=require("./_collection")("Set",function(get){return function(){return get(this,arguments.length>0?arguments[0]:void 0)}},{add:function(value){return strong.def(this,value=0===value?0:value,value)}},strong)},{"./_collection":30,"./_collection-strong":27}],227:[function(require,module,exports){"use strict";require("./_string-html")("anchor",function(createHTML){return function(name){return createHTML(this,"a","name",name)}})},{"./_string-html":106}],228:[function(require,module,exports){"use strict";require("./_string-html")("big",function(createHTML){return function(){return createHTML(this,"big","","")}})},{"./_string-html":106}],229:[function(require,module,exports){"use strict";require("./_string-html")("blink",function(createHTML){return function(){return createHTML(this,"blink","","")}})},{"./_string-html":106}],230:[function(require,module,exports){"use strict";require("./_string-html")("bold",function(createHTML){return function(){return createHTML(this,"b","","")}})},{"./_string-html":106}],231:[function(require,module,exports){"use strict";var $export=require("./_export"),$at=require("./_string-at")(!1);$export($export.P,"String",{codePointAt:function(pos){return $at(this,pos)}})},{"./_export":39,"./_string-at":104}],232:[function(require,module,exports){"use strict";var $export=require("./_export"),toLength=require("./_to-length"),context=require("./_string-context"),ENDS_WITH="endsWith",$endsWith=""[ENDS_WITH];$export($export.P+$export.F*require("./_fails-is-regexp")(ENDS_WITH),"String",{endsWith:function(searchString){var that=context(this,searchString,ENDS_WITH),endPosition=arguments.length>1?arguments[1]:void 0,len=toLength(that.length),end=void 0===endPosition?len:Math.min(toLength(endPosition),len),search=String(searchString);return $endsWith?$endsWith.call(that,search,end):that.slice(end-search.length,end)===search}})},{"./_export":39,"./_fails-is-regexp":40,"./_string-context":105,"./_to-length":115}],233:[function(require,module,exports){"use strict";require("./_string-html")("fixed",function(createHTML){return function(){return createHTML(this,"tt","","")}})},{"./_string-html":106}],234:[function(require,module,exports){"use strict";require("./_string-html")("fontcolor",function(createHTML){return function(color){return createHTML(this,"font","color",color)}})},{"./_string-html":106}],235:[function(require,module,exports){"use strict";require("./_string-html")("fontsize",function(createHTML){return function(size){return createHTML(this,"font","size",size)}})},{"./_string-html":106}],236:[function(require,module,exports){var $export=require("./_export"),toIndex=require("./_to-index"),fromCharCode=String.fromCharCode,$fromCodePoint=String.fromCodePoint;$export($export.S+$export.F*(!!$fromCodePoint&&1!=$fromCodePoint.length),"String",{fromCodePoint:function(x){for(var code,res=[],aLen=arguments.length,i=0;aLen>i;){if(code=+arguments[i++],toIndex(code,1114111)!==code)throw RangeError(code+" is not a valid code point");res.push(65536>code?fromCharCode(code):fromCharCode(((code-=65536)>>10)+55296,code%1024+56320))}return res.join("")}})},{"./_export":39,"./_to-index":112}],237:[function(require,module,exports){"use strict";var $export=require("./_export"),context=require("./_string-context"),INCLUDES="includes";$export($export.P+$export.F*require("./_fails-is-regexp")(INCLUDES),"String",{includes:function(searchString){return!!~context(this,searchString,INCLUDES).indexOf(searchString,arguments.length>1?arguments[1]:void 0)}})},{"./_export":39,"./_fails-is-regexp":40,"./_string-context":105}],238:[function(require,module,exports){"use strict";require("./_string-html")("italics",function(createHTML){return function(){return createHTML(this,"i","","")}})},{"./_string-html":106}],239:[function(require,module,exports){"use strict";var $at=require("./_string-at")(!0);require("./_iter-define")(String,"String",function(iterated){this._t=String(iterated),this._i=0},function(){var point,O=this._t,index=this._i;return index>=O.length?{value:void 0,done:!0}:(point=$at(O,index),this._i+=point.length,{value:point,done:!1})})},{"./_iter-define":60,"./_string-at":104}],240:[function(require,module,exports){"use strict";require("./_string-html")("link",function(createHTML){return function(url){return createHTML(this,"a","href",url)}})},{"./_string-html":106}],241:[function(require,module,exports){var $export=require("./_export"),toIObject=require("./_to-iobject"),toLength=require("./_to-length");$export($export.S,"String",{raw:function(callSite){for(var tpl=toIObject(callSite.raw),len=toLength(tpl.length),aLen=arguments.length,res=[],i=0;len>i;)res.push(String(tpl[i++])),aLen>i&&res.push(String(arguments[i]));return res.join("")}})},{"./_export":39,"./_to-iobject":114,"./_to-length":115}],242:[function(require,module,exports){var $export=require("./_export");$export($export.P,"String",{repeat:require("./_string-repeat")})},{"./_export":39,"./_string-repeat":108}],243:[function(require,module,exports){"use strict";require("./_string-html")("small",function(createHTML){return function(){return createHTML(this,"small","","")}})},{"./_string-html":106}],244:[function(require,module,exports){"use strict";var $export=require("./_export"),toLength=require("./_to-length"),context=require("./_string-context"),STARTS_WITH="startsWith",$startsWith=""[STARTS_WITH];$export($export.P+$export.F*require("./_fails-is-regexp")(STARTS_WITH),"String",{startsWith:function(searchString){var that=context(this,searchString,STARTS_WITH),index=toLength(Math.min(arguments.length>1?arguments[1]:void 0,that.length)),search=String(searchString);return $startsWith?$startsWith.call(that,search,index):that.slice(index,index+search.length)===search}})},{"./_export":39,"./_fails-is-regexp":40,"./_string-context":105,"./_to-length":115}],245:[function(require,module,exports){"use strict";require("./_string-html")("strike",function(createHTML){return function(){return createHTML(this,"strike","","")}})},{"./_string-html":106}],246:[function(require,module,exports){"use strict";require("./_string-html")("sub",function(createHTML){return function(){return createHTML(this,"sub","","")}})},{"./_string-html":106}],247:[function(require,module,exports){"use strict";require("./_string-html")("sup",function(createHTML){return function(){return createHTML(this,"sup","","")}})},{"./_string-html":106}],248:[function(require,module,exports){"use strict";require("./_string-trim")("trim",function($trim){return function(){return $trim(this,3)}})},{"./_string-trim":109}],249:[function(require,module,exports){"use strict";var global=require("./_global"),core=require("./_core"),has=require("./_has"),DESCRIPTORS=require("./_descriptors"),$export=require("./_export"),redefine=require("./_redefine"),META=require("./_meta").KEY,$fails=require("./_fails"),shared=require("./_shared"),setToStringTag=require("./_set-to-string-tag"),uid=require("./_uid"),wks=require("./_wks"),keyOf=require("./_keyof"),enumKeys=require("./_enum-keys"),isArray=require("./_is-array"),anObject=require("./_an-object"),toIObject=require("./_to-iobject"),toPrimitive=require("./_to-primitive"),createDesc=require("./_property-desc"),_create=require("./_object-create"),gOPNExt=require("./_object-gopn-ext"),$GOPD=require("./_object-gopd"),$DP=require("./_object-dp"),gOPD=$GOPD.f,dP=$DP.f,gOPN=gOPNExt.f,$Symbol=global.Symbol,$JSON=global.JSON,_stringify=$JSON&&$JSON.stringify,setter=!1,PROTOTYPE="prototype",HIDDEN=wks("_hidden"),TO_PRIMITIVE=wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),ObjectProto=Object[PROTOTYPE],USE_NATIVE="function"==typeof $Symbol,QObject=global.QObject,setSymbolDesc=DESCRIPTORS&&$fails(function(){return 7!=_create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);protoDesc&&delete ObjectProto[key],dP(it,key,D),protoDesc&&it!==ObjectProto&&dP(ObjectProto,key,protoDesc)}:dP,wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol[PROTOTYPE]);return sym._k=tag,DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,tag,{configurable:!0,set:function(value){has(this,HIDDEN)&&has(this[HIDDEN],tag)&&(this[HIDDEN][tag]=!1),setSymbolDesc(this,tag,createDesc(1,value))}}),sym},isSymbol=USE_NATIVE&&"symbol"==typeof $Symbol.iterator?function(it){return"symbol"==typeof it}:function(it){return it instanceof $Symbol},$defineProperty=function(it,key,D){return anObject(it),key=toPrimitive(key,!0),anObject(D),has(AllSymbols,key)?(D.enumerable?(has(it,HIDDEN)&&it[HIDDEN][key]&&(it[HIDDEN][key]=!1),D=_create(D,{enumerable:createDesc(0,!1)})):(has(it,HIDDEN)||dP(it,HIDDEN,createDesc(1,{})),it[HIDDEN][key]=!0),setSymbolDesc(it,key,D)):dP(it,key,D)},$defineProperties=function(it,P){anObject(it);for(var key,keys=enumKeys(P=toIObject(P)),i=0,l=keys.length;l>i;)$defineProperty(it,key=keys[i++],P[key]);return it},$create=function(it,P){return void 0===P?_create(it):$defineProperties(_create(it),P)},$propertyIsEnumerable=function(key){var E=isEnum.call(this,key=toPrimitive(key,!0));return E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key]?E:!0},$getOwnPropertyDescriptor=function(it,key){var D=gOPD(it=toIObject(it),key=toPrimitive(key,!0));return!D||!has(AllSymbols,key)||has(it,HIDDEN)&&it[HIDDEN][key]||(D.enumerable=!0),D},$getOwnPropertyNames=function(it){for(var key,names=gOPN(toIObject(it)),result=[],i=0;names.length>i;)has(AllSymbols,key=names[i++])||key==HIDDEN||key==META||result.push(key);return result},$getOwnPropertySymbols=function(it){for(var key,names=gOPN(toIObject(it)),result=[],i=0;names.length>i;)has(AllSymbols,key=names[i++])&&result.push(AllSymbols[key]);return result},$stringify=function(it){if(void 0!==it&&!isSymbol(it)){for(var replacer,$replacer,args=[it],i=1;arguments.length>i;)args.push(arguments[i++]);return replacer=args[1],"function"==typeof replacer&&($replacer=replacer),!$replacer&&isArray(replacer)||(replacer=function(key,value){return $replacer&&(value=$replacer.call(this,key,value)),isSymbol(value)?void 0:value}),args[1]=replacer,_stringify.apply($JSON,args)}},BUGGY_JSON=$fails(function(){var S=$Symbol();return"[null]"!=_stringify([S])||"{}"!=_stringify({a:S})||"{}"!=_stringify(Object(S))});USE_NATIVE||($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");return wrap(uid(arguments.length>0?arguments[0]:void 0))},redefine($Symbol[PROTOTYPE],"toString",function(){return this._k}),$GOPD.f=$getOwnPropertyDescriptor,$DP.f=$defineProperty,require("./_object-gopn").f=gOPNExt.f=$getOwnPropertyNames,require("./_object-pie").f=$propertyIsEnumerable,require("./_object-gops").f=$getOwnPropertySymbols,DESCRIPTORS&&!require("./_library")&&redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,!0)),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),i=0;symbols.length>i;){var key=symbols[i++],Wrapper=core.Symbol,sym=wks(key);key in Wrapper||dP(Wrapper,key,{value:USE_NATIVE?sym:wrap(sym)})}QObject&&QObject[PROTOTYPE]&&QObject[PROTOTYPE].findChild||(setter=!0),$export($export.S+$export.F*!USE_NATIVE,"Symbol",{for:function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function(key){if(isSymbol(key))return keyOf(SymbolRegistry,key);throw TypeError(key+" is not a symbol!")},useSetter:function(){setter=!0},useSimple:function(){setter=!1}}),$export($export.S+$export.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$JSON&&$export($export.S+$export.F*(!USE_NATIVE||BUGGY_JSON),"JSON",{stringify:$stringify}),$Symbol[PROTOTYPE][TO_PRIMITIVE]||require("./_hide")($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf),setToStringTag($Symbol,"Symbol"),setToStringTag(Math,"Math",!0),setToStringTag(global.JSON,"JSON",!0)},{"./_an-object":16,"./_core":31,"./_descriptors":35,"./_enum-keys":38,"./_export":39,"./_fails":41,"./_global":45,"./_has":46,"./_hide":47,"./_is-array":54,"./_keyof":64,"./_library":65,"./_meta":69,"./_object-create":73,"./_object-dp":74,"./_object-gopd":77,"./_object-gopn":79,"./_object-gopn-ext":78,"./_object-gops":80,"./_object-pie":84,"./_property-desc":92,"./_redefine":94,"./_set-to-string-tag":99,"./_shared":101,"./_to-iobject":114,"./_to-primitive":117,"./_uid":121,"./_wks":122}],250:[function(require,module,exports){"use strict";var $export=require("./_export"),$typed=require("./_typed"),buffer=require("./_typed-buffer"),anObject=require("./_an-object"),toIndex=require("./_to-index"),toLength=require("./_to-length"),isObject=require("./_is-object"),ArrayBuffer=(require("./_wks")("typed_array"),require("./_global").ArrayBuffer),speciesConstructor=require("./_species-constructor"),$ArrayBuffer=buffer.ArrayBuffer,$DataView=buffer.DataView,$isView=$typed.ABV&&ArrayBuffer.isView,$slice=$ArrayBuffer.prototype.slice,VIEW=$typed.VIEW,ARRAY_BUFFER="ArrayBuffer";$export($export.G+$export.W+$export.F*(ArrayBuffer!==$ArrayBuffer),{ArrayBuffer:$ArrayBuffer}),$export($export.S+$export.F*!$typed.CONSTR,ARRAY_BUFFER,{isView:function(it){return $isView&&$isView(it)||isObject(it)&&VIEW in it}}),$export($export.P+$export.U+$export.F*require("./_fails")(function(){return!new $ArrayBuffer(2).slice(1,void 0).byteLength}),ARRAY_BUFFER,{slice:function(start,end){if(void 0!==$slice&&void 0===end)return $slice.call(anObject(this),start);for(var len=anObject(this).byteLength,first=toIndex(start,len),final=toIndex(void 0===end?len:end,len),result=new(speciesConstructor(this,$ArrayBuffer))(toLength(final-first)),viewS=new $DataView(this),viewT=new $DataView(result),index=0;final>first;)viewT.setUint8(index++,viewS.getUint8(first++));return result}}),require("./_set-species")(ARRAY_BUFFER)},{"./_an-object":16,"./_export":39,"./_fails":41,"./_global":45,"./_is-object":56,"./_set-species":98,"./_species-constructor":102,"./_to-index":112,"./_to-length":115,"./_typed":120,"./_typed-buffer":119,"./_wks":122}],251:[function(require,module,exports){var $export=require("./_export");$export($export.G+$export.W+$export.F*!require("./_typed").ABV,{DataView:require("./_typed-buffer").DataView})},{"./_export":39,"./_typed":120,"./_typed-buffer":119}],252:[function(require,module,exports){require("./_typed-array")("Float32",4,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":118}],253:[function(require,module,exports){require("./_typed-array")("Float64",8,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":118}],254:[function(require,module,exports){require("./_typed-array")("Int16",2,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":118}],255:[function(require,module,exports){require("./_typed-array")("Int32",4,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":118}],256:[function(require,module,exports){require("./_typed-array")("Int8",1,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":118}],257:[function(require,module,exports){require("./_typed-array")("Uint16",2,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":118}],258:[function(require,module,exports){require("./_typed-array")("Uint32",4,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":118}],259:[function(require,module,exports){require("./_typed-array")("Uint8",1,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":118}],260:[function(require,module,exports){require("./_typed-array")("Uint8",1,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}},!0)},{"./_typed-array":118}],261:[function(require,module,exports){"use strict";var InternalMap,each=require("./_array-methods")(0),redefine=require("./_redefine"),meta=require("./_meta"),assign=require("./_object-assign"),weak=require("./_collection-weak"),isObject=require("./_is-object"),getWeak=(require("./_has"),meta.getWeak),isExtensible=Object.isExtensible,uncaughtFrozenStore=weak.ufstore,tmp={},wrapper=function(get){return function(){return get(this,arguments.length>0?arguments[0]:void 0)}},methods={get:function(key){if(isObject(key)){var data=getWeak(key);return data===!0?uncaughtFrozenStore(this).get(key):data?data[this._i]:void 0}},set:function(key,value){return weak.def(this,key,value)}},$WeakMap=module.exports=require("./_collection")("WeakMap",wrapper,methods,weak,!0,!0);7!=(new $WeakMap).set((Object.freeze||Object)(tmp),7).get(tmp)&&(InternalMap=weak.getConstructor(wrapper),assign(InternalMap.prototype,methods),meta.NEED=!0,each(["delete","has","get","set"],function(key){var proto=$WeakMap.prototype,method=proto[key];
redefine(proto,key,function(a,b){if(isObject(a)&&!isExtensible(a)){this._f||(this._f=new InternalMap);var result=this._f[key](a,b);return"set"==key?this:result}return method.call(this,a,b)})}))},{"./_array-methods":21,"./_collection":30,"./_collection-weak":29,"./_has":46,"./_is-object":56,"./_meta":69,"./_object-assign":72,"./_redefine":94}],262:[function(require,module,exports){"use strict";var weak=require("./_collection-weak");require("./_collection")("WeakSet",function(get){return function(){return get(this,arguments.length>0?arguments[0]:void 0)}},{add:function(value){return weak.def(this,value,!0)}},weak,!1,!0)},{"./_collection":30,"./_collection-weak":29}],263:[function(require,module,exports){"use strict";var $export=require("./_export"),$includes=require("./_array-includes")(!0);$export($export.P,"Array",{includes:function(el){return $includes(this,el,arguments.length>1?arguments[1]:void 0)}}),require("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":14,"./_array-includes":20,"./_export":39}],264:[function(require,module,exports){var $export=require("./_export"),cof=require("./_cof");$export($export.S,"Error",{isError:function(it){return"Error"===cof(it)}})},{"./_cof":26,"./_export":39}],265:[function(require,module,exports){var $export=require("./_export");$export($export.P+$export.R,"Map",{toJSON:require("./_collection-to-json")("Map")})},{"./_collection-to-json":28,"./_export":39}],266:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{iaddh:function(x0,x1,y0,y1){var $x0=x0>>>0,$x1=x1>>>0,$y0=y0>>>0;return $x1+(y1>>>0)+(($x0&$y0|($x0|$y0)&~($x0+$y0>>>0))>>>31)|0}})},{"./_export":39}],267:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{imulh:function(u,v){var UINT16=65535,$u=+u,$v=+v,u0=$u&UINT16,v0=$v&UINT16,u1=$u>>16,v1=$v>>16,t=(u1*v0>>>0)+(u0*v0>>>16);return u1*v1+(t>>16)+((u0*v1>>>0)+(t&UINT16)>>16)}})},{"./_export":39}],268:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{isubh:function(x0,x1,y0,y1){var $x0=x0>>>0,$x1=x1>>>0,$y0=y0>>>0;return $x1-(y1>>>0)-((~$x0&$y0|~($x0^$y0)&$x0-$y0>>>0)>>>31)|0}})},{"./_export":39}],269:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{umulh:function(u,v){var UINT16=65535,$u=+u,$v=+v,u0=$u&UINT16,v0=$v&UINT16,u1=$u>>>16,v1=$v>>>16,t=(u1*v0>>>0)+(u0*v0>>>16);return u1*v1+(t>>>16)+((u0*v1>>>0)+(t&UINT16)>>>16)}})},{"./_export":39}],270:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),aFunction=require("./_a-function"),$defineProperty=require("./_object-dp");require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__defineGetter__:function(P,getter){$defineProperty.f(toObject(this),P,{get:aFunction(getter),enumerable:!0,configurable:!0})}})},{"./_a-function":12,"./_descriptors":35,"./_export":39,"./_object-dp":74,"./_object-forced-pam":76,"./_to-object":116}],271:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),aFunction=require("./_a-function"),$defineProperty=require("./_object-dp");require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__defineSetter__:function(P,setter){$defineProperty.f(toObject(this),P,{set:aFunction(setter),enumerable:!0,configurable:!0})}})},{"./_a-function":12,"./_descriptors":35,"./_export":39,"./_object-dp":74,"./_object-forced-pam":76,"./_to-object":116}],272:[function(require,module,exports){var $export=require("./_export"),$entries=require("./_object-to-array")(!0);$export($export.S,"Object",{entries:function(it){return $entries(it)}})},{"./_export":39,"./_object-to-array":86}],273:[function(require,module,exports){var $export=require("./_export"),ownKeys=require("./_own-keys"),toIObject=require("./_to-iobject"),createDesc=require("./_property-desc"),gOPD=require("./_object-gopd"),dP=require("./_object-dp");$export($export.S,"Object",{getOwnPropertyDescriptors:function(object){for(var key,D,O=toIObject(object),getDesc=gOPD.f,keys=ownKeys(O),result={},i=0;keys.length>i;)D=getDesc(O,key=keys[i++]),key in result?dP.f(result,key,createDesc(0,D)):result[key]=D;return result}})},{"./_export":39,"./_object-dp":74,"./_object-gopd":77,"./_own-keys":87,"./_property-desc":92,"./_to-iobject":114}],274:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),toPrimitive=require("./_to-primitive"),getPrototypeOf=require("./_object-gpo"),getOwnPropertyDescriptor=require("./_object-gopd").f;require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__lookupGetter__:function(P){var D,O=toObject(this),K=toPrimitive(P,!0);do if(D=getOwnPropertyDescriptor(O,K))return D.get;while(O=getPrototypeOf(O))}})},{"./_descriptors":35,"./_export":39,"./_object-forced-pam":76,"./_object-gopd":77,"./_object-gpo":81,"./_to-object":116,"./_to-primitive":117}],275:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),toPrimitive=require("./_to-primitive"),getPrototypeOf=require("./_object-gpo"),getOwnPropertyDescriptor=require("./_object-gopd").f;require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__lookupSetter__:function(P){var D,O=toObject(this),K=toPrimitive(P,!0);do if(D=getOwnPropertyDescriptor(O,K))return D.set;while(O=getPrototypeOf(O))}})},{"./_descriptors":35,"./_export":39,"./_object-forced-pam":76,"./_object-gopd":77,"./_object-gpo":81,"./_to-object":116,"./_to-primitive":117}],276:[function(require,module,exports){var $export=require("./_export"),$values=require("./_object-to-array")(!1);$export($export.S,"Object",{values:function(it){return $values(it)}})},{"./_export":39,"./_object-to-array":86}],277:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),toMetaKey=metadata.key,ordinaryDefineOwnMetadata=metadata.set;metadata.exp({defineMetadata:function(metadataKey,metadataValue,target,targetKey){ordinaryDefineOwnMetadata(metadataKey,metadataValue,anObject(target),toMetaKey(targetKey))}})},{"./_an-object":16,"./_metadata":70}],278:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),toMetaKey=metadata.key,getOrCreateMetadataMap=metadata.map,store=metadata.store;metadata.exp({deleteMetadata:function(metadataKey,target){var targetKey=arguments.length<3?void 0:toMetaKey(arguments[2]),metadataMap=getOrCreateMetadataMap(anObject(target),targetKey,!1);if(void 0===metadataMap||!metadataMap.delete(metadataKey))return!1;if(metadataMap.size)return!0;var targetMetadata=store.get(target);return targetMetadata.delete(targetKey),!!targetMetadata.size||store.delete(target)}})},{"./_an-object":16,"./_metadata":70}],279:[function(require,module,exports){var Set=require("./es6.set"),from=require("./_array-from-iterable"),metadata=require("./_metadata"),anObject=require("./_an-object"),getPrototypeOf=require("./_object-gpo"),ordinaryOwnMetadataKeys=metadata.keys,toMetaKey=metadata.key,ordinaryMetadataKeys=function(O,P){var oKeys=ordinaryOwnMetadataKeys(O,P),parent=getPrototypeOf(O);if(null===parent)return oKeys;var pKeys=ordinaryMetadataKeys(parent,P);return pKeys.length?oKeys.length?from(new Set(oKeys.concat(pKeys))):pKeys:oKeys};metadata.exp({getMetadataKeys:function(target){return ordinaryMetadataKeys(anObject(target),arguments.length<2?void 0:toMetaKey(arguments[1]))}})},{"./_an-object":16,"./_array-from-iterable":19,"./_metadata":70,"./_object-gpo":81,"./es6.set":226}],280:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),getPrototypeOf=require("./_object-gpo"),ordinaryHasOwnMetadata=metadata.has,ordinaryGetOwnMetadata=metadata.get,toMetaKey=metadata.key,ordinaryGetMetadata=function(MetadataKey,O,P){var hasOwn=ordinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return ordinaryGetOwnMetadata(MetadataKey,O,P);var parent=getPrototypeOf(O);return null!==parent?ordinaryGetMetadata(MetadataKey,parent,P):void 0};metadata.exp({getMetadata:function(metadataKey,target){return ordinaryGetMetadata(metadataKey,anObject(target),arguments.length<3?void 0:toMetaKey(arguments[2]))}})},{"./_an-object":16,"./_metadata":70,"./_object-gpo":81}],281:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),ordinaryOwnMetadataKeys=metadata.keys,toMetaKey=metadata.key;metadata.exp({getOwnMetadataKeys:function(target){return ordinaryOwnMetadataKeys(anObject(target),arguments.length<2?void 0:toMetaKey(arguments[1]))}})},{"./_an-object":16,"./_metadata":70}],282:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),ordinaryGetOwnMetadata=metadata.get,toMetaKey=metadata.key;metadata.exp({getOwnMetadata:function(metadataKey,target){return ordinaryGetOwnMetadata(metadataKey,anObject(target),arguments.length<3?void 0:toMetaKey(arguments[2]))}})},{"./_an-object":16,"./_metadata":70}],283:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),getPrototypeOf=require("./_object-gpo"),ordinaryHasOwnMetadata=metadata.has,toMetaKey=metadata.key,ordinaryHasMetadata=function(MetadataKey,O,P){var hasOwn=ordinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return!0;var parent=getPrototypeOf(O);return null!==parent?ordinaryHasMetadata(MetadataKey,parent,P):!1};metadata.exp({hasMetadata:function(metadataKey,target){return ordinaryHasMetadata(metadataKey,anObject(target),arguments.length<3?void 0:toMetaKey(arguments[2]))}})},{"./_an-object":16,"./_metadata":70,"./_object-gpo":81}],284:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),ordinaryHasOwnMetadata=metadata.has,toMetaKey=metadata.key;metadata.exp({hasOwnMetadata:function(metadataKey,target){return ordinaryHasOwnMetadata(metadataKey,anObject(target),arguments.length<3?void 0:toMetaKey(arguments[2]))}})},{"./_an-object":16,"./_metadata":70}],285:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),aFunction=require("./_a-function"),toMetaKey=metadata.key,ordinaryDefineOwnMetadata=metadata.set;metadata.exp({metadata:function(metadataKey,metadataValue){return function(target,targetKey){ordinaryDefineOwnMetadata(metadataKey,metadataValue,(void 0!==targetKey?anObject:aFunction)(target),toMetaKey(targetKey))}}})},{"./_a-function":12,"./_an-object":16,"./_metadata":70}],286:[function(require,module,exports){var $export=require("./_export");$export($export.P+$export.R,"Set",{toJSON:require("./_collection-to-json")("Set")})},{"./_collection-to-json":28,"./_export":39}],287:[function(require,module,exports){"use strict";var $export=require("./_export"),$at=require("./_string-at")(!0);$export($export.P,"String",{at:function(pos){return $at(this,pos)}})},{"./_export":39,"./_string-at":104}],288:[function(require,module,exports){"use strict";var $export=require("./_export"),defined=require("./_defined"),toLength=require("./_to-length"),isRegExp=require("./_is-regexp"),getFlags=require("./_flags"),RegExpProto=RegExp.prototype,$RegExpStringIterator=function(regexp,string){this._r=regexp,this._s=string};require("./_iter-create")($RegExpStringIterator,"RegExp String",function(){var match=this._r.exec(this._s);return{value:match,done:null===match}}),$export($export.P,"String",{matchAll:function(regexp){if(defined(this),!isRegExp(regexp))throw TypeError(regexp+" is not a regexp!");var S=String(this),flags="flags"in RegExpProto?String(regexp.flags):getFlags.call(regexp),rx=new RegExp(regexp.source,~flags.indexOf("g")?flags:"g"+flags);return rx.lastIndex=toLength(regexp.lastIndex),new $RegExpStringIterator(rx,S)}})},{"./_defined":34,"./_export":39,"./_flags":43,"./_is-regexp":57,"./_iter-create":59,"./_to-length":115}],289:[function(require,module,exports){"use strict";var $export=require("./_export"),$pad=require("./_string-pad");$export($export.P,"String",{padEnd:function(maxLength){return $pad(this,maxLength,arguments.length>1?arguments[1]:void 0,!1)}})},{"./_export":39,"./_string-pad":107}],290:[function(require,module,exports){"use strict";var $export=require("./_export"),$pad=require("./_string-pad");$export($export.P,"String",{padStart:function(maxLength){return $pad(this,maxLength,arguments.length>1?arguments[1]:void 0,!0)}})},{"./_export":39,"./_string-pad":107}],291:[function(require,module,exports){"use strict";require("./_string-trim")("trimLeft",function($trim){return function(){return $trim(this,1)}},"trimStart")},{"./_string-trim":109}],292:[function(require,module,exports){"use strict";require("./_string-trim")("trimRight",function($trim){return function(){return $trim(this,2)}},"trimEnd")},{"./_string-trim":109}],293:[function(require,module,exports){var $export=require("./_export");$export($export.S,"System",{global:require("./_global")})},{"./_export":39,"./_global":45}],294:[function(require,module,exports){for(var $iterators=require("./es6.array.iterator"),redefine=require("./_redefine"),global=require("./_global"),hide=require("./_hide"),Iterators=require("./_iterators"),wks=require("./_wks"),ITERATOR=wks("iterator"),TO_STRING_TAG=wks("toStringTag"),ArrayValues=Iterators.Array,collections=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],i=0;5>i;i++){var key,NAME=collections[i],Collection=global[NAME],proto=Collection&&Collection.prototype;if(proto){proto[ITERATOR]||hide(proto,ITERATOR,ArrayValues),proto[TO_STRING_TAG]||hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=ArrayValues;for(key in $iterators)proto[key]||redefine(proto,key,$iterators[key],!0)}}},{"./_global":45,"./_hide":47,"./_iterators":63,"./_redefine":94,"./_wks":122,"./es6.array.iterator":136}],295:[function(require,module,exports){var $export=require("./_export"),$task=require("./_task");$export($export.G+$export.B,{setImmediate:$task.set,clearImmediate:$task.clear})},{"./_export":39,"./_task":111}],296:[function(require,module,exports){var global=require("./_global"),$export=require("./_export"),invoke=require("./_invoke"),partial=require("./_partial"),navigator=global.navigator,MSIE=!!navigator&&/MSIE .\./.test(navigator.userAgent),wrap=function(set){return MSIE?function(fn,time){return set(invoke(partial,[].slice.call(arguments,2),"function"==typeof fn?fn:Function(fn)),time)}:set};$export($export.G+$export.B+$export.F*MSIE,{setTimeout:wrap(global.setTimeout),setInterval:wrap(global.setInterval)})},{"./_export":39,"./_global":45,"./_invoke":51,"./_partial":90}],297:[function(require,module,exports){require("./modules/es6.symbol"),require("./modules/es6.object.create"),require("./modules/es6.object.define-property"),require("./modules/es6.object.define-properties"),require("./modules/es6.object.get-own-property-descriptor"),require("./modules/es6.object.get-prototype-of"),require("./modules/es6.object.keys"),require("./modules/es6.object.get-own-property-names"),require("./modules/es6.object.freeze"),require("./modules/es6.object.seal"),require("./modules/es6.object.prevent-extensions"),require("./modules/es6.object.is-frozen"),require("./modules/es6.object.is-sealed"),require("./modules/es6.object.is-extensible"),require("./modules/es6.object.assign"),require("./modules/es6.object.is"),require("./modules/es6.object.set-prototype-of"),require("./modules/es6.object.to-string"),require("./modules/es6.function.bind"),require("./modules/es6.function.name"),require("./modules/es6.function.has-instance"),require("./modules/es6.parse-int"),require("./modules/es6.parse-float"),require("./modules/es6.number.constructor"),require("./modules/es6.number.to-fixed"),require("./modules/es6.number.to-precision"),require("./modules/es6.number.epsilon"),require("./modules/es6.number.is-finite"),require("./modules/es6.number.is-integer"),require("./modules/es6.number.is-nan"),require("./modules/es6.number.is-safe-integer"),require("./modules/es6.number.max-safe-integer"),require("./modules/es6.number.min-safe-integer"),require("./modules/es6.number.parse-float"),require("./modules/es6.number.parse-int"),require("./modules/es6.math.acosh"),require("./modules/es6.math.asinh"),require("./modules/es6.math.atanh"),require("./modules/es6.math.cbrt"),require("./modules/es6.math.clz32"),require("./modules/es6.math.cosh"),require("./modules/es6.math.expm1"),require("./modules/es6.math.fround"),require("./modules/es6.math.hypot"),require("./modules/es6.math.imul"),require("./modules/es6.math.log10"),require("./modules/es6.math.log1p"),require("./modules/es6.math.log2"),require("./modules/es6.math.sign"),require("./modules/es6.math.sinh"),require("./modules/es6.math.tanh"),require("./modules/es6.math.trunc"),require("./modules/es6.string.from-code-point"),require("./modules/es6.string.raw"),require("./modules/es6.string.trim"),require("./modules/es6.string.iterator"),require("./modules/es6.string.code-point-at"),require("./modules/es6.string.ends-with"),require("./modules/es6.string.includes"),require("./modules/es6.string.repeat"),require("./modules/es6.string.starts-with"),require("./modules/es6.string.anchor"),require("./modules/es6.string.big"),require("./modules/es6.string.blink"),require("./modules/es6.string.bold"),require("./modules/es6.string.fixed"),require("./modules/es6.string.fontcolor"),require("./modules/es6.string.fontsize"),require("./modules/es6.string.italics"),require("./modules/es6.string.link"),require("./modules/es6.string.small"),require("./modules/es6.string.strike"),require("./modules/es6.string.sub"),require("./modules/es6.string.sup"),require("./modules/es6.date.now"),require("./modules/es6.date.to-json"),require("./modules/es6.date.to-iso-string"),require("./modules/es6.date.to-string"),require("./modules/es6.date.to-primitive"),require("./modules/es6.array.is-array"),require("./modules/es6.array.from"),require("./modules/es6.array.of"),require("./modules/es6.array.join"),require("./modules/es6.array.slice"),require("./modules/es6.array.sort"),require("./modules/es6.array.for-each"),require("./modules/es6.array.map"),require("./modules/es6.array.filter"),require("./modules/es6.array.some"),require("./modules/es6.array.every"),require("./modules/es6.array.reduce"),require("./modules/es6.array.reduce-right"),require("./modules/es6.array.index-of"),require("./modules/es6.array.last-index-of"),require("./modules/es6.array.copy-within"),require("./modules/es6.array.fill"),require("./modules/es6.array.find"),require("./modules/es6.array.find-index"),require("./modules/es6.array.species"),require("./modules/es6.array.iterator"),require("./modules/es6.regexp.constructor"),require("./modules/es6.regexp.to-string"),require("./modules/es6.regexp.flags"),require("./modules/es6.regexp.match"),require("./modules/es6.regexp.replace"),require("./modules/es6.regexp.search"),require("./modules/es6.regexp.split"),require("./modules/es6.promise"),require("./modules/es6.map"),require("./modules/es6.set"),require("./modules/es6.weak-map"),require("./modules/es6.weak-set"),require("./modules/es6.typed.array-buffer"),require("./modules/es6.typed.data-view"),require("./modules/es6.typed.int8-array"),require("./modules/es6.typed.uint8-array"),require("./modules/es6.typed.uint8-clamped-array"),require("./modules/es6.typed.int16-array"),require("./modules/es6.typed.uint16-array"),require("./modules/es6.typed.int32-array"),require("./modules/es6.typed.uint32-array"),require("./modules/es6.typed.float32-array"),require("./modules/es6.typed.float64-array"),require("./modules/es6.reflect.apply"),require("./modules/es6.reflect.construct"),require("./modules/es6.reflect.define-property"),require("./modules/es6.reflect.delete-property"),require("./modules/es6.reflect.enumerate"),require("./modules/es6.reflect.get"),require("./modules/es6.reflect.get-own-property-descriptor"),require("./modules/es6.reflect.get-prototype-of"),require("./modules/es6.reflect.has"),require("./modules/es6.reflect.is-extensible"),require("./modules/es6.reflect.own-keys"),require("./modules/es6.reflect.prevent-extensions"),require("./modules/es6.reflect.set"),require("./modules/es6.reflect.set-prototype-of"),require("./modules/es7.array.includes"),require("./modules/es7.string.at"),require("./modules/es7.string.pad-start"),require("./modules/es7.string.pad-end"),require("./modules/es7.string.trim-left"),require("./modules/es7.string.trim-right"),require("./modules/es7.string.match-all"),require("./modules/es7.object.get-own-property-descriptors"),require("./modules/es7.object.values"),require("./modules/es7.object.entries"),require("./modules/es7.object.define-getter"),require("./modules/es7.object.define-setter"),require("./modules/es7.object.lookup-getter"),require("./modules/es7.object.lookup-setter"),require("./modules/es7.map.to-json"),require("./modules/es7.set.to-json"),require("./modules/es7.system.global"),require("./modules/es7.error.is-error"),require("./modules/es7.math.iaddh"),require("./modules/es7.math.isubh"),require("./modules/es7.math.imulh"),require("./modules/es7.math.umulh"),require("./modules/es7.reflect.define-metadata"),require("./modules/es7.reflect.delete-metadata"),require("./modules/es7.reflect.get-metadata"),require("./modules/es7.reflect.get-metadata-keys"),require("./modules/es7.reflect.get-own-metadata"),require("./modules/es7.reflect.get-own-metadata-keys"),require("./modules/es7.reflect.has-metadata"),require("./modules/es7.reflect.has-own-metadata"),require("./modules/es7.reflect.metadata"),require("./modules/web.timers"),require("./modules/web.immediate"),require("./modules/web.dom.iterable"),module.exports=require("./modules/_core")},{"./modules/_core":31,"./modules/es6.array.copy-within":126,"./modules/es6.array.every":127,"./modules/es6.array.fill":128,"./modules/es6.array.filter":129,"./modules/es6.array.find":131,"./modules/es6.array.find-index":130,"./modules/es6.array.for-each":132,"./modules/es6.array.from":133,"./modules/es6.array.index-of":134,"./modules/es6.array.is-array":135,"./modules/es6.array.iterator":136,"./modules/es6.array.join":137,"./modules/es6.array.last-index-of":138,"./modules/es6.array.map":139,"./modules/es6.array.of":140,"./modules/es6.array.reduce":142,"./modules/es6.array.reduce-right":141,"./modules/es6.array.slice":143,"./modules/es6.array.some":144,"./modules/es6.array.sort":145,"./modules/es6.array.species":146,"./modules/es6.date.now":147,"./modules/es6.date.to-iso-string":148,"./modules/es6.date.to-json":149,"./modules/es6.date.to-primitive":150,"./modules/es6.date.to-string":151,"./modules/es6.function.bind":152,"./modules/es6.function.has-instance":153,"./modules/es6.function.name":154,"./modules/es6.map":155,"./modules/es6.math.acosh":156,"./modules/es6.math.asinh":157,"./modules/es6.math.atanh":158,"./modules/es6.math.cbrt":159,"./modules/es6.math.clz32":160,"./modules/es6.math.cosh":161,"./modules/es6.math.expm1":162,"./modules/es6.math.fround":163,"./modules/es6.math.hypot":164,"./modules/es6.math.imul":165,"./modules/es6.math.log10":166,"./modules/es6.math.log1p":167,"./modules/es6.math.log2":168,"./modules/es6.math.sign":169,"./modules/es6.math.sinh":170,"./modules/es6.math.tanh":171,"./modules/es6.math.trunc":172,"./modules/es6.number.constructor":173,"./modules/es6.number.epsilon":174,"./modules/es6.number.is-finite":175,"./modules/es6.number.is-integer":176,"./modules/es6.number.is-nan":177,"./modules/es6.number.is-safe-integer":178,"./modules/es6.number.max-safe-integer":179,"./modules/es6.number.min-safe-integer":180,"./modules/es6.number.parse-float":181,"./modules/es6.number.parse-int":182,"./modules/es6.number.to-fixed":183,"./modules/es6.number.to-precision":184,"./modules/es6.object.assign":185,"./modules/es6.object.create":186,"./modules/es6.object.define-properties":187,"./modules/es6.object.define-property":188,"./modules/es6.object.freeze":189,"./modules/es6.object.get-own-property-descriptor":190,"./modules/es6.object.get-own-property-names":191,"./modules/es6.object.get-prototype-of":192,"./modules/es6.object.is":196,"./modules/es6.object.is-extensible":193,"./modules/es6.object.is-frozen":194,"./modules/es6.object.is-sealed":195,"./modules/es6.object.keys":197,"./modules/es6.object.prevent-extensions":198,"./modules/es6.object.seal":199,"./modules/es6.object.set-prototype-of":200,"./modules/es6.object.to-string":201,"./modules/es6.parse-float":202,"./modules/es6.parse-int":203,"./modules/es6.promise":204,"./modules/es6.reflect.apply":205,"./modules/es6.reflect.construct":206,"./modules/es6.reflect.define-property":207,"./modules/es6.reflect.delete-property":208,"./modules/es6.reflect.enumerate":209,"./modules/es6.reflect.get":212,"./modules/es6.reflect.get-own-property-descriptor":210,"./modules/es6.reflect.get-prototype-of":211,"./modules/es6.reflect.has":213,"./modules/es6.reflect.is-extensible":214,"./modules/es6.reflect.own-keys":215,"./modules/es6.reflect.prevent-extensions":216,"./modules/es6.reflect.set":218,"./modules/es6.reflect.set-prototype-of":217,"./modules/es6.regexp.constructor":219,"./modules/es6.regexp.flags":220,"./modules/es6.regexp.match":221,"./modules/es6.regexp.replace":222,"./modules/es6.regexp.search":223,"./modules/es6.regexp.split":224,"./modules/es6.regexp.to-string":225,"./modules/es6.set":226,"./modules/es6.string.anchor":227,"./modules/es6.string.big":228,"./modules/es6.string.blink":229,"./modules/es6.string.bold":230,"./modules/es6.string.code-point-at":231,"./modules/es6.string.ends-with":232,"./modules/es6.string.fixed":233,"./modules/es6.string.fontcolor":234,"./modules/es6.string.fontsize":235,"./modules/es6.string.from-code-point":236,"./modules/es6.string.includes":237,"./modules/es6.string.italics":238,"./modules/es6.string.iterator":239,"./modules/es6.string.link":240,"./modules/es6.string.raw":241,"./modules/es6.string.repeat":242,"./modules/es6.string.small":243,"./modules/es6.string.starts-with":244,"./modules/es6.string.strike":245,"./modules/es6.string.sub":246,"./modules/es6.string.sup":247,"./modules/es6.string.trim":248,"./modules/es6.symbol":249,"./modules/es6.typed.array-buffer":250,"./modules/es6.typed.data-view":251,"./modules/es6.typed.float32-array":252,"./modules/es6.typed.float64-array":253,"./modules/es6.typed.int16-array":254,"./modules/es6.typed.int32-array":255,"./modules/es6.typed.int8-array":256,"./modules/es6.typed.uint16-array":257,"./modules/es6.typed.uint32-array":258,"./modules/es6.typed.uint8-array":259,"./modules/es6.typed.uint8-clamped-array":260,"./modules/es6.weak-map":261,"./modules/es6.weak-set":262,"./modules/es7.array.includes":263,"./modules/es7.error.is-error":264,"./modules/es7.map.to-json":265,"./modules/es7.math.iaddh":266,"./modules/es7.math.imulh":267,"./modules/es7.math.isubh":268,"./modules/es7.math.umulh":269,"./modules/es7.object.define-getter":270,"./modules/es7.object.define-setter":271,"./modules/es7.object.entries":272,"./modules/es7.object.get-own-property-descriptors":273,"./modules/es7.object.lookup-getter":274,"./modules/es7.object.lookup-setter":275,"./modules/es7.object.values":276,"./modules/es7.reflect.define-metadata":277,"./modules/es7.reflect.delete-metadata":278,"./modules/es7.reflect.get-metadata":280,"./modules/es7.reflect.get-metadata-keys":279,"./modules/es7.reflect.get-own-metadata":282,"./modules/es7.reflect.get-own-metadata-keys":281,"./modules/es7.reflect.has-metadata":283,"./modules/es7.reflect.has-own-metadata":284,"./modules/es7.reflect.metadata":285,"./modules/es7.set.to-json":286,"./modules/es7.string.at":287,"./modules/es7.string.match-all":288,"./modules/es7.string.pad-end":289,"./modules/es7.string.pad-start":290,"./modules/es7.string.trim-left":291,"./modules/es7.string.trim-right":292,"./modules/es7.system.global":293,"./modules/web.dom.iterable":294,"./modules/web.immediate":295,"./modules/web.timers":296}],298:[function(require,module,exports){(function(process,global){!function(global){"use strict";function wrap(innerFn,outerFn,self,tryLocsList){var generator=Object.create((outerFn||Generator).prototype),context=new Context(tryLocsList||[]);return generator._invoke=makeInvokeMethod(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}function AwaitArgument(arg){this.arg=arg}function AsyncIterator(generator){function invoke(method,arg){var result=generator[method](arg),value=result.value;return value instanceof AwaitArgument?Promise.resolve(value.arg).then(invokeNext,invokeThrow):Promise.resolve(value).then(function(unwrapped){return result.value=unwrapped,result})}function enqueue(method,arg){function callInvokeWithMethodAndArg(){return invoke(method,arg)}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):new Promise(function(resolve){resolve(callInvokeWithMethodAndArg())})}"object"==typeof process&&process.domain&&(invoke=process.domain.bind(invoke));var previousPromise,invokeNext=invoke.bind(generator,"next"),invokeThrow=invoke.bind(generator,"throw");invoke.bind(generator,"return");this._invoke=enqueue}function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function(method,arg){if(state===GenStateExecuting)throw new Error("Generator is already running");if(state===GenStateCompleted){if("throw"===method)throw arg;return doneResult()}for(;;){var delegate=context.delegate;if(delegate){if("return"===method||"throw"===method&&delegate.iterator[method]===undefined){context.delegate=null;var returnMethod=delegate.iterator.return;if(returnMethod){var record=tryCatch(returnMethod,delegate.iterator,arg);if("throw"===record.type){method="throw",arg=record.arg;continue}}if("return"===method)continue}var record=tryCatch(delegate.iterator[method],delegate.iterator,arg);if("throw"===record.type){context.delegate=null,method="throw",arg=record.arg;continue}method="next",arg=undefined;var info=record.arg;if(!info.done)return state=GenStateSuspendedYield,info;context[delegate.resultName]=info.value,context.next=delegate.nextLoc,context.delegate=null}if("next"===method)context._sent=arg,state===GenStateSuspendedYield?context.sent=arg:context.sent=undefined;else if("throw"===method){if(state===GenStateSuspendedStart)throw state=GenStateCompleted,arg;context.dispatchException(arg)&&(method="next",arg=undefined)}else"return"===method&&context.abrupt("return",arg);state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if("normal"===record.type){state=context.done?GenStateCompleted:GenStateSuspendedYield;var info={value:record.arg,done:context.done};if(record.arg!==ContinueSentinel)return info;context.delegate&&"next"===method&&(arg=undefined)}else"throw"===record.type&&(state=GenStateCompleted,method="throw",arg=record.arg)}}}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,
next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}var undefined,hasOwn=Object.prototype.hasOwnProperty,iteratorSymbol="function"==typeof Symbol&&Symbol.iterator||"@@iterator",inModule="object"==typeof module,runtime=global.regeneratorRuntime;if(runtime)return void(inModule&&(module.exports=runtime));runtime=global.regeneratorRuntime=inModule?module.exports:{},runtime.wrap=wrap;var GenStateSuspendedStart="suspendedStart",GenStateSuspendedYield="suspendedYield",GenStateExecuting="executing",GenStateCompleted="completed",ContinueSentinel={},Gp=GeneratorFunctionPrototype.prototype=Generator.prototype;GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunction.displayName="GeneratorFunction",runtime.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return ctor?ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name):!1},runtime.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):genFun.__proto__=GeneratorFunctionPrototype,genFun.prototype=Object.create(Gp),genFun},runtime.awrap=function(arg){return new AwaitArgument(arg)},defineIteratorMethods(AsyncIterator.prototype),runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})},defineIteratorMethods(Gp),Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},runtime.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},runtime.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=undefined,this.done=!1,this.delegate=null,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function(){this.done=!0;var rootEntry=this.tryEntries[0],rootRecord=rootEntry.completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,!!caught}if(this.done)throw exception;for(var context=this,i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?this.next=finallyEntry.finallyLoc:this.complete(record),ContinueSentinel},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=record.arg,this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc)},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},ContinueSentinel}}}("object"==typeof global?global:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:433}],299:[function(require,module,exports){module.exports={default:require("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":301}],300:[function(require,module,exports){function isect(x,lower,upper){return x>=lower&&upper>=x}function inside(a0,a1,b0,b1){return a0>=b0&&b1>=a1}function norm(q){var p={left:q.left,right:q.right,top:q.top,bottom:q.bottom};void 0===p.left&&void 0!==q.x&&(p.left=q.x),void 0===p.top&&void 0!==q.y&&(p.top=q.y);var w=q.width||0,h=q.height||0;return void 0===p.right&&void 0!==q.x&&(p.right=q.x+w),void 0===p.bottom&&void 0!==q.y&&(p.bottom=q.y+h),p}module.exports=function(ra,rb){var a=norm(ra),b=norm(rb),inx=isect(a.left,b.left,b.right)||isect(a.right,b.left,b.right)||inside(a.left,a.right,b.left,b.right)||inside(b.left,b.right,a.left,a.right),iny=isect(a.top,b.top,b.bottom)||isect(a.bottom,b.top,b.bottom)||inside(a.top,a.bottom,b.top,b.bottom)||inside(b.top,b.bottom,a.top,a.bottom);return inx&&iny}},{}],301:[function(require,module,exports){var $=require("../../modules/$");module.exports=function(it,key,desc){return $.setDesc(it,key,desc)}},{"../../modules/$":302}],302:[function(require,module,exports){var $Object=Object;module.exports={create:$Object.create,getProto:$Object.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:$Object.getOwnPropertyDescriptor,setDesc:$Object.defineProperty,setDescs:$Object.defineProperties,getKeys:$Object.keys,getNames:$Object.getOwnPropertyNames,getSymbols:$Object.getOwnPropertySymbols,each:[].forEach}},{}],303:[function(require,module,exports){var slice=Array.prototype.slice,toArray=function(a){return slice.call(a)},tail=function(a){return slice.call(a,1)},createFn=function(fn,args,totalArity){var remainingArity=totalArity-args.length;switch(remainingArity){case 0:return function(){return processInvocation(fn,concatArgs(args,arguments),totalArity)};case 1:return function(a){return processInvocation(fn,concatArgs(args,arguments),totalArity)};case 2:return function(a,b){return processInvocation(fn,concatArgs(args,arguments),totalArity)};case 3:return function(a,b,c){return processInvocation(fn,concatArgs(args,arguments),totalArity)};case 4:return function(a,b,c,d){return processInvocation(fn,concatArgs(args,arguments),totalArity)};case 5:return function(a,b,c,d,e){return processInvocation(fn,concatArgs(args,arguments),totalArity)};case 6:return function(a,b,c,d,e,f){return processInvocation(fn,concatArgs(args,arguments),totalArity)};case 7:return function(a,b,c,d,e,f,g){return processInvocation(fn,concatArgs(args,arguments),totalArity)};case 8:return function(a,b,c,d,e,f,g,h){return processInvocation(fn,concatArgs(args,arguments),totalArity)};case 9:return function(a,b,c,d,e,f,g,h,i){return processInvocation(fn,concatArgs(args,arguments),totalArity)};case 10:return function(a,b,c,d,e,f,g,h,i,j){return processInvocation(fn,concatArgs(args,arguments),totalArity)};default:return createEvalFn(fn,args,remainingArity)}},concatArgs=function(args1,args2){return args1.concat(toArray(args2))},createEvalFn=function(fn,args,arity){var argList=makeArgList(arity),fnStr="false||function("+argList+"){ return processInvocation(fn, concatArgs(args, arguments)); }";return eval(fnStr)},makeArgList=function(len){for(var a=[],i=0;len>i;i+=1)a.push("a"+i.toString());return a.join(",")},trimArrLength=function(arr,length){return arr.length>length?arr.slice(0,length):arr},processInvocation=function(fn,argsArr,totalArity){return argsArr=trimArrLength(argsArr,totalArity),argsArr.length===totalArity?fn.apply(null,argsArr):createFn(fn,argsArr,totalArity)},curry=function(fn){return createFn(fn,[],fn.length)};curry.to=curry(function(arity,fn){return createFn(fn,[],arity)}),curry.adaptTo=curry(function(num,fn){return curry.to(num,function(context){var args=tail(arguments).concat(context);return fn.apply(this,args)})}),curry.adapt=function(fn){return curry.adaptTo(fn.length,fn)},module.exports=curry},{}],304:[function(require,module,exports){"use strict";function earcut(data,holeIndices,dim){dim=dim||2;var hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,outerNode=linkedList(data,0,outerLen,dim,!0),triangles=[];if(!outerNode)return triangles;var minX,minY,maxX,maxY,x,y,size;if(hasHoles&&(outerNode=eliminateHoles(data,holeIndices,outerNode,dim)),data.length>80*dim){minX=maxX=data[0],minY=maxY=data[1];for(var i=dim;outerLen>i;i+=dim)x=data[i],y=data[i+1],minX>x&&(minX=x),minY>y&&(minY=y),x>maxX&&(maxX=x),y>maxY&&(maxY=y);size=Math.max(maxX-minX,maxY-minY)}return earcutLinked(outerNode,triangles,dim,minX,minY,size),triangles}function linkedList(data,start,end,dim,clockwise){var i,last;if(clockwise===signedArea(data,start,end,dim)>0)for(i=start;end>i;i+=dim)last=insertNode(i,data[i],data[i+1],last);else for(i=end-dim;i>=start;i-=dim)last=insertNode(i,data[i],data[i+1],last);return last&&equals(last,last.next)&&(removeNode(last),last=last.next),last}function filterPoints(start,end){if(!start)return start;end||(end=start);var again,p=start;do if(again=!1,p.steiner||!equals(p,p.next)&&0!==area(p.prev,p,p.next))p=p.next;else{if(removeNode(p),p=end=p.prev,p===p.next)return null;again=!0}while(again||p!==end);return end}function earcutLinked(ear,triangles,dim,minX,minY,size,pass){if(ear){!pass&&size&&indexCurve(ear,minX,minY,size);for(var prev,next,stop=ear;ear.prev!==ear.next;)if(prev=ear.prev,next=ear.next,size?isEarHashed(ear,minX,minY,size):isEar(ear))triangles.push(prev.i/dim),triangles.push(ear.i/dim),triangles.push(next.i/dim),removeNode(ear),ear=next.next,stop=next.next;else if(ear=next,ear===stop){pass?1===pass?(ear=cureLocalIntersections(ear,triangles,dim),earcutLinked(ear,triangles,dim,minX,minY,size,2)):2===pass&&splitEarcut(ear,triangles,dim,minX,minY,size):earcutLinked(filterPoints(ear),triangles,dim,minX,minY,size,1);break}}}function isEar(ear){var a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return!1;for(var p=ear.next.next;p!==ear.prev;){if(pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function isEarHashed(ear,minX,minY,size){var a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return!1;for(var minTX=a.x<b.x?a.x<c.x?a.x:c.x:b.x<c.x?b.x:c.x,minTY=a.y<b.y?a.y<c.y?a.y:c.y:b.y<c.y?b.y:c.y,maxTX=a.x>b.x?a.x>c.x?a.x:c.x:b.x>c.x?b.x:c.x,maxTY=a.y>b.y?a.y>c.y?a.y:c.y:b.y>c.y?b.y:c.y,minZ=zOrder(minTX,minTY,minX,minY,size),maxZ=zOrder(maxTX,maxTY,minX,minY,size),p=ear.nextZ;p&&p.z<=maxZ;){if(p!==ear.prev&&p!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=ear.prevZ;p&&p.z>=minZ;){if(p!==ear.prev&&p!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function cureLocalIntersections(start,triangles,dim){var p=start;do{var a=p.prev,b=p.next.next;!equals(a,b)&&intersects(a,p,p.next,b)&&locallyInside(a,b)&&locallyInside(b,a)&&(triangles.push(a.i/dim),triangles.push(p.i/dim),triangles.push(b.i/dim),removeNode(p),removeNode(p.next),p=start=b),p=p.next}while(p!==start);return p}function splitEarcut(start,triangles,dim,minX,minY,size){var a=start;do{for(var b=a.next.next;b!==a.prev;){if(a.i!==b.i&&isValidDiagonal(a,b)){var c=splitPolygon(a,b);return a=filterPoints(a,a.next),c=filterPoints(c,c.next),earcutLinked(a,triangles,dim,minX,minY,size),void earcutLinked(c,triangles,dim,minX,minY,size)}b=b.next}a=a.next}while(a!==start)}function eliminateHoles(data,holeIndices,outerNode,dim){var i,len,start,end,list,queue=[];for(i=0,len=holeIndices.length;len>i;i++)start=holeIndices[i]*dim,end=len-1>i?holeIndices[i+1]*dim:data.length,list=linkedList(data,start,end,dim,!1),list===list.next&&(list.steiner=!0),queue.push(getLeftmost(list));for(queue.sort(compareX),i=0;i<queue.length;i++)eliminateHole(queue[i],outerNode),outerNode=filterPoints(outerNode,outerNode.next);return outerNode}function compareX(a,b){return a.x-b.x}function eliminateHole(hole,outerNode){if(outerNode=findHoleBridge(hole,outerNode)){var b=splitPolygon(outerNode,hole);filterPoints(b,b.next)}}function findHoleBridge(hole,outerNode){var m,p=outerNode,hx=hole.x,hy=hole.y,qx=-(1/0);do{if(hy<=p.y&&hy>=p.next.y){var x=p.x+(hy-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(hx>=x&&x>qx){if(qx=x,x===hx){if(hy===p.y)return p;if(hy===p.next.y)return p.next}m=p.x<p.next.x?p:p.next}}p=p.next}while(p!==outerNode);if(!m)return null;if(hx===qx)return m.prev;var tan,stop=m,mx=m.x,my=m.y,tanMin=1/0;for(p=m.next;p!==stop;)hx>=p.x&&p.x>=mx&&pointInTriangle(my>hy?hx:qx,hy,mx,my,my>hy?qx:hx,hy,p.x,p.y)&&(tan=Math.abs(hy-p.y)/(hx-p.x),(tanMin>tan||tan===tanMin&&p.x>m.x)&&locallyInside(p,hole)&&(m=p,tanMin=tan)),p=p.next;return m}function indexCurve(start,minX,minY,size){var p=start;do null===p.z&&(p.z=zOrder(p.x,p.y,minX,minY,size)),p.prevZ=p.prev,p.nextZ=p.next,p=p.next;while(p!==start);p.prevZ.nextZ=null,p.prevZ=null,sortLinked(p)}function sortLinked(list){var i,p,q,e,tail,numMerges,pSize,qSize,inSize=1;do{for(p=list,list=null,tail=null,numMerges=0;p;){for(numMerges++,q=p,pSize=0,i=0;inSize>i&&(pSize++,q=q.nextZ,q);i++);for(qSize=inSize;pSize>0||qSize>0&&q;)0===pSize?(e=q,q=q.nextZ,qSize--):0!==qSize&&q?p.z<=q.z?(e=p,p=p.nextZ,pSize--):(e=q,q=q.nextZ,qSize--):(e=p,p=p.nextZ,pSize--),tail?tail.nextZ=e:list=e,e.prevZ=tail,tail=e;p=q}tail.nextZ=null,inSize*=2}while(numMerges>1);return list}function zOrder(x,y,minX,minY,size){return x=32767*(x-minX)/size,y=32767*(y-minY)/size,x=16711935&(x|x<<8),x=252645135&(x|x<<4),x=858993459&(x|x<<2),x=1431655765&(x|x<<1),y=16711935&(y|y<<8),y=252645135&(y|y<<4),y=858993459&(y|y<<2),y=1431655765&(y|y<<1),x|y<<1}function getLeftmost(start){var p=start,leftmost=start;do p.x<leftmost.x&&(leftmost=p),p=p.next;while(p!==start);return leftmost}function pointInTriangle(ax,ay,bx,by,cx,cy,px,py){return(cx-px)*(ay-py)-(ax-px)*(cy-py)>=0&&(ax-px)*(by-py)-(bx-px)*(ay-py)>=0&&(bx-px)*(cy-py)-(cx-px)*(by-py)>=0}function isValidDiagonal(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!intersectsPolygon(a,b)&&locallyInside(a,b)&&locallyInside(b,a)&&middleInside(a,b)}function area(p,q,r){return(q.y-p.y)*(r.x-q.x)-(q.x-p.x)*(r.y-q.y)}function equals(p1,p2){return p1.x===p2.x&&p1.y===p2.y}function intersects(p1,q1,p2,q2){return equals(p1,q1)&&equals(p2,q2)||equals(p1,q2)&&equals(p2,q1)?!0:area(p1,q1,p2)>0!=area(p1,q1,q2)>0&&area(p2,q2,p1)>0!=area(p2,q2,q1)>0}function intersectsPolygon(a,b){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==b.i&&p.next.i!==b.i&&intersects(p,p.next,a,b))return!0;p=p.next}while(p!==a);return!1}function locallyInside(a,b){return area(a.prev,a,a.next)<0?area(a,b,a.next)>=0&&area(a,a.prev,b)>=0:area(a,b,a.prev)<0||area(a,a.next,b)<0}function middleInside(a,b){var p=a,inside=!1,px=(a.x+b.x)/2,py=(a.y+b.y)/2;do p.y>py!=p.next.y>py&&px<(p.next.x-p.x)*(py-p.y)/(p.next.y-p.y)+p.x&&(inside=!inside),p=p.next;while(p!==a);return inside}function splitPolygon(a,b){var a2=new Node(a.i,a.x,a.y),b2=new Node(b.i,b.x,b.y),an=a.next,bp=b.prev;return a.next=b,b.prev=a,a2.next=an,an.prev=a2,b2.next=a2,a2.prev=b2,bp.next=b2,b2.prev=bp,b2}function insertNode(i,x,y,last){var p=new Node(i,x,y);return last?(p.next=last.next,p.prev=last,last.next.prev=p,last.next=p):(p.prev=p,p.next=p),p}function removeNode(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function Node(i,x,y){this.i=i,this.x=x,this.y=y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(data,start,end,dim){for(var sum=0,i=start,j=end-dim;end>i;i+=dim)sum+=(data[j]-data[i])*(data[i+1]+data[j+1]),j=i;return sum}module.exports=earcut,earcut.deviation=function(data,holeIndices,dim,triangles){var hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,polygonArea=Math.abs(signedArea(data,0,outerLen,dim));if(hasHoles)for(var i=0,len=holeIndices.length;len>i;i++){var start=holeIndices[i]*dim,end=len-1>i?holeIndices[i+1]*dim:data.length;polygonArea-=Math.abs(signedArea(data,start,end,dim))}var trianglesArea=0;for(i=0;i<triangles.length;i+=3){var a=triangles[i]*dim,b=triangles[i+1]*dim,c=triangles[i+2]*dim;trianglesArea+=Math.abs((data[a]-data[c])*(data[b+1]-data[a+1])-(data[a]-data[b])*(data[c+1]-data[a+1]))}return 0===polygonArea&&0===trianglesArea?0:Math.abs((trianglesArea-polygonArea)/polygonArea)},earcut.flatten=function(data){for(var dim=data[0][0].length,result={vertices:[],holes:[],dimensions:dim},holeIndex=0,i=0;i<data.length;i++){for(var j=0;j<data[i].length;j++)for(var d=0;dim>d;d++)result.vertices.push(data[i][j][d]);i>0&&(holeIndex+=data[i-1].length,result.holes.push(holeIndex))}return result}},{}],305:[function(require,module,exports){"use strict";function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function EventEmitter(){}var has=Object.prototype.hasOwnProperty,prefix="function"!=typeof Object.create?"~":!1;EventEmitter.prototype._events=void 0,EventEmitter.prototype.eventNames=function(){var name,events=this._events,names=[];if(!events)return names;for(name in events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function(event,exists){var evt=prefix?prefix+event:event,available=this._events&&this._events[evt];if(exists)return!!available;if(!available)return[];if(available.fn)return[available.fn];for(var i=0,l=available.length,ee=new Array(l);l>i;i++)ee[i]=available[i].fn;return ee},EventEmitter.prototype.emit=function(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events||!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if("function"==typeof listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);len>i;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;length>i;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;default:if(!args)for(j=1,args=new Array(len-1);len>j;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function(event,fn,context){var listener=new EE(fn,context||this),evt=prefix?prefix+event:event;return this._events||(this._events=prefix?{}:Object.create(null)),this._events[evt]?this._events[evt].fn?this._events[evt]=[this._events[evt],listener]:this._events[evt].push(listener):this._events[evt]=listener,this},EventEmitter.prototype.once=function(event,fn,context){var listener=new EE(fn,context||this,!0),evt=prefix?prefix+event:event;return this._events||(this._events=prefix?{}:Object.create(null)),this._events[evt]?this._events[evt].fn?this._events[evt]=[this._events[evt],listener]:this._events[evt].push(listener):this._events[evt]=listener,this},EventEmitter.prototype.removeListener=function(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events||!this._events[evt])return this;var listeners=this._events[evt],events=[];if(fn)if(listeners.fn)(listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context)&&events.push(listeners);else for(var i=0,length=listeners.length;length>i;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);return events.length?this._events[evt]=1===events.length?events[0]:events:delete this._events[evt],this},EventEmitter.prototype.removeAllListeners=function(event){return this._events?(event?delete this._events[prefix?prefix+event:event]:this._events=prefix?{}:Object.create(null),this):this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.prefixed=prefix,"undefined"!=typeof module&&(module.exports=EventEmitter)},{}],306:[function(require,module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||0>n||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;throw TypeError('Uncaught, unspecified "error" event.')}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),len=listeners.length,i=0;len>i;i++)listeners[i].apply(this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace())),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(0>position)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)}},{}],307:[function(require,module,exports){!function(){var cache={},ctx=null,usingWebAudio=!0,noAudio=!1;try{"undefined"!=typeof AudioContext?ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?ctx=new webkitAudioContext:usingWebAudio=!1}catch(e){usingWebAudio=!1}if(!usingWebAudio)if("undefined"!=typeof Audio)try{new Audio}catch(e){noAudio=!0}else noAudio=!0;if(usingWebAudio){var masterGain="undefined"==typeof ctx.createGain?ctx.createGainNode():ctx.createGain();masterGain.gain.value=1,masterGain.connect(ctx.destination)}var HowlerGlobal=function(codecs){this._volume=1,this._muted=!1,this.usingWebAudio=usingWebAudio,this.ctx=ctx,this.noAudio=noAudio,this._howls=[],this._codecs=codecs,this.iOSAutoEnable=!0};HowlerGlobal.prototype={volume:function(vol){var self=this;if(vol=parseFloat(vol),vol>=0&&1>=vol){self._volume=vol,usingWebAudio&&(masterGain.gain.value=vol);for(var key in self._howls)if(self._howls.hasOwnProperty(key)&&self._howls[key]._webAudio===!1)for(var i=0;i<self._howls[key]._audioNode.length;i++)self._howls[key]._audioNode[i].volume=self._howls[key]._volume*self._volume;return self}return usingWebAudio?masterGain.gain.value:self._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(muted){var self=this;self._muted=muted,usingWebAudio&&(masterGain.gain.value=muted?0:self._volume);for(var key in self._howls)if(self._howls.hasOwnProperty(key)&&self._howls[key]._webAudio===!1)for(var i=0;i<self._howls[key]._audioNode.length;i++)self._howls[key]._audioNode[i].muted=muted},codecs:function(ext){return this._codecs[ext]},_enableiOSAudio:function(){var self=this;if(!ctx||!self._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){self._iOSEnabled=!1;var unlock=function(){var buffer=ctx.createBuffer(1,1,22050),source=ctx.createBufferSource();source.buffer=buffer,source.connect(ctx.destination),"undefined"==typeof source.start?source.noteOn(0):source.start(0),setTimeout(function(){source.playbackState!==source.PLAYING_STATE&&source.playbackState!==source.FINISHED_STATE||(self._iOSEnabled=!0,self.iOSAutoEnable=!1,window.removeEventListener("touchstart",unlock,!1))},0)};return window.addEventListener("touchstart",unlock,!1),self}}};var audioTest=null,codecs={};noAudio||(audioTest=new Audio,codecs={mp3:!!audioTest.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!audioTest.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!audioTest.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!audioTest.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(audioTest.canPlayType("audio/x-m4a;")||audioTest.canPlayType("audio/m4a;")||audioTest.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(audioTest.canPlayType("audio/x-mp4;")||audioTest.canPlayType("audio/mp4;")||audioTest.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var Howler=new HowlerGlobal(codecs),Howl=function(o){var self=this;self._autoplay=o.autoplay||!1,self._buffer=o.buffer||!1,self._duration=o.duration||0,self._format=o.format||null,self._loop=o.loop||!1,self._loaded=!1,self._sprite=o.sprite||{},self._src=o.src||"",self._pos3d=o.pos3d||[0,0,-.5],self._volume=void 0!==o.volume?o.volume:1,self._urls=o.urls||[],self._rate=o.rate||1,self._model=o.model||null,self._onload=[o.onload||function(){}],self._onloaderror=[o.onloaderror||function(){}],self._onend=[o.onend||function(){}],self._onpause=[o.onpause||function(){}],self._onplay=[o.onplay||function(){}],self._onendTimer=[],self._webAudio=usingWebAudio&&!self._buffer,self._audioNode=[],self._webAudio&&self._setupAudioNode(),"undefined"!=typeof ctx&&ctx&&Howler.iOSAutoEnable&&Howler._enableiOSAudio(),Howler._howls.push(self),self.load()};if(Howl.prototype={load:function(){var self=this,url=null;if(noAudio)return void self.on("loaderror");for(var i=0;i<self._urls.length;i++){var ext,urlItem;if(self._format)ext=self._format;else{if(urlItem=self._urls[i],ext=/^data:audio\/([^;,]+);/i.exec(urlItem),ext||(ext=/\.([^.]+)$/.exec(urlItem.split("?",1)[0])),!ext)return void self.on("loaderror");ext=ext[1].toLowerCase()}if(codecs[ext]){url=self._urls[i];break}}if(!url)return void self.on("loaderror");if(self._src=url,self._webAudio)loadBuffer(self,url);else{var newNode=new Audio;newNode.addEventListener("error",function(){newNode.error&&4===newNode.error.code&&(HowlerGlobal.noAudio=!0),self.on("loaderror",{type:newNode.error?newNode.error.code:0})},!1),self._audioNode.push(newNode),newNode.src=url,newNode._pos=0,newNode.preload="auto",newNode.volume=Howler._muted?0:self._volume*Howler.volume();var listener=function(){self._duration=Math.ceil(10*newNode.duration)/10,0===Object.getOwnPropertyNames(self._sprite).length&&(self._sprite={_default:[0,1e3*self._duration]}),self._loaded||(self._loaded=!0,self.on("load")),self._autoplay&&self.play(),newNode.removeEventListener("canplaythrough",listener,!1)};newNode.addEventListener("canplaythrough",listener,!1),newNode.load()}return self},urls:function(urls){var self=this;return urls?(self.stop(),self._urls="string"==typeof urls?[urls]:urls,self._loaded=!1,self.load(),self):self._urls},play:function(sprite,callback){var self=this;return"function"==typeof sprite&&(callback=sprite),sprite&&"function"!=typeof sprite||(sprite="_default"),self._loaded?self._sprite[sprite]?(self._inactiveNode(function(node){node._sprite=sprite;var pos=node._pos>0?node._pos:self._sprite[sprite][0]/1e3,duration=0;self._webAudio?(duration=self._sprite[sprite][1]/1e3-node._pos,node._pos>0&&(pos=self._sprite[sprite][0]/1e3+pos)):duration=self._sprite[sprite][1]/1e3-(pos-self._sprite[sprite][0]/1e3);var timerId,loop=!(!self._loop&&!self._sprite[sprite][2]),soundId="string"==typeof callback?callback:Math.round(Date.now()*Math.random())+"";if(function(){
var data={id:soundId,sprite:sprite,loop:loop};timerId=setTimeout(function(){!self._webAudio&&loop&&self.stop(data.id).play(sprite,data.id),self._webAudio&&!loop&&(self._nodeById(data.id).paused=!0,self._nodeById(data.id)._pos=0,self._clearEndTimer(data.id)),self._webAudio||loop||self.stop(data.id),self.on("end",soundId)},1e3*duration),self._onendTimer.push({timer:timerId,id:data.id})}(),self._webAudio){var loopStart=self._sprite[sprite][0]/1e3,loopEnd=self._sprite[sprite][1]/1e3;node.id=soundId,node.paused=!1,refreshBuffer(self,[loop,loopStart,loopEnd],soundId),self._playStart=ctx.currentTime,node.gain.value=self._volume,"undefined"==typeof node.bufferSource.start?node.bufferSource.noteGrainOn(0,pos,duration):node.bufferSource.start(0,pos,duration)}else{if(4!==node.readyState&&(node.readyState||!navigator.isCocoonJS))return self._clearEndTimer(soundId),function(){var sound=self,playSprite=sprite,fn=callback,newNode=node,listener=function(){sound.play(playSprite,fn),newNode.removeEventListener("canplaythrough",listener,!1)};newNode.addEventListener("canplaythrough",listener,!1)}(),self;node.readyState=4,node.id=soundId,node.currentTime=pos,node.muted=Howler._muted||node.muted,node.volume=self._volume*Howler.volume(),setTimeout(function(){node.play()},0)}return self.on("play"),"function"==typeof callback&&callback(soundId),self}),self):("function"==typeof callback&&callback(),self):(self.on("load",function(){self.play(sprite,callback)}),self)},pause:function(id){var self=this;if(!self._loaded)return self.on("play",function(){self.pause(id)}),self;self._clearEndTimer(id);var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode)if(activeNode._pos=self.pos(null,id),self._webAudio){if(!activeNode.bufferSource||activeNode.paused)return self;activeNode.paused=!0,"undefined"==typeof activeNode.bufferSource.stop?activeNode.bufferSource.noteOff(0):activeNode.bufferSource.stop(0)}else activeNode.pause();return self.on("pause"),self},stop:function(id){var self=this;if(!self._loaded)return self.on("play",function(){self.stop(id)}),self;self._clearEndTimer(id);var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode)if(activeNode._pos=0,self._webAudio){if(!activeNode.bufferSource||activeNode.paused)return self;activeNode.paused=!0,"undefined"==typeof activeNode.bufferSource.stop?activeNode.bufferSource.noteOff(0):activeNode.bufferSource.stop(0)}else isNaN(activeNode.duration)||(activeNode.pause(),activeNode.currentTime=0);return self},mute:function(id){var self=this;if(!self._loaded)return self.on("play",function(){self.mute(id)}),self;var activeNode=id?self._nodeById(id):self._activeNode();return activeNode&&(self._webAudio?activeNode.gain.value=0:activeNode.muted=!0),self},unmute:function(id){var self=this;if(!self._loaded)return self.on("play",function(){self.unmute(id)}),self;var activeNode=id?self._nodeById(id):self._activeNode();return activeNode&&(self._webAudio?activeNode.gain.value=self._volume:activeNode.muted=!1),self},volume:function(vol,id){var self=this;if(vol=parseFloat(vol),vol>=0&&1>=vol){if(self._volume=vol,!self._loaded)return self.on("play",function(){self.volume(vol,id)}),self;var activeNode=id?self._nodeById(id):self._activeNode();return activeNode&&(self._webAudio?activeNode.gain.value=vol:activeNode.volume=vol*Howler.volume()),self}return self._volume},loop:function(loop){var self=this;return"boolean"==typeof loop?(self._loop=loop,self):self._loop},sprite:function(sprite){var self=this;return"object"==typeof sprite?(self._sprite=sprite,self):self._sprite},pos:function(pos,id){var self=this;if(!self._loaded)return self.on("load",function(){self.pos(pos)}),"number"==typeof pos?self:self._pos||0;pos=parseFloat(pos);var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode)return pos>=0?(self.pause(id),activeNode._pos=pos,self.play(activeNode._sprite,id),self):self._webAudio?activeNode._pos+(ctx.currentTime-self._playStart):activeNode.currentTime;if(pos>=0)return self;for(var i=0;i<self._audioNode.length;i++)if(self._audioNode[i].paused&&4===self._audioNode[i].readyState)return self._webAudio?self._audioNode[i]._pos:self._audioNode[i].currentTime},pos3d:function(x,y,z,id){var self=this;if(y="undefined"!=typeof y&&y?y:0,z="undefined"!=typeof z&&z?z:-.5,!self._loaded)return self.on("play",function(){self.pos3d(x,y,z,id)}),self;if(!(x>=0||0>x))return self._pos3d;if(self._webAudio){var activeNode=id?self._nodeById(id):self._activeNode();activeNode&&(self._pos3d=[x,y,z],activeNode.panner.setPosition(x,y,z),activeNode.panner.panningModel=self._model||"HRTF")}return self},fade:function(from,to,len,callback,id){var self=this,diff=Math.abs(from-to),dir=from>to?"down":"up",steps=diff/.01,stepTime=len/steps;if(!self._loaded)return self.on("load",function(){self.fade(from,to,len,callback,id)}),self;self.volume(from,id);for(var i=1;steps>=i;i++)!function(){var change=self._volume+("up"===dir?.01:-.01)*i,vol=Math.round(1e3*change)/1e3,toVol=to;setTimeout(function(){self.volume(vol,id),vol===toVol&&callback&&callback()},stepTime*i)}()},fadeIn:function(to,len,callback){return this.volume(0).play().fade(0,to,len,callback)},fadeOut:function(to,len,callback,id){var self=this;return self.fade(self._volume,to,len,function(){callback&&callback(),self.pause(id),self.on("end")},id)},_nodeById:function(id){for(var self=this,node=self._audioNode[0],i=0;i<self._audioNode.length;i++)if(self._audioNode[i].id===id){node=self._audioNode[i];break}return node},_activeNode:function(){for(var self=this,node=null,i=0;i<self._audioNode.length;i++)if(!self._audioNode[i].paused){node=self._audioNode[i];break}return self._drainPool(),node},_inactiveNode:function(callback){for(var self=this,node=null,i=0;i<self._audioNode.length;i++)if(self._audioNode[i].paused&&4===self._audioNode[i].readyState){callback(self._audioNode[i]),node=!0;break}if(self._drainPool(),!node){var newNode;if(self._webAudio)newNode=self._setupAudioNode(),callback(newNode);else{self.load(),newNode=self._audioNode[self._audioNode.length-1];var listenerEvent=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",listener=function(){newNode.removeEventListener(listenerEvent,listener,!1),callback(newNode)};newNode.addEventListener(listenerEvent,listener,!1)}}},_drainPool:function(){var i,self=this,inactive=0;for(i=0;i<self._audioNode.length;i++)self._audioNode[i].paused&&inactive++;for(i=self._audioNode.length-1;i>=0&&!(5>=inactive);i--)self._audioNode[i].paused&&(self._webAudio&&self._audioNode[i].disconnect(0),inactive--,self._audioNode.splice(i,1))},_clearEndTimer:function(soundId){for(var self=this,index=0,i=0;i<self._onendTimer.length;i++)if(self._onendTimer[i].id===soundId){index=i;break}var timer=self._onendTimer[index];timer&&(clearTimeout(timer.timer),self._onendTimer.splice(index,1))},_setupAudioNode:function(){var self=this,node=self._audioNode,index=self._audioNode.length;return node[index]="undefined"==typeof ctx.createGain?ctx.createGainNode():ctx.createGain(),node[index].gain.value=self._volume,node[index].paused=!0,node[index]._pos=0,node[index].readyState=4,node[index].connect(masterGain),node[index].panner=ctx.createPanner(),node[index].panner.panningModel=self._model||"equalpower",node[index].panner.setPosition(self._pos3d[0],self._pos3d[1],self._pos3d[2]),node[index].panner.connect(node[index]),node[index]},on:function(event,fn){var self=this,events=self["_on"+event];if("function"==typeof fn)events.push(fn);else for(var i=0;i<events.length;i++)fn?events[i].call(self,fn):events[i].call(self);return self},off:function(event,fn){var self=this,events=self["_on"+event],fnString=fn?fn.toString():null;if(fnString){for(var i=0;i<events.length;i++)if(fnString===events[i].toString()){events.splice(i,1);break}}else self["_on"+event]=[];return self},unload:function(){for(var self=this,nodes=self._audioNode,i=0;i<self._audioNode.length;i++)nodes[i].paused||(self.stop(nodes[i].id),self.on("end",nodes[i].id)),self._webAudio?nodes[i].disconnect(0):nodes[i].src="";for(i=0;i<self._onendTimer.length;i++)clearTimeout(self._onendTimer[i].timer);var index=Howler._howls.indexOf(self);null!==index&&index>=0&&Howler._howls.splice(index,1),delete cache[self._src],self=null}},usingWebAudio)var loadBuffer=function(obj,url){if(url in cache)return obj._duration=cache[url].duration,void loadSound(obj);if(/^data:[^;]+;base64,/.test(url)){for(var data=atob(url.split(",")[1]),dataView=new Uint8Array(data.length),i=0;i<data.length;++i)dataView[i]=data.charCodeAt(i);decodeAudioData(dataView.buffer,obj,url)}else{var xhr=new XMLHttpRequest;xhr.open("GET",url,!0),xhr.responseType="arraybuffer",xhr.onload=function(){decodeAudioData(xhr.response,obj,url)},xhr.onerror=function(){obj._webAudio&&(obj._buffer=!0,obj._webAudio=!1,obj._audioNode=[],delete obj._gainNode,delete cache[url],obj.load())};try{xhr.send()}catch(e){xhr.onerror()}}},decodeAudioData=function(arraybuffer,obj,url){ctx.decodeAudioData(arraybuffer,function(buffer){buffer&&(cache[url]=buffer,loadSound(obj,buffer))},function(err){obj.on("loaderror")})},loadSound=function(obj,buffer){obj._duration=buffer?buffer.duration:obj._duration,0===Object.getOwnPropertyNames(obj._sprite).length&&(obj._sprite={_default:[0,1e3*obj._duration]}),obj._loaded||(obj._loaded=!0,obj.on("load")),obj._autoplay&&obj.play()},refreshBuffer=function(obj,loop,id){var node=obj._nodeById(id);node.bufferSource=ctx.createBufferSource(),node.bufferSource.buffer=cache[obj._src],node.bufferSource.connect(node.panner),node.bufferSource.loop=loop[0],loop[0]&&(node.bufferSource.loopStart=loop[1],node.bufferSource.loopEnd=loop[1]+loop[2]),node.bufferSource.playbackRate.value=obj._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:Howler,Howl:Howl}}),"undefined"!=typeof exports&&(exports.Howler=Howler,exports.Howl=Howl),"undefined"!=typeof window&&(window.Howler=Howler,window.Howl=Howl)}()},{}],308:[function(require,module,exports){var ever=require("ever"),vkey=require("vkey"),max=Math.max;module.exports=function(el,bindings,state){function clear(){for(var key in bindings)state[bindings[key]]=0,measured[key]=1}function enable_disable(on_or_off){return function(){return clear(),enabled=on_or_off,this}}function wrapped(fn){return function(ev){enabled&&fn(ev)}}function onoff(find,on_or_off){return function(ev){var key=find(ev),binding=bindings[key];binding&&(state[binding]+=on_or_off?max(measured[key]--,0):-(measured[key]=1),!on_or_off&&state[binding]<0&&(state[binding]=0))}}function mouse(ev){return"<mouse "+ev.which+">"}function kb(ev){return vkey[ev.keyCode]||ev.char}var root=null;if(void 0===bindings||!el.ownerDocument){state=bindings,bindings=el,el=this.document.body;try{root=window.top.document.body}catch(e){}}var ee=ever(el),re=root?ever(root):ee,measured={},enabled=!0;state=state||{},state.bindings=bindings;for(var key in bindings){if("enabled"===bindings[key]||"enable"===bindings[key]||"disable"===bindings[key]||"destroy"===bindings[key]||"bindings"===bindings[key])throw new Error(bindings[key]+" is reserved");state[bindings[key]]=0,measured[key]=1}return re.on("keyup",wrapped(onoff(kb,!1))),re.on("keydown",wrapped(onoff(kb,!0))),ee.on("mouseup",wrapped(onoff(mouse,!1))),ee.on("mousedown",wrapped(onoff(mouse,!0))),state.enabled=function(){return enabled},state.enable=enable_disable(!0),state.disable=enable_disable(!1),state.destroy=function(){re.removeAllListeners(),ee.removeAllListeners()},state}},{ever:309,vkey:312}],309:[function(require,module,exports){function Ever(elem){this.element=elem}function isEvent(ev){var s=Object.prototype.toString.call(ev);return/\[object \S+Event\]/.test(s)}var EventEmitter=require("events").EventEmitter;module.exports=function(elem){return new Ever(elem)},Ever.prototype=new EventEmitter,Ever.prototype.on=function(name,cb,useCapture){return this._events||(this._events={}),this._events[name]||(this._events[name]=[]),this._events[name].push(cb),this.element.addEventListener(name,cb,useCapture||!1),this},Ever.prototype.addListener=Ever.prototype.on,Ever.prototype.removeListener=function(type,listener,useCapture){this._events||(this._events={}),this.element.removeEventListener(type,listener,useCapture||!1);var xs=this.listeners(type),ix=xs.indexOf(listener);return ix>=0&&xs.splice(ix,1),this},Ever.prototype.removeAllListeners=function(type){function removeAll(t){for(var xs=self.listeners(t),i=0;i<xs.length;i++)self.removeListener(t,xs[i])}var self=this;if(type)removeAll(type);else if(self._events)for(var key in self._events)key&&removeAll(key);return EventEmitter.prototype.removeAllListeners.apply(self,arguments)};var initSignatures=require("./init.json");Ever.prototype.emit=function(name,ev){if("object"==typeof name&&(ev=name,name=ev.type),!isEvent(ev)){var type=Ever.typeOf(name),opts=ev||{};void 0===opts.type&&(opts.type=name),ev=document.createEvent(type+"s");for(var init="function"==typeof ev["init"+type]?"init"+type:"initEvent",sig=initSignatures[init],used={},args=[],i=0;i<sig.length;i++){var key=sig[i];args.push(opts[key]),used[key]=!0}ev[init].apply(ev,args);for(var key in opts)used[key]||(ev[key]=opts[key])}return this.element.dispatchEvent(ev)},Ever.types=require("./types.json"),Ever.typeOf=function(){var types={};for(var key in Ever.types)for(var ts=Ever.types[key],i=0;i<ts.length;i++)types[ts[i]]=key;return function(name){return types[name]||"Event"}}()},{"./init.json":310,"./types.json":311,events:306}],310:[function(require,module,exports){module.exports={initEvent:["type","canBubble","cancelable"],initUIEvent:["type","canBubble","cancelable","view","detail"],initMouseEvent:["type","canBubble","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],initMutationEvent:["type","canBubble","cancelable","relatedNode","prevValue","newValue","attrName","attrChange"]}},{}],311:[function(require,module,exports){module.exports={MouseEvent:["click","mousedown","mouseup","mouseover","mousemove","mouseout"],KeyBoardEvent:["keydown","keyup","keypress"],MutationEvent:["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"],HTMLEvent:["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],UIEvent:["DOMFocusIn","DOMFocusOut","DOMActivate"]}},{}],312:[function(require,module,exports){var i,ua="undefined"!=typeof window?window.navigator.userAgent:"",isOSX=/OS X/.test(ua),isOpera=/Opera/.test(ua),maybeFirefox=!/like Gecko/.test(ua)&&!isOpera,output=module.exports={0:isOSX?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:isOSX?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num-->",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:isOSX&&maybeFirefox?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:isOpera?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(i=58;65>i;++i)output[i]=String.fromCharCode(i);for(i=48;58>i;++i)output[i]=i-48+"";for(i=65;91>i;++i)output[i]=String.fromCharCode(i);for(i=96;106>i;++i)output[i]="<num-"+(i-96)+">";for(i=112;136>i;++i)output[i]="F"+(i-111)},{}],313:[function(require,module,exports){"use strict";function toObject(val){if(null===val||void 0===val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}var hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=Object.assign||function(target,source){for(var from,symbols,to=toObject(target),s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from)hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(Object.getOwnPropertySymbols){symbols=Object.getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},{}],314:[function(require,module,exports){(function(process){function normalizeArray(parts,allowAboveRoot){for(var up=0,i=parts.length-1;i>=0;i--){var last=parts[i];"."===last?parts.splice(i,1):".."===last?(parts.splice(i,1),up++):up&&(parts.splice(i,1),up--)}if(allowAboveRoot)for(;up--;up)parts.unshift("..");return parts}function filter(xs,f){if(xs.filter)return xs.filter(f);for(var res=[],i=0;i<xs.length;i++)f(xs[i],i,xs)&&res.push(xs[i]);return res}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(filename){return splitPathRe.exec(filename).slice(1)};exports.resolve=function(){for(var resolvedPath="",resolvedAbsolute=!1,i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if("string"!=typeof path)throw new TypeError("Arguments to path.resolve must be strings");path&&(resolvedPath=path+"/"+resolvedPath,resolvedAbsolute="/"===path.charAt(0))}return resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/"),(resolvedAbsolute?"/":"")+resolvedPath||"."},exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash="/"===substr(path,-1);return path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/"),path||isAbsolute||(path="."),path&&trailingSlash&&(path+="/"),(isAbsolute?"/":"")+path},exports.isAbsolute=function(path){return"/"===path.charAt(0)},exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){if("string"!=typeof p)throw new TypeError("Arguments to path.join must be strings");return p}).join("/"))},exports.relative=function(from,to){function trim(arr){for(var start=0;start<arr.length&&""===arr[start];start++);for(var end=arr.length-1;end>=0&&""===arr[end];end--);return start>end?[]:arr.slice(start,end-start+1)}from=exports.resolve(from).substr(1),to=exports.resolve(to).substr(1);for(var fromParts=trim(from.split("/")),toParts=trim(to.split("/")),length=Math.min(fromParts.length,toParts.length),samePartsLength=length,i=0;length>i;i++)if(fromParts[i]!==toParts[i]){samePartsLength=i;break}for(var outputParts=[],i=samePartsLength;i<fromParts.length;i++)outputParts.push("..");return outputParts=outputParts.concat(toParts.slice(samePartsLength)),outputParts.join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(path){var result=splitPath(path),root=result[0],dir=result[1];return root||dir?(dir&&(dir=dir.substr(0,dir.length-1)),root+dir):"."},exports.basename=function(path,ext){var f=splitPath(path)[2];return ext&&f.substr(-1*ext.length)===ext&&(f=f.substr(0,f.length-ext.length)),f},exports.extname=function(path){return splitPath(path)[3]};var substr="b"==="ab".substr(-1)?function(str,start,len){return str.substr(start,len)}:function(str,start,len){return 0>start&&(start=str.length+start),str.substr(start,len)}}).call(this,require("_process"))},{_process:433}],315:[function(require,module,exports){(function(process){(function(){var getNanoSeconds,hrtime,loadTime;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(module.exports=function(){return(getNanoSeconds()-loadTime)/1e6},hrtime=process.hrtime,getNanoSeconds=function(){var hr;return hr=hrtime(),1e9*hr[0]+hr[1]},loadTime=getNanoSeconds()):Date.now?(module.exports=function(){return Date.now()-loadTime},loadTime=Date.now()):(module.exports=function(){return(new Date).getTime()-loadTime},loadTime=(new Date).getTime())}).call(this)}).call(this,require("_process"))},{_process:433}],316:[function(require,module,exports){(function(process,global){!function(){function noop(){}function identity(v){return v}function toBool(v){return!!v}function notId(v){return!v}function only_once(fn){return function(){if(null===fn)throw new Error("Callback was already called.");fn.apply(this,arguments),fn=null}}function _once(fn){return function(){null!==fn&&(fn.apply(this,arguments),fn=null)}}function _isArrayLike(arr){return _isArray(arr)||"number"==typeof arr.length&&arr.length>=0&&arr.length%1===0}function _arrayEach(arr,iterator){for(var index=-1,length=arr.length;++index<length;)iterator(arr[index],index,arr)}function _map(arr,iterator){for(var index=-1,length=arr.length,result=Array(length);++index<length;)result[index]=iterator(arr[index],index,arr);return result}function _range(count){return _map(Array(count),function(v,i){return i})}function _reduce(arr,iterator,memo){return _arrayEach(arr,function(x,i,a){memo=iterator(memo,x,i,a)}),memo}function _forEachOf(object,iterator){_arrayEach(_keys(object),function(key){iterator(object[key],key)})}function _indexOf(arr,item){for(var i=0;i<arr.length;i++)if(arr[i]===item)return i;return-1}function _keyIterator(coll){var len,keys,i=-1;return _isArrayLike(coll)?(len=coll.length,function(){return i++,len>i?i:null}):(keys=_keys(coll),len=keys.length,function(){return i++,len>i?keys[i]:null})}function _restParam(func,startIndex){return startIndex=null==startIndex?func.length-1:+startIndex,function(){for(var length=Math.max(arguments.length-startIndex,0),rest=Array(length),index=0;length>index;index++)rest[index]=arguments[index+startIndex];switch(startIndex){case 0:return func.call(this,rest);case 1:return func.call(this,arguments[0],rest)}}}function _withoutIndex(iterator){return function(value,index,callback){return iterator(value,callback)}}function _eachOfLimit(limit){return function(obj,iterator,callback){callback=_once(callback||noop),obj=obj||[];var nextKey=_keyIterator(obj);if(0>=limit)return callback(null);var done=!1,running=0,errored=!1;!function replenish(){if(done&&0>=running)return callback(null);for(;limit>running&&!errored;){var key=nextKey();if(null===key)return done=!0,void(0>=running&&callback(null));running+=1,iterator(obj[key],key,only_once(function(err){running-=1,err?(callback(err),errored=!0):replenish()}))}}()}}function doParallel(fn){return function(obj,iterator,callback){return fn(async.eachOf,obj,iterator,callback)}}function doParallelLimit(fn){return function(obj,limit,iterator,callback){return fn(_eachOfLimit(limit),obj,iterator,callback)}}function doSeries(fn){return function(obj,iterator,callback){return fn(async.eachOfSeries,obj,iterator,callback)}}function _asyncMap(eachfn,arr,iterator,callback){callback=_once(callback||noop),arr=arr||[];var results=_isArrayLike(arr)?[]:{};eachfn(arr,function(value,index,callback){iterator(value,function(err,v){results[index]=v,callback(err)})},function(err){callback(err,results)})}function _filter(eachfn,arr,iterator,callback){var results=[];eachfn(arr,function(x,index,callback){iterator(x,function(v){v&&results.push({index:index,value:x}),callback()})},function(){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})}function _reject(eachfn,arr,iterator,callback){_filter(eachfn,arr,function(value,cb){iterator(value,function(v){cb(!v)})},callback)}function _createTester(eachfn,check,getResult){return function(arr,limit,iterator,cb){function done(){cb&&cb(getResult(!1,void 0))}function iteratee(x,_,callback){return cb?void iterator(x,function(v){cb&&check(v)&&(cb(getResult(!0,x)),cb=iterator=!1),callback()}):callback()}arguments.length>3?eachfn(arr,limit,iteratee,done):(cb=iterator,iterator=limit,eachfn(arr,iteratee,done))}}function _findGetResult(v,x){return x}function _parallel(eachfn,tasks,callback){callback=callback||noop;var results=_isArrayLike(tasks)?[]:{};eachfn(tasks,function(task,key,callback){task(_restParam(function(err,args){args.length<=1&&(args=args[0]),results[key]=args,callback(err)}))},function(err){callback(err,results)})}function _concat(eachfn,arr,fn,callback){var result=[];eachfn(arr,function(x,index,cb){fn(x,function(err,y){result=result.concat(y||[]),cb(err)})},function(err){callback(err,result)})}function _queue(worker,concurrency,payload){function _insert(q,data,pos,callback){if(null!=callback&&"function"!=typeof callback)throw new Error("task callback must be a function");return q.started=!0,_isArray(data)||(data=[data]),0===data.length&&q.idle()?async.setImmediate(function(){q.drain()}):(_arrayEach(data,function(task){var item={data:task,callback:callback||noop};pos?q.tasks.unshift(item):q.tasks.push(item),q.tasks.length===q.concurrency&&q.saturated()}),void async.setImmediate(q.process))}function _next(q,tasks){return function(){workers-=1;var removed=!1,args=arguments;_arrayEach(tasks,function(task){_arrayEach(workersList,function(worker,index){worker!==task||removed||(workersList.splice(index,1),removed=!0)}),task.callback.apply(task,args)}),q.tasks.length+workers===0&&q.drain(),q.process()}}if(null==concurrency)concurrency=1;else if(0===concurrency)throw new Error("Concurrency must not be zero");var workers=0,workersList=[],q={tasks:[],concurrency:concurrency,payload:payload,saturated:noop,empty:noop,drain:noop,started:!1,paused:!1,push:function(data,callback){_insert(q,data,!1,callback)},kill:function(){q.drain=noop,q.tasks=[]},unshift:function(data,callback){_insert(q,data,!0,callback)},process:function(){for(;!q.paused&&workers<q.concurrency&&q.tasks.length;){var tasks=q.payload?q.tasks.splice(0,q.payload):q.tasks.splice(0,q.tasks.length),data=_map(tasks,function(task){return task.data});0===q.tasks.length&&q.empty(),workers+=1,workersList.push(tasks[0]);var cb=only_once(_next(q,tasks));worker(data,cb)}},length:function(){return q.tasks.length},running:function(){return workers},workersList:function(){return workersList},idle:function(){return q.tasks.length+workers===0},pause:function(){q.paused=!0},resume:function(){if(q.paused!==!1){q.paused=!1;for(var resumeCount=Math.min(q.concurrency,q.tasks.length),w=1;resumeCount>=w;w++)async.setImmediate(q.process)}}};return q}function _console_fn(name){return _restParam(function(fn,args){fn.apply(null,args.concat([_restParam(function(err,args){"object"==typeof console&&(err?console.error&&console.error(err):console[name]&&_arrayEach(args,function(x){console[name](x)}))})]))})}function _times(mapper){return function(count,iterator,callback){mapper(_range(count),iterator,callback)}}function _applyEach(eachfn){return _restParam(function(fns,args){var go=_restParam(function(args){var that=this,callback=args.pop();return eachfn(fns,function(fn,_,cb){fn.apply(that,args.concat([cb]))},callback)});return args.length?go.apply(this,args):go})}function ensureAsync(fn){return _restParam(function(args){var callback=args.pop();args.push(function(){var innerArgs=arguments;sync?async.setImmediate(function(){callback.apply(null,innerArgs)}):callback.apply(null,innerArgs)});var sync=!0;fn.apply(this,args),sync=!1})}var previous_async,async={},root="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!=root&&(previous_async=root.async),async.noConflict=function(){return root.async=previous_async,async};var _toString=Object.prototype.toString,_isArray=Array.isArray||function(obj){return"[object Array]"===_toString.call(obj)},_isObject=function(obj){var type=typeof obj;return"function"===type||"object"===type&&!!obj},_keys=Object.keys||function(obj){var keys=[];for(var k in obj)obj.hasOwnProperty(k)&&keys.push(k);return keys},_setImmediate="function"==typeof setImmediate&&setImmediate,_delay=_setImmediate?function(fn){_setImmediate(fn)}:function(fn){setTimeout(fn,0)};"object"==typeof process&&"function"==typeof process.nextTick?async.nextTick=process.nextTick:async.nextTick=_delay,async.setImmediate=_setImmediate?_delay:async.nextTick,async.forEach=async.each=function(arr,iterator,callback){return async.eachOf(arr,_withoutIndex(iterator),callback)},async.forEachSeries=async.eachSeries=function(arr,iterator,callback){return async.eachOfSeries(arr,_withoutIndex(iterator),callback)},async.forEachLimit=async.eachLimit=function(arr,limit,iterator,callback){return _eachOfLimit(limit)(arr,_withoutIndex(iterator),callback)},async.forEachOf=async.eachOf=function(object,iterator,callback){function done(err){completed--,err?callback(err):null===key&&0>=completed&&callback(null)}callback=_once(callback||noop),object=object||[];for(var key,iter=_keyIterator(object),completed=0;null!=(key=iter());)completed+=1,iterator(object[key],key,only_once(done));0===completed&&callback(null)},async.forEachOfSeries=async.eachOfSeries=function(obj,iterator,callback){function iterate(){var sync=!0;return null===key?callback(null):(iterator(obj[key],key,only_once(function(err){if(err)callback(err);else{if(key=nextKey(),null===key)return callback(null);sync?async.setImmediate(iterate):iterate()}})),void(sync=!1))}callback=_once(callback||noop),obj=obj||[];var nextKey=_keyIterator(obj),key=nextKey();iterate()},async.forEachOfLimit=async.eachOfLimit=function(obj,limit,iterator,callback){_eachOfLimit(limit)(obj,iterator,callback)},async.map=doParallel(_asyncMap),async.mapSeries=doSeries(_asyncMap),async.mapLimit=doParallelLimit(_asyncMap),async.inject=async.foldl=async.reduce=function(arr,memo,iterator,callback){async.eachOfSeries(arr,function(x,i,callback){iterator(memo,x,function(err,v){memo=v,callback(err)})},function(err){callback(err,memo)})},async.foldr=async.reduceRight=function(arr,memo,iterator,callback){var reversed=_map(arr,identity).reverse();async.reduce(reversed,memo,iterator,callback)},async.transform=function(arr,memo,iterator,callback){3===arguments.length&&(callback=iterator,iterator=memo,memo=_isArray(arr)?[]:{}),async.eachOf(arr,function(v,k,cb){iterator(memo,v,k,cb)},function(err){callback(err,memo)})},async.select=async.filter=doParallel(_filter),async.selectLimit=async.filterLimit=doParallelLimit(_filter),async.selectSeries=async.filterSeries=doSeries(_filter),async.reject=doParallel(_reject),async.rejectLimit=doParallelLimit(_reject),async.rejectSeries=doSeries(_reject),async.any=async.some=_createTester(async.eachOf,toBool,identity),async.someLimit=_createTester(async.eachOfLimit,toBool,identity),async.all=async.every=_createTester(async.eachOf,notId,notId),async.everyLimit=_createTester(async.eachOfLimit,notId,notId),async.detect=_createTester(async.eachOf,identity,_findGetResult),async.detectSeries=_createTester(async.eachOfSeries,identity,_findGetResult),async.detectLimit=_createTester(async.eachOfLimit,identity,_findGetResult),async.sortBy=function(arr,iterator,callback){function comparator(left,right){var a=left.criteria,b=right.criteria;return b>a?-1:a>b?1:0}async.map(arr,function(x,callback){iterator(x,function(err,criteria){err?callback(err):callback(null,{value:x,criteria:criteria})})},function(err,results){return err?callback(err):void callback(null,_map(results.sort(comparator),function(x){return x.value}))})},async.auto=function(tasks,concurrency,callback){
function addListener(fn){listeners.unshift(fn)}function removeListener(fn){var idx=_indexOf(listeners,fn);idx>=0&&listeners.splice(idx,1)}function taskComplete(){remainingTasks--,_arrayEach(listeners.slice(0),function(fn){fn()})}"function"==typeof arguments[1]&&(callback=concurrency,concurrency=null),callback=_once(callback||noop);var keys=_keys(tasks),remainingTasks=keys.length;if(!remainingTasks)return callback(null);concurrency||(concurrency=remainingTasks);var results={},runningTasks=0,hasError=!1,listeners=[];addListener(function(){remainingTasks||callback(null,results)}),_arrayEach(keys,function(k){function ready(){return concurrency>runningTasks&&_reduce(requires,function(a,x){return a&&results.hasOwnProperty(x)},!0)&&!results.hasOwnProperty(k)}function listener(){ready()&&(runningTasks++,removeListener(listener),task[task.length-1](taskCallback,results))}if(!hasError){for(var dep,task=_isArray(tasks[k])?tasks[k]:[tasks[k]],taskCallback=_restParam(function(err,args){if(runningTasks--,args.length<=1&&(args=args[0]),err){var safeResults={};_forEachOf(results,function(val,rkey){safeResults[rkey]=val}),safeResults[k]=args,hasError=!0,callback(err,safeResults)}else results[k]=args,async.setImmediate(taskComplete)}),requires=task.slice(0,task.length-1),len=requires.length;len--;){if(!(dep=tasks[requires[len]]))throw new Error("Has nonexistent dependency in "+requires.join(", "));if(_isArray(dep)&&_indexOf(dep,k)>=0)throw new Error("Has cyclic dependencies")}ready()?(runningTasks++,task[task.length-1](taskCallback,results)):addListener(listener)}})},async.retry=function(times,task,callback){function parseTimes(acc,t){if("number"==typeof t)acc.times=parseInt(t,10)||DEFAULT_TIMES;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);acc.times=parseInt(t.times,10)||DEFAULT_TIMES,acc.interval=parseInt(t.interval,10)||DEFAULT_INTERVAL}}function wrappedTask(wrappedCallback,wrappedResults){function retryAttempt(task,finalAttempt){return function(seriesCallback){task(function(err,result){seriesCallback(!err||finalAttempt,{err:err,result:result})},wrappedResults)}}function retryInterval(interval){return function(seriesCallback){setTimeout(function(){seriesCallback(null)},interval)}}for(;opts.times;){var finalAttempt=!(opts.times-=1);attempts.push(retryAttempt(opts.task,finalAttempt)),!finalAttempt&&opts.interval>0&&attempts.push(retryInterval(opts.interval))}async.series(attempts,function(done,data){data=data[data.length-1],(wrappedCallback||opts.callback)(data.err,data.result)})}var DEFAULT_TIMES=5,DEFAULT_INTERVAL=0,attempts=[],opts={times:DEFAULT_TIMES,interval:DEFAULT_INTERVAL},length=arguments.length;if(1>length||length>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=length&&"function"==typeof times&&(callback=task,task=times),"function"!=typeof times&&parseTimes(opts,times),opts.callback=callback,opts.task=task,opts.callback?wrappedTask():wrappedTask},async.waterfall=function(tasks,callback){function wrapIterator(iterator){return _restParam(function(err,args){if(err)callback.apply(null,[err].concat(args));else{var next=iterator.next();next?args.push(wrapIterator(next)):args.push(callback),ensureAsync(iterator).apply(null,args)}})}if(callback=_once(callback||noop),!_isArray(tasks)){var err=new Error("First argument to waterfall must be an array of functions");return callback(err)}return tasks.length?void wrapIterator(async.iterator(tasks))():callback()},async.parallel=function(tasks,callback){_parallel(async.eachOf,tasks,callback)},async.parallelLimit=function(tasks,limit,callback){_parallel(_eachOfLimit(limit),tasks,callback)},async.series=function(tasks,callback){_parallel(async.eachOfSeries,tasks,callback)},async.iterator=function(tasks){function makeCallback(index){function fn(){return tasks.length&&tasks[index].apply(null,arguments),fn.next()}return fn.next=function(){return index<tasks.length-1?makeCallback(index+1):null},fn}return makeCallback(0)},async.apply=_restParam(function(fn,args){return _restParam(function(callArgs){return fn.apply(null,args.concat(callArgs))})}),async.concat=doParallel(_concat),async.concatSeries=doSeries(_concat),async.whilst=function(test,iterator,callback){if(callback=callback||noop,test()){var next=_restParam(function(err,args){err?callback(err):test.apply(this,args)?iterator(next):callback.apply(null,[null].concat(args))});iterator(next)}else callback(null)},async.doWhilst=function(iterator,test,callback){var calls=0;return async.whilst(function(){return++calls<=1||test.apply(this,arguments)},iterator,callback)},async.until=function(test,iterator,callback){return async.whilst(function(){return!test.apply(this,arguments)},iterator,callback)},async.doUntil=function(iterator,test,callback){return async.doWhilst(iterator,function(){return!test.apply(this,arguments)},callback)},async.during=function(test,iterator,callback){callback=callback||noop;var next=_restParam(function(err,args){err?callback(err):(args.push(check),test.apply(this,args))}),check=function(err,truth){err?callback(err):truth?iterator(next):callback(null)};test(check)},async.doDuring=function(iterator,test,callback){var calls=0;async.during(function(next){calls++<1?next(null,!0):test.apply(this,arguments)},iterator,callback)},async.queue=function(worker,concurrency){var q=_queue(function(items,cb){worker(items[0],cb)},concurrency,1);return q},async.priorityQueue=function(worker,concurrency){function _compareTasks(a,b){return a.priority-b.priority}function _binarySearch(sequence,item,compare){for(var beg=-1,end=sequence.length-1;end>beg;){var mid=beg+(end-beg+1>>>1);compare(item,sequence[mid])>=0?beg=mid:end=mid-1}return beg}function _insert(q,data,priority,callback){if(null!=callback&&"function"!=typeof callback)throw new Error("task callback must be a function");return q.started=!0,_isArray(data)||(data=[data]),0===data.length?async.setImmediate(function(){q.drain()}):void _arrayEach(data,function(task){var item={data:task,priority:priority,callback:"function"==typeof callback?callback:noop};q.tasks.splice(_binarySearch(q.tasks,item,_compareTasks)+1,0,item),q.tasks.length===q.concurrency&&q.saturated(),async.setImmediate(q.process)})}var q=async.queue(worker,concurrency);return q.push=function(data,priority,callback){_insert(q,data,priority,callback)},delete q.unshift,q},async.cargo=function(worker,payload){return _queue(worker,1,payload)},async.log=_console_fn("log"),async.dir=_console_fn("dir"),async.memoize=function(fn,hasher){var memo={},queues={},has=Object.prototype.hasOwnProperty;hasher=hasher||identity;var memoized=_restParam(function(args){var callback=args.pop(),key=hasher.apply(null,args);has.call(memo,key)?async.setImmediate(function(){callback.apply(null,memo[key])}):has.call(queues,key)?queues[key].push(callback):(queues[key]=[callback],fn.apply(null,args.concat([_restParam(function(args){memo[key]=args;var q=queues[key];delete queues[key];for(var i=0,l=q.length;l>i;i++)q[i].apply(null,args)})])))});return memoized.memo=memo,memoized.unmemoized=fn,memoized},async.unmemoize=function(fn){return function(){return(fn.unmemoized||fn).apply(null,arguments)}},async.times=_times(async.map),async.timesSeries=_times(async.mapSeries),async.timesLimit=function(count,limit,iterator,callback){return async.mapLimit(_range(count),limit,iterator,callback)},async.seq=function(){var fns=arguments;return _restParam(function(args){var that=this,callback=args[args.length-1];"function"==typeof callback?args.pop():callback=noop,async.reduce(fns,args,function(newargs,fn,cb){fn.apply(that,newargs.concat([_restParam(function(err,nextargs){cb(err,nextargs)})]))},function(err,results){callback.apply(that,[err].concat(results))})})},async.compose=function(){return async.seq.apply(null,Array.prototype.reverse.call(arguments))},async.applyEach=_applyEach(async.eachOf),async.applyEachSeries=_applyEach(async.eachOfSeries),async.forever=function(fn,callback){function next(err){return err?done(err):void task(next)}var done=only_once(callback||noop),task=ensureAsync(fn);next()},async.ensureAsync=ensureAsync,async.constant=_restParam(function(values){var args=[null].concat(values);return function(callback){return callback.apply(this,args)}}),async.wrapSync=async.asyncify=function(func){return _restParam(function(args){var result,callback=args.pop();try{result=func.apply(this,args)}catch(e){return callback(e)}_isObject(result)&&"function"==typeof result.then?result.then(function(value){callback(null,value)}).catch(function(err){callback(err.message?err:new Error(err))}):callback(null,result)})},"object"==typeof module&&module.exports?module.exports=async:"function"==typeof define&&define.amd?define([],function(){return async}):root.async=async}()}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:433}],317:[function(require,module,exports){function AccessibilityManager(renderer){var div=document.createElement("div");div.style.width="100px",div.style.height="100px",div.style.position="absolute",div.style.top=0,div.style.left=0,div.style.zIndex=2,this.div=div,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=renderer,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,window.addEventListener("keydown",this._onKeyDown,!1)}var core=require("../core");Object.assign(core.DisplayObject.prototype,require("./accessibleTarget")),AccessibilityManager.prototype.constructor=AccessibilityManager,module.exports=AccessibilityManager,AccessibilityManager.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode.appendChild(this.div))},AccessibilityManager.prototype.deactivate=function(){this.isActive&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode.removeChild(this.div))},AccessibilityManager.prototype.updateAccessibleObjects=function(displayObject){if(displayObject.visible&&(displayObject.accessible&&displayObject.interactive&&(displayObject._accessibleActive||this.addChild(displayObject),displayObject.renderId=this.renderId),displayObject.interactiveChildren))for(var children=displayObject.children,i=children.length-1;i>=0;i--)this.updateAccessibleObjects(children[i])},AccessibilityManager.prototype.update=function(){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var rect=this.renderer.view.getBoundingClientRect(),sx=rect.width/this.renderer.width,sy=rect.height/this.renderer.height,div=this.div;div.style.left=rect.left+"px",div.style.top=rect.top+"px",div.style.width=this.renderer.width+"px",div.style.height=this.renderer.height+"px";for(var i=0;i<this.children.length;i++){var child=this.children[i];if(child.renderId!==this.renderId)child._accessibleActive=!1,core.utils.removeItems(this.children,i,1),this.div.removeChild(child._accessibleDiv),this.pool.push(child._accessibleDiv),child._accessibleDiv=null,i--,0===this.children.length&&this.deactivate();else{div=child._accessibleDiv;var hitArea=child.hitArea,wt=child.worldTransform;child.hitArea?(div.style.left=(wt.tx+hitArea.x*wt.a)*sx+"px",div.style.top=(wt.ty+hitArea.y*wt.d)*sy+"px",div.style.width=hitArea.width*wt.a*sx+"px",div.style.height=hitArea.height*wt.d*sy+"px"):(hitArea=child.getBounds(),this.capHitArea(hitArea),div.style.left=hitArea.x*sx+"px",div.style.top=hitArea.y*sy+"px",div.style.width=hitArea.width*sx+"px",div.style.height=hitArea.height*sy+"px")}}this.renderId++},AccessibilityManager.prototype.capHitArea=function(hitArea){hitArea.x<0&&(hitArea.width+=hitArea.x,hitArea.x=0),hitArea.y<0&&(hitArea.height+=hitArea.y,hitArea.y=0),hitArea.x+hitArea.width>this.renderer.width&&(hitArea.width=this.renderer.width-hitArea.x),hitArea.y+hitArea.height>this.renderer.height&&(hitArea.height=this.renderer.height-hitArea.y)},AccessibilityManager.prototype.addChild=function(displayObject){var div=this.pool.pop();div||(div=document.createElement("button"),div.style.width="100px",div.style.height="100px",div.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",div.style.position="absolute",div.style.zIndex=2,div.style.borderStyle="none",div.addEventListener("click",this._onClick.bind(this)),div.addEventListener("focus",this._onFocus.bind(this)),div.addEventListener("focusout",this._onFocusOut.bind(this))),div.title=displayObject.accessibleTitle||"displayObject "+this.tabIndex,displayObject._accessibleActive=!0,displayObject._accessibleDiv=div,div.displayObject=displayObject,this.children.push(displayObject),this.div.appendChild(displayObject._accessibleDiv),displayObject._accessibleDiv.tabIndex=displayObject.tabIndex},AccessibilityManager.prototype._onClick=function(e){var interactionManager=this.renderer.plugins.interaction;interactionManager.dispatchEvent(e.target.displayObject,"click",interactionManager.eventData)},AccessibilityManager.prototype._onFocus=function(e){var interactionManager=this.renderer.plugins.interaction;interactionManager.dispatchEvent(e.target.displayObject,"mouseover",interactionManager.eventData)},AccessibilityManager.prototype._onFocusOut=function(e){var interactionManager=this.renderer.plugins.interaction;interactionManager.dispatchEvent(e.target.displayObject,"mouseout",interactionManager.eventData)},AccessibilityManager.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},AccessibilityManager.prototype._onMouseMove=function(){this.deactivate()},AccessibilityManager.prototype.destroy=function(){this.div=null;for(var i=0;i<this.children.length;i++)this.children[i].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},core.WebGLRenderer.registerPlugin("accessibility",AccessibilityManager),core.CanvasRenderer.registerPlugin("accessibility",AccessibilityManager)},{"../core":327,"./accessibleTarget":318}],318:[function(require,module,exports){var accessibleTarget={accessible:!1,accessibleTitle:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1};module.exports=accessibleTarget},{}],319:[function(require,module,exports){module.exports={accessibleTarget:require("./accessibleTarget"),AccessibilityManager:require("./AccessibilityManager")}},{"./AccessibilityManager":317,"./accessibleTarget":318}],320:[function(require,module,exports){var CONST={VERSION:"3.0.10",PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};module.exports=CONST},{}],321:[function(require,module,exports){function Container(){DisplayObject.call(this),this.children=[]}var math=require("../math"),utils=require("../utils"),DisplayObject=require("./DisplayObject"),RenderTexture=require("../textures/RenderTexture"),_tempMatrix=new math.Matrix;Container.prototype=Object.create(DisplayObject.prototype),Container.prototype.constructor=Container,module.exports=Container,Object.defineProperties(Container.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(value){var width=this.getLocalBounds().width;0!==width?this.scale.x=value/width:this.scale.x=1,this._width=value}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(value){var height=this.getLocalBounds().height;0!==height?this.scale.y=value/height:this.scale.y=1,this._height=value}}}),Container.prototype.onChildrenChange=function(){},Container.prototype.addChild=function(child){var argumentsLength=arguments.length;if(argumentsLength>1)for(var i=0;argumentsLength>i;i++)this.addChild(arguments[i]);else child.parent&&child.parent.removeChild(child),child.parent=this,this.children.push(child),this.onChildrenChange(this.children.length-1),child.emit("added",this);return child},Container.prototype.addChildAt=function(child,index){if(index>=0&&index<=this.children.length)return child.parent&&child.parent.removeChild(child),child.parent=this,this.children.splice(index,0,child),this.onChildrenChange(index),child.emit("added",this),child;throw new Error(child+"addChildAt: The index "+index+" supplied is out of bounds "+this.children.length)},Container.prototype.swapChildren=function(child,child2){if(child!==child2){var index1=this.getChildIndex(child),index2=this.getChildIndex(child2);if(0>index1||0>index2)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[index1]=child2,this.children[index2]=child,this.onChildrenChange(index2>index1?index1:index2)}},Container.prototype.getChildIndex=function(child){var index=this.children.indexOf(child);if(-1===index)throw new Error("The supplied DisplayObject must be a child of the caller");return index},Container.prototype.setChildIndex=function(child,index){if(0>index||index>=this.children.length)throw new Error("The supplied index is out of bounds");var currentIndex=this.getChildIndex(child);utils.removeItems(this.children,currentIndex,1),this.children.splice(index,0,child),this.onChildrenChange(index)},Container.prototype.getChildAt=function(index){if(0>index||index>=this.children.length)throw new Error("getChildAt: Supplied index "+index+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[index]},Container.prototype.removeChild=function(child){var argumentsLength=arguments.length;if(argumentsLength>1)for(var i=0;argumentsLength>i;i++)this.removeChild(arguments[i]);else{var index=this.children.indexOf(child);if(-1===index)return;child.parent=null,utils.removeItems(this.children,index,1),this.onChildrenChange(index),child.emit("removed",this)}return child},Container.prototype.removeChildAt=function(index){var child=this.getChildAt(index);return child.parent=null,utils.removeItems(this.children,index,1),this.onChildrenChange(index),child.emit("removed",this),child},Container.prototype.removeChildren=function(beginIndex,endIndex){var removed,i,begin=beginIndex||0,end="number"==typeof endIndex?endIndex:this.children.length,range=end-begin;if(range>0&&end>=range){for(removed=this.children.splice(begin,range),i=0;i<removed.length;++i)removed[i].parent=null;for(this.onChildrenChange(beginIndex),i=0;i<removed.length;++i)removed[i].emit("removed",this);return removed}if(0===range&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Container.prototype.generateTexture=function(renderer,resolution,scaleMode){var bounds=this.getLocalBounds(),renderTexture=new RenderTexture(renderer,0|bounds.width,0|bounds.height,scaleMode,resolution);return _tempMatrix.tx=-bounds.x,_tempMatrix.ty=-bounds.y,renderTexture.render(this,_tempMatrix),renderTexture},Container.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var i=0,j=this.children.length;j>i;++i)this.children[i].updateTransform()}},Container.prototype.containerUpdateTransform=Container.prototype.updateTransform,Container.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return math.Rectangle.EMPTY;for(var childBounds,childMaxX,childMaxY,minX=1/0,minY=1/0,maxX=-(1/0),maxY=-(1/0),childVisible=!1,i=0,j=this.children.length;j>i;++i){var child=this.children[i];child.visible&&(childVisible=!0,childBounds=this.children[i].getBounds(),minX=minX<childBounds.x?minX:childBounds.x,minY=minY<childBounds.y?minY:childBounds.y,childMaxX=childBounds.width+childBounds.x,childMaxY=childBounds.height+childBounds.y,maxX=maxX>childMaxX?maxX:childMaxX,maxY=maxY>childMaxY?maxY:childMaxY)}if(!childVisible)return math.Rectangle.EMPTY;var bounds=this._bounds;bounds.x=minX,bounds.y=minY,bounds.width=maxX-minX,bounds.height=maxY-minY,this._currentBounds=bounds}return this._currentBounds},Container.prototype.containerGetBounds=Container.prototype.getBounds,Container.prototype.getLocalBounds=function(){var matrixCache=this.worldTransform;this.worldTransform=math.Matrix.IDENTITY;for(var i=0,j=this.children.length;j>i;++i)this.children[i].updateTransform();return this.worldTransform=matrixCache,this._currentBounds=null,this.getBounds(math.Matrix.IDENTITY)},Container.prototype.renderWebGL=function(renderer){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var i,j;if(this._mask||this._filters){for(renderer.currentRenderer.flush(),this._filters&&this._filters.length&&renderer.filterManager.pushFilter(this,this._filters),this._mask&&renderer.maskManager.pushMask(this,this._mask),renderer.currentRenderer.start(),this._renderWebGL(renderer),i=0,j=this.children.length;j>i;i++)this.children[i].renderWebGL(renderer);renderer.currentRenderer.flush(),this._mask&&renderer.maskManager.popMask(this,this._mask),this._filters&&renderer.filterManager.popFilter(),renderer.currentRenderer.start()}else for(this._renderWebGL(renderer),i=0,j=this.children.length;j>i;++i)this.children[i].renderWebGL(renderer)}},Container.prototype._renderWebGL=function(renderer){},Container.prototype._renderCanvas=function(renderer){},Container.prototype.renderCanvas=function(renderer){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&renderer.maskManager.pushMask(this._mask,renderer),this._renderCanvas(renderer);for(var i=0,j=this.children.length;j>i;++i)this.children[i].renderCanvas(renderer);this._mask&&renderer.maskManager.popMask(renderer)}},Container.prototype.destroy=function(destroyChildren){if(DisplayObject.prototype.destroy.call(this),destroyChildren)for(var i=0,j=this.children.length;j>i;++i)this.children[i].destroy(destroyChildren);this.removeChildren(),this.children=null}},{"../math":331,"../textures/RenderTexture":369,"../utils":375,"./DisplayObject":322}],322:[function(require,module,exports){function DisplayObject(){EventEmitter.call(this),this.position=new math.Point,this.scale=new math.Point(1,1),this.pivot=new math.Point(0,0),this.skew=new math.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new math.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new math.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null}var math=require("../math"),RenderTexture=require("../textures/RenderTexture"),EventEmitter=require("eventemitter3"),CONST=require("../const"),_tempMatrix=new math.Matrix,_tempDisplayObjectParent={worldTransform:new math.Matrix,worldAlpha:1,children:[]};DisplayObject.prototype=Object.create(EventEmitter.prototype),DisplayObject.prototype.constructor=DisplayObject,module.exports=DisplayObject,Object.defineProperties(DisplayObject.prototype,{x:{get:function(){return this.position.x},set:function(value){this.position.x=value}},y:{get:function(){return this.position.y},set:function(value){this.position.y=value}},worldVisible:{get:function(){var item=this;do{if(!item.visible)return!1;item=item.parent}while(item);return!0}},mask:{get:function(){return this._mask},set:function(value){this._mask&&(this._mask.renderable=!0),this._mask=value,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(value){this._filters=value&&value.slice()}}}),DisplayObject.prototype.updateTransform=function(){var a,b,c,d,tx,ty,pt=this.parent.worldTransform,wt=this.worldTransform;this.skew.x||this.skew.y?(_tempMatrix.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,this.skew.x,this.skew.y),wt.a=_tempMatrix.a*pt.a+_tempMatrix.b*pt.c,wt.b=_tempMatrix.a*pt.b+_tempMatrix.b*pt.d,wt.c=_tempMatrix.c*pt.a+_tempMatrix.d*pt.c,wt.d=_tempMatrix.c*pt.b+_tempMatrix.d*pt.d,wt.tx=_tempMatrix.tx*pt.a+_tempMatrix.ty*pt.c+pt.tx,wt.ty=_tempMatrix.tx*pt.b+_tempMatrix.ty*pt.d+pt.ty):this.rotation%CONST.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),a=this._cr*this.scale.x,b=this._sr*this.scale.x,c=-this._sr*this.scale.y,d=this._cr*this.scale.y,tx=this.position.x,ty=this.position.y,(this.pivot.x||this.pivot.y)&&(tx-=this.pivot.x*a+this.pivot.y*c,ty-=this.pivot.x*b+this.pivot.y*d),wt.a=a*pt.a+b*pt.c,wt.b=a*pt.b+b*pt.d,wt.c=c*pt.a+d*pt.c,wt.d=c*pt.b+d*pt.d,wt.tx=tx*pt.a+ty*pt.c+pt.tx,wt.ty=tx*pt.b+ty*pt.d+pt.ty):(a=this.scale.x,d=this.scale.y,tx=this.position.x-this.pivot.x*a,ty=this.position.y-this.pivot.y*d,wt.a=a*pt.a,wt.b=a*pt.b,wt.c=d*pt.c,wt.d=d*pt.d,wt.tx=tx*pt.a+ty*pt.c+pt.tx,wt.ty=tx*pt.b+ty*pt.d+pt.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform,DisplayObject.prototype.getBounds=function(matrix){return math.Rectangle.EMPTY},DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(math.Matrix.IDENTITY)},DisplayObject.prototype.toGlobal=function(position){return this.parent?this.displayObjectUpdateTransform():(this.parent=_tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.apply(position)},DisplayObject.prototype.toLocal=function(position,from,point){return from&&(position=from.toGlobal(position)),this.parent?this.displayObjectUpdateTransform():(this.parent=_tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.applyInverse(position,point)},DisplayObject.prototype.renderWebGL=function(renderer){},DisplayObject.prototype.renderCanvas=function(renderer){},DisplayObject.prototype.generateTexture=function(renderer,scaleMode,resolution){var bounds=this.getLocalBounds(),renderTexture=new RenderTexture(renderer,0|bounds.width,0|bounds.height,scaleMode,resolution);return _tempMatrix.tx=-bounds.x,_tempMatrix.ty=-bounds.y,renderTexture.render(this,_tempMatrix),renderTexture},DisplayObject.prototype.setParent=function(container){if(!container||!container.addChild)throw new Error("setParent: Argument must be a Container");return container.addChild(this),container},DisplayObject.prototype.setTransform=function(x,y,scaleX,scaleY,rotation,skewX,skewY,pivotX,pivotY){return this.position.x=x||0,this.position.y=y||0,this.scale.x=scaleX?scaleX:1,this.scale.y=scaleY?scaleY:1,this.rotation=rotation||0,this.skew.x=skewX||0,this.skew.y=skewY||0,this.pivot.x=pivotX||0,this.pivot.y=pivotY||0,this},DisplayObject.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.skew=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},{"../const":320,"../math":331,"../textures/RenderTexture":369,eventemitter3:305}],323:[function(require,module,exports){function Graphics(){Container.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=CONST.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new math.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var Container=require("../display/Container"),Texture=require("../textures/Texture"),CanvasBuffer=require("../renderers/canvas/utils/CanvasBuffer"),CanvasGraphics=require("../renderers/canvas/utils/CanvasGraphics"),GraphicsData=require("./GraphicsData"),math=require("../math"),CONST=require("../const"),tempPoint=new math.Point;Graphics.prototype=Object.create(Container.prototype),Graphics.prototype.constructor=Graphics,module.exports=Graphics,Graphics.prototype.clone=function(){var clone=new Graphics;clone.renderable=this.renderable,clone.fillAlpha=this.fillAlpha,clone.lineWidth=this.lineWidth,clone.lineColor=this.lineColor,clone.tint=this.tint,clone.blendMode=this.blendMode,clone.isMask=this.isMask,clone.boundsPadding=this.boundsPadding,clone.dirty=!0,clone.glDirty=!0,clone.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)clone.graphicsData.push(this.graphicsData[i].clone());return clone.currentPath=clone.graphicsData[clone.graphicsData.length-1],clone.updateLocalBounds(),clone},Graphics.prototype.lineStyle=function(lineWidth,color,alpha){if(this.lineWidth=lineWidth||0,this.lineColor=color||0,this.lineAlpha=void 0===alpha?1:alpha,this.currentPath)if(this.currentPath.shape.points.length){var shape=new math.Polygon(this.currentPath.shape.points.slice(-2));shape.closed=!1,this.drawShape(shape)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},Graphics.prototype.moveTo=function(x,y){var shape=new math.Polygon([x,y]);return shape.closed=!1,this.drawShape(shape),this},Graphics.prototype.lineTo=function(x,y){return this.currentPath.shape.points.push(x,y),this.dirty=!0,this},Graphics.prototype.quadraticCurveTo=function(cpX,cpY,toX,toY){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var xa,ya,n=20,points=this.currentPath.shape.points;0===points.length&&this.moveTo(0,0);for(var fromX=points[points.length-2],fromY=points[points.length-1],j=0,i=1;n>=i;++i)j=i/n,xa=fromX+(cpX-fromX)*j,ya=fromY+(cpY-fromY)*j,points.push(xa+(cpX+(toX-cpX)*j-xa)*j,ya+(cpY+(toY-cpY)*j-ya)*j);return this.dirty=this.boundsDirty=!0,this},Graphics.prototype.bezierCurveTo=function(cpX,cpY,cpX2,cpY2,toX,toY){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var dt,dt2,dt3,t2,t3,n=20,points=this.currentPath.shape.points,fromX=points[points.length-2],fromY=points[points.length-1],j=0,i=1;n>=i;++i)j=i/n,dt=1-j,dt2=dt*dt,dt3=dt2*dt,t2=j*j,t3=t2*j,points.push(dt3*fromX+3*dt2*j*cpX+3*dt*t2*cpX2+t3*toX,dt3*fromY+3*dt2*j*cpY+3*dt*t2*cpY2+t3*toY);return this.dirty=this.boundsDirty=!0,this},Graphics.prototype.arcTo=function(x1,y1,x2,y2,radius){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(x1,y1):this.moveTo(x1,y1);var points=this.currentPath.shape.points,fromX=points[points.length-2],fromY=points[points.length-1],a1=fromY-y1,b1=fromX-x1,a2=y2-y1,b2=x2-x1,mm=Math.abs(a1*b2-b1*a2);if(1e-8>mm||0===radius)points[points.length-2]===x1&&points[points.length-1]===y1||points.push(x1,y1);else{var dd=a1*a1+b1*b1,cc=a2*a2+b2*b2,tt=a1*a2+b1*b2,k1=radius*Math.sqrt(dd)/mm,k2=radius*Math.sqrt(cc)/mm,j1=k1*tt/dd,j2=k2*tt/cc,cx=k1*b2+k2*b1,cy=k1*a2+k2*a1,px=b1*(k2+j1),py=a1*(k2+j1),qx=b2*(k1+j2),qy=a2*(k1+j2),startAngle=Math.atan2(py-cy,px-cx),endAngle=Math.atan2(qy-cy,qx-cx);this.arc(cx+x1,cy+y1,radius,startAngle,endAngle,b1*a2>b2*a1)}return this.dirty=this.boundsDirty=!0,this},Graphics.prototype.arc=function(cx,cy,radius,startAngle,endAngle,anticlockwise){if(anticlockwise=anticlockwise||!1,startAngle===endAngle)return this;!anticlockwise&&startAngle>=endAngle?endAngle+=2*Math.PI:anticlockwise&&endAngle>=startAngle&&(startAngle+=2*Math.PI);var sweep=anticlockwise?-1*(startAngle-endAngle):endAngle-startAngle,segs=40*Math.ceil(Math.abs(sweep)/(2*Math.PI));
if(0===sweep)return this;var startX=cx+Math.cos(startAngle)*radius,startY=cy+Math.sin(startAngle)*radius;this.currentPath?this.currentPath.shape.points.push(startX,startY):this.moveTo(startX,startY);for(var points=this.currentPath.shape.points,theta=sweep/(2*segs),theta2=2*theta,cTheta=Math.cos(theta),sTheta=Math.sin(theta),segMinus=segs-1,remainder=segMinus%1/segMinus,i=0;segMinus>=i;i++){var real=i+remainder*i,angle=theta+startAngle+theta2*real,c=Math.cos(angle),s=-Math.sin(angle);points.push((cTheta*c+sTheta*s)*radius+cx,(cTheta*-s+sTheta*c)*radius+cy)}return this.dirty=this.boundsDirty=!0,this},Graphics.prototype.beginFill=function(color,alpha){return this.filling=!0,this.fillColor=color||0,this.fillAlpha=void 0===alpha?1:alpha,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},Graphics.prototype.drawRect=function(x,y,width,height){return this.drawShape(new math.Rectangle(x,y,width,height)),this},Graphics.prototype.drawRoundedRect=function(x,y,width,height,radius){return this.drawShape(new math.RoundedRectangle(x,y,width,height,radius)),this},Graphics.prototype.drawCircle=function(x,y,radius){return this.drawShape(new math.Circle(x,y,radius)),this},Graphics.prototype.drawEllipse=function(x,y,width,height){return this.drawShape(new math.Ellipse(x,y,width,height)),this},Graphics.prototype.drawPolygon=function(path){var points=path,closed=!0;if(points instanceof math.Polygon&&(closed=points.closed,points=points.points),!Array.isArray(points)){points=new Array(arguments.length);for(var i=0;i<points.length;++i)points[i]=arguments[i]}var shape=new math.Polygon(points);return shape.closed=closed,this.drawShape(shape),this},Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},Graphics.prototype.generateTexture=function(renderer,resolution,scaleMode){resolution=resolution||1;var bounds=this.getLocalBounds(),canvasBuffer=new CanvasBuffer(bounds.width*resolution,bounds.height*resolution),texture=Texture.fromCanvas(canvasBuffer.canvas,scaleMode);return texture.baseTexture.resolution=resolution,canvasBuffer.context.scale(resolution,resolution),canvasBuffer.context.translate(-bounds.x,-bounds.y),CanvasGraphics.renderGraphics(this,canvasBuffer.context),texture},Graphics.prototype._renderWebGL=function(renderer){this.glDirty&&(this.dirty=!0,this.glDirty=!1),renderer.setObjectRenderer(renderer.plugins.graphics),renderer.plugins.graphics.render(this)},Graphics.prototype._renderCanvas=function(renderer){if(this.isMask!==!0){this._prevTint!==this.tint&&(this.dirty=!0);var context=renderer.context,transform=this.worldTransform,compositeOperation=renderer.blendModes[this.blendMode];compositeOperation!==context.globalCompositeOperation&&(context.globalCompositeOperation=compositeOperation);var resolution=renderer.resolution;context.setTransform(transform.a*resolution,transform.b*resolution,transform.c*resolution,transform.d*resolution,transform.tx*resolution,transform.ty*resolution),CanvasGraphics.renderGraphics(this,context)}},Graphics.prototype.getBounds=function(matrix){if(!this._currentBounds){if(!this.renderable)return math.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var bounds=this._localBounds,w0=bounds.x,w1=bounds.width+bounds.x,h0=bounds.y,h1=bounds.height+bounds.y,worldTransform=matrix||this.worldTransform,a=worldTransform.a,b=worldTransform.b,c=worldTransform.c,d=worldTransform.d,tx=worldTransform.tx,ty=worldTransform.ty,x1=a*w1+c*h1+tx,y1=d*h1+b*w1+ty,x2=a*w0+c*h1+tx,y2=d*h1+b*w0+ty,x3=a*w0+c*h0+tx,y3=d*h0+b*w0+ty,x4=a*w1+c*h0+tx,y4=d*h0+b*w1+ty,maxX=x1,maxY=y1,minX=x1,minY=y1;minX=minX>x2?x2:minX,minX=minX>x3?x3:minX,minX=minX>x4?x4:minX,minY=minY>y2?y2:minY,minY=minY>y3?y3:minY,minY=minY>y4?y4:minY,maxX=x2>maxX?x2:maxX,maxX=x3>maxX?x3:maxX,maxX=x4>maxX?x4:maxX,maxY=y2>maxY?y2:maxY,maxY=y3>maxY?y3:maxY,maxY=y4>maxY?y4:maxY,this._bounds.x=minX,this._bounds.width=maxX-minX,this._bounds.y=minY,this._bounds.height=maxY-minY,this._currentBounds=this._bounds}return this._currentBounds},Graphics.prototype.containsPoint=function(point){this.worldTransform.applyInverse(point,tempPoint);for(var graphicsData=this.graphicsData,i=0;i<graphicsData.length;i++){var data=graphicsData[i];if(data.fill&&data.shape&&data.shape.contains(tempPoint.x,tempPoint.y))return!0}return!1},Graphics.prototype.updateLocalBounds=function(){var minX=1/0,maxX=-(1/0),minY=1/0,maxY=-(1/0);if(this.graphicsData.length)for(var shape,points,x,y,w,h,i=0;i<this.graphicsData.length;i++){var data=this.graphicsData[i],type=data.type,lineWidth=data.lineWidth;if(shape=data.shape,type===CONST.SHAPES.RECT||type===CONST.SHAPES.RREC)x=shape.x-lineWidth/2,y=shape.y-lineWidth/2,w=shape.width+lineWidth,h=shape.height+lineWidth,minX=minX>x?x:minX,maxX=x+w>maxX?x+w:maxX,minY=minY>y?y:minY,maxY=y+h>maxY?y+h:maxY;else if(type===CONST.SHAPES.CIRC)x=shape.x,y=shape.y,w=shape.radius+lineWidth/2,h=shape.radius+lineWidth/2,minX=minX>x-w?x-w:minX,maxX=x+w>maxX?x+w:maxX,minY=minY>y-h?y-h:minY,maxY=y+h>maxY?y+h:maxY;else if(type===CONST.SHAPES.ELIP)x=shape.x,y=shape.y,w=shape.width+lineWidth/2,h=shape.height+lineWidth/2,minX=minX>x-w?x-w:minX,maxX=x+w>maxX?x+w:maxX,minY=minY>y-h?y-h:minY,maxY=y+h>maxY?y+h:maxY;else{points=shape.points;for(var j=0;j<points.length;j+=2)x=points[j],y=points[j+1],minX=minX>x-lineWidth?x-lineWidth:minX,maxX=x+lineWidth>maxX?x+lineWidth:maxX,minY=minY>y-lineWidth?y-lineWidth:minY,maxY=y+lineWidth>maxY?y+lineWidth:maxY}}else minX=0,maxX=0,minY=0,maxY=0;var padding=this.boundsPadding;this._localBounds.x=minX-padding,this._localBounds.width=maxX-minX+2*padding,this._localBounds.y=minY-padding,this._localBounds.height=maxY-minY+2*padding},Graphics.prototype.drawShape=function(shape){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var data=new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,shape);return this.graphicsData.push(data),data.type===CONST.SHAPES.POLY&&(data.shape.closed=data.shape.closed||this.filling,this.currentPath=data),this.dirty=this.boundsDirty=!0,data},Graphics.prototype.destroy=function(){Container.prototype.destroy.apply(this,arguments);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var id in this._webgl)for(var j=0;j<this._webgl[id].data.length;++j)this._webgl[id].data[j].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{"../const":320,"../display/Container":321,"../math":331,"../renderers/canvas/utils/CanvasBuffer":343,"../renderers/canvas/utils/CanvasGraphics":344,"../textures/Texture":370,"./GraphicsData":324}],324:[function(require,module,exports){function GraphicsData(lineWidth,lineColor,lineAlpha,fillColor,fillAlpha,fill,shape){this.lineWidth=lineWidth,this.lineColor=lineColor,this.lineAlpha=lineAlpha,this._lineTint=lineColor,this.fillColor=fillColor,this.fillAlpha=fillAlpha,this._fillTint=fillColor,this.fill=fill,this.shape=shape,this.type=shape.type}GraphicsData.prototype.constructor=GraphicsData,module.exports=GraphicsData,GraphicsData.prototype.clone=function(){return new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},GraphicsData.prototype.destroy=function(){this.shape=null}},{}],325:[function(require,module,exports){function GraphicsRenderer(renderer){ObjectRenderer.call(this,renderer),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null,this.maximumSimplePolySize=200}var utils=require("../../utils"),math=require("../../math"),CONST=require("../../const"),ObjectRenderer=require("../../renderers/webgl/utils/ObjectRenderer"),WebGLRenderer=require("../../renderers/webgl/WebGLRenderer"),WebGLGraphicsData=require("./WebGLGraphicsData"),earcut=require("earcut");GraphicsRenderer.prototype=Object.create(ObjectRenderer.prototype),GraphicsRenderer.prototype.constructor=GraphicsRenderer,module.exports=GraphicsRenderer,WebGLRenderer.registerPlugin("graphics",GraphicsRenderer),GraphicsRenderer.prototype.onContextChange=function(){},GraphicsRenderer.prototype.destroy=function(){ObjectRenderer.prototype.destroy.call(this);for(var i=0;i<this.graphicsDataPool.length;++i)this.graphicsDataPool[i].destroy();this.graphicsDataPool=null},GraphicsRenderer.prototype.render=function(graphics){var webGLData,renderer=this.renderer,gl=renderer.gl,shader=renderer.shaderManager.plugins.primitiveShader;!graphics.dirty&&graphics._webGL[gl.id]||this.updateGraphics(graphics);var webGL=graphics._webGL[gl.id];renderer.blendModeManager.setBlendMode(graphics.blendMode);for(var i=0,n=webGL.data.length;n>i;i++)webGLData=webGL.data[i],1===webGL.data[i].mode?(renderer.stencilManager.pushStencil(graphics,webGLData),gl.uniform1f(renderer.shaderManager.complexPrimitiveShader.uniforms.alpha._location,graphics.worldAlpha*webGLData.alpha),gl.drawElements(gl.TRIANGLE_FAN,4,gl.UNSIGNED_SHORT,2*(webGLData.indices.length-4)),renderer.stencilManager.popStencil(graphics,webGLData)):(shader=renderer.shaderManager.primitiveShader,renderer.shaderManager.setShader(shader),gl.uniformMatrix3fv(shader.uniforms.translationMatrix._location,!1,graphics.worldTransform.toArray(!0)),gl.uniformMatrix3fv(shader.uniforms.projectionMatrix._location,!1,renderer.currentRenderTarget.projectionMatrix.toArray(!0)),gl.uniform3fv(shader.uniforms.tint._location,utils.hex2rgb(graphics.tint)),gl.uniform1f(shader.uniforms.alpha._location,graphics.worldAlpha),gl.bindBuffer(gl.ARRAY_BUFFER,webGLData.buffer),gl.vertexAttribPointer(shader.attributes.aVertexPosition,2,gl.FLOAT,!1,24,0),gl.vertexAttribPointer(shader.attributes.aColor,4,gl.FLOAT,!1,24,8),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,webGLData.indexBuffer),gl.drawElements(gl.TRIANGLE_STRIP,webGLData.indices.length,gl.UNSIGNED_SHORT,0)),renderer.drawCount++},GraphicsRenderer.prototype.updateGraphics=function(graphics){var gl=this.renderer.gl,webGL=graphics._webGL[gl.id];webGL||(webGL=graphics._webGL[gl.id]={lastIndex:0,data:[],gl:gl}),graphics.dirty=!1;var i;if(graphics.clearDirty){for(graphics.clearDirty=!1,i=0;i<webGL.data.length;i++){var graphicsData=webGL.data[i];graphicsData.reset(),this.graphicsDataPool.push(graphicsData)}webGL.data=[],webGL.lastIndex=0}var webGLData;for(i=webGL.lastIndex;i<graphics.graphicsData.length;i++){var data=graphics.graphicsData[i];if(data.type===CONST.SHAPES.POLY){if(data.points=data.shape.points.slice(),data.shape.closed&&(data.points[0]===data.points[data.points.length-2]&&data.points[1]===data.points[data.points.length-1]||data.points.push(data.points[0],data.points[1])),data.fill&&data.points.length>=6)if(data.points.length<2*this.maximumSimplePolySize){webGLData=this.switchMode(webGL,0);var canDrawUsingSimple=this.buildPoly(data,webGLData);canDrawUsingSimple||(webGLData=this.switchMode(webGL,1),this.buildComplexPoly(data,webGLData))}else webGLData=this.switchMode(webGL,1),this.buildComplexPoly(data,webGLData);data.lineWidth>0&&(webGLData=this.switchMode(webGL,0),this.buildLine(data,webGLData))}else webGLData=this.switchMode(webGL,0),data.type===CONST.SHAPES.RECT?this.buildRectangle(data,webGLData):data.type===CONST.SHAPES.CIRC||data.type===CONST.SHAPES.ELIP?this.buildCircle(data,webGLData):data.type===CONST.SHAPES.RREC&&this.buildRoundedRectangle(data,webGLData);webGL.lastIndex++}for(i=0;i<webGL.data.length;i++)webGLData=webGL.data[i],webGLData.dirty&&webGLData.upload()},GraphicsRenderer.prototype.switchMode=function(webGL,type){var webGLData;return webGL.data.length?(webGLData=webGL.data[webGL.data.length-1],(webGLData.points.length>32e4||webGLData.mode!==type||1===type)&&(webGLData=this.graphicsDataPool.pop()||new WebGLGraphicsData(webGL.gl),webGLData.mode=type,webGL.data.push(webGLData))):(webGLData=this.graphicsDataPool.pop()||new WebGLGraphicsData(webGL.gl),webGLData.mode=type,webGL.data.push(webGLData)),webGLData.dirty=!0,webGLData},GraphicsRenderer.prototype.buildRectangle=function(graphicsData,webGLData){var rectData=graphicsData.shape,x=rectData.x,y=rectData.y,width=rectData.width,height=rectData.height;if(graphicsData.fill){var color=utils.hex2rgb(graphicsData.fillColor),alpha=graphicsData.fillAlpha,r=color[0]*alpha,g=color[1]*alpha,b=color[2]*alpha,verts=webGLData.points,indices=webGLData.indices,vertPos=verts.length/6;verts.push(x,y),verts.push(r,g,b,alpha),verts.push(x+width,y),verts.push(r,g,b,alpha),verts.push(x,y+height),verts.push(r,g,b,alpha),verts.push(x+width,y+height),verts.push(r,g,b,alpha),indices.push(vertPos,vertPos,vertPos+1,vertPos+2,vertPos+3,vertPos+3)}if(graphicsData.lineWidth){var tempPoints=graphicsData.points;graphicsData.points=[x,y,x+width,y,x+width,y+height,x,y+height,x,y],this.buildLine(graphicsData,webGLData),graphicsData.points=tempPoints}},GraphicsRenderer.prototype.buildRoundedRectangle=function(graphicsData,webGLData){var rrectData=graphicsData.shape,x=rrectData.x,y=rrectData.y,width=rrectData.width,height=rrectData.height,radius=rrectData.radius,recPoints=[];if(recPoints.push(x,y+radius),this.quadraticBezierCurve(x,y+height-radius,x,y+height,x+radius,y+height,recPoints),this.quadraticBezierCurve(x+width-radius,y+height,x+width,y+height,x+width,y+height-radius,recPoints),this.quadraticBezierCurve(x+width,y+radius,x+width,y,x+width-radius,y,recPoints),this.quadraticBezierCurve(x+radius,y,x,y,x,y+radius+1e-10,recPoints),graphicsData.fill){var color=utils.hex2rgb(graphicsData.fillColor),alpha=graphicsData.fillAlpha,r=color[0]*alpha,g=color[1]*alpha,b=color[2]*alpha,verts=webGLData.points,indices=webGLData.indices,vecPos=verts.length/6,triangles=earcut(recPoints,null,2),i=0;for(i=0;i<triangles.length;i+=3)indices.push(triangles[i]+vecPos),indices.push(triangles[i]+vecPos),indices.push(triangles[i+1]+vecPos),indices.push(triangles[i+2]+vecPos),indices.push(triangles[i+2]+vecPos);for(i=0;i<recPoints.length;i++)verts.push(recPoints[i],recPoints[++i],r,g,b,alpha)}if(graphicsData.lineWidth){var tempPoints=graphicsData.points;graphicsData.points=recPoints,this.buildLine(graphicsData,webGLData),graphicsData.points=tempPoints}},GraphicsRenderer.prototype.quadraticBezierCurve=function(fromX,fromY,cpX,cpY,toX,toY,out){function getPt(n1,n2,perc){var diff=n2-n1;return n1+diff*perc}for(var xa,ya,xb,yb,x,y,n=20,points=out||[],j=0,i=0;n>=i;i++)j=i/n,xa=getPt(fromX,cpX,j),ya=getPt(fromY,cpY,j),xb=getPt(cpX,toX,j),yb=getPt(cpY,toY,j),x=getPt(xa,xb,j),y=getPt(ya,yb,j),points.push(x,y);return points},GraphicsRenderer.prototype.buildCircle=function(graphicsData,webGLData){var width,height,circleData=graphicsData.shape,x=circleData.x,y=circleData.y;graphicsData.type===CONST.SHAPES.CIRC?(width=circleData.radius,height=circleData.radius):(width=circleData.width,height=circleData.height);var totalSegs=Math.floor(30*Math.sqrt(circleData.radius))||Math.floor(15*Math.sqrt(circleData.width+circleData.height)),seg=2*Math.PI/totalSegs,i=0;if(graphicsData.fill){var color=utils.hex2rgb(graphicsData.fillColor),alpha=graphicsData.fillAlpha,r=color[0]*alpha,g=color[1]*alpha,b=color[2]*alpha,verts=webGLData.points,indices=webGLData.indices,vecPos=verts.length/6;for(indices.push(vecPos),i=0;totalSegs+1>i;i++)verts.push(x,y,r,g,b,alpha),verts.push(x+Math.sin(seg*i)*width,y+Math.cos(seg*i)*height,r,g,b,alpha),indices.push(vecPos++,vecPos++);indices.push(vecPos-1)}if(graphicsData.lineWidth){var tempPoints=graphicsData.points;for(graphicsData.points=[],i=0;totalSegs+1>i;i++)graphicsData.points.push(x+Math.sin(seg*i)*width,y+Math.cos(seg*i)*height);this.buildLine(graphicsData,webGLData),graphicsData.points=tempPoints}},GraphicsRenderer.prototype.buildLine=function(graphicsData,webGLData){var i=0,points=graphicsData.points;if(0!==points.length){var firstPoint=new math.Point(points[0],points[1]),lastPoint=new math.Point(points[points.length-2],points[points.length-1]);if(firstPoint.x===lastPoint.x&&firstPoint.y===lastPoint.y){points=points.slice(),points.pop(),points.pop(),lastPoint=new math.Point(points[points.length-2],points[points.length-1]);var midPointX=lastPoint.x+.5*(firstPoint.x-lastPoint.x),midPointY=lastPoint.y+.5*(firstPoint.y-lastPoint.y);points.unshift(midPointX,midPointY),points.push(midPointX,midPointY)}var px,py,p1x,p1y,p2x,p2y,p3x,p3y,perpx,perpy,perp2x,perp2y,perp3x,perp3y,a1,b1,c1,a2,b2,c2,denom,pdist,dist,verts=webGLData.points,indices=webGLData.indices,length=points.length/2,indexCount=points.length,indexStart=verts.length/6,width=graphicsData.lineWidth/2,color=utils.hex2rgb(graphicsData.lineColor),alpha=graphicsData.lineAlpha,r=color[0]*alpha,g=color[1]*alpha,b=color[2]*alpha;for(p1x=points[0],p1y=points[1],p2x=points[2],p2y=points[3],perpx=-(p1y-p2y),perpy=p1x-p2x,dist=Math.sqrt(perpx*perpx+perpy*perpy),perpx/=dist,perpy/=dist,perpx*=width,perpy*=width,verts.push(p1x-perpx,p1y-perpy,r,g,b,alpha),verts.push(p1x+perpx,p1y+perpy,r,g,b,alpha),i=1;length-1>i;i++)p1x=points[2*(i-1)],p1y=points[2*(i-1)+1],p2x=points[2*i],p2y=points[2*i+1],p3x=points[2*(i+1)],p3y=points[2*(i+1)+1],perpx=-(p1y-p2y),perpy=p1x-p2x,dist=Math.sqrt(perpx*perpx+perpy*perpy),perpx/=dist,perpy/=dist,perpx*=width,perpy*=width,perp2x=-(p2y-p3y),perp2y=p2x-p3x,dist=Math.sqrt(perp2x*perp2x+perp2y*perp2y),perp2x/=dist,perp2y/=dist,perp2x*=width,perp2y*=width,a1=-perpy+p1y-(-perpy+p2y),b1=-perpx+p2x-(-perpx+p1x),c1=(-perpx+p1x)*(-perpy+p2y)-(-perpx+p2x)*(-perpy+p1y),a2=-perp2y+p3y-(-perp2y+p2y),b2=-perp2x+p2x-(-perp2x+p3x),c2=(-perp2x+p3x)*(-perp2y+p2y)-(-perp2x+p2x)*(-perp2y+p3y),denom=a1*b2-a2*b1,Math.abs(denom)<.1?(denom+=10.1,verts.push(p2x-perpx,p2y-perpy,r,g,b,alpha),verts.push(p2x+perpx,p2y+perpy,r,g,b,alpha)):(px=(b1*c2-b2*c1)/denom,py=(a2*c1-a1*c2)/denom,pdist=(px-p2x)*(px-p2x)+(py-p2y)*(py-p2y),pdist>19600?(perp3x=perpx-perp2x,perp3y=perpy-perp2y,dist=Math.sqrt(perp3x*perp3x+perp3y*perp3y),perp3x/=dist,perp3y/=dist,perp3x*=width,perp3y*=width,verts.push(p2x-perp3x,p2y-perp3y),verts.push(r,g,b,alpha),verts.push(p2x+perp3x,p2y+perp3y),verts.push(r,g,b,alpha),verts.push(p2x-perp3x,p2y-perp3y),verts.push(r,g,b,alpha),indexCount++):(verts.push(px,py),verts.push(r,g,b,alpha),verts.push(p2x-(px-p2x),p2y-(py-p2y)),verts.push(r,g,b,alpha)));for(p1x=points[2*(length-2)],p1y=points[2*(length-2)+1],p2x=points[2*(length-1)],p2y=points[2*(length-1)+1],perpx=-(p1y-p2y),perpy=p1x-p2x,dist=Math.sqrt(perpx*perpx+perpy*perpy),perpx/=dist,perpy/=dist,perpx*=width,perpy*=width,verts.push(p2x-perpx,p2y-perpy),verts.push(r,g,b,alpha),verts.push(p2x+perpx,p2y+perpy),verts.push(r,g,b,alpha),indices.push(indexStart),i=0;indexCount>i;i++)indices.push(indexStart++);indices.push(indexStart-1)}},GraphicsRenderer.prototype.buildComplexPoly=function(graphicsData,webGLData){var points=graphicsData.points.slice();if(!(points.length<6)){var indices=webGLData.indices;webGLData.points=points,webGLData.alpha=graphicsData.fillAlpha,webGLData.color=utils.hex2rgb(graphicsData.fillColor);for(var x,y,minX=1/0,maxX=-(1/0),minY=1/0,maxY=-(1/0),i=0;i<points.length;i+=2)x=points[i],y=points[i+1],minX=minX>x?x:minX,maxX=x>maxX?x:maxX,minY=minY>y?y:minY,maxY=y>maxY?y:maxY;points.push(minX,minY,maxX,minY,maxX,maxY,minX,maxY);var length=points.length/2;for(i=0;length>i;i++)indices.push(i)}},GraphicsRenderer.prototype.buildPoly=function(graphicsData,webGLData){var points=graphicsData.points;if(!(points.length<6)){var verts=webGLData.points,indices=webGLData.indices,length=points.length/2,color=utils.hex2rgb(graphicsData.fillColor),alpha=graphicsData.fillAlpha,r=color[0]*alpha,g=color[1]*alpha,b=color[2]*alpha,triangles=earcut(points,null,2);if(!triangles)return!1;var vertPos=verts.length/6,i=0;for(i=0;i<triangles.length;i+=3)indices.push(triangles[i]+vertPos),indices.push(triangles[i]+vertPos),indices.push(triangles[i+1]+vertPos),indices.push(triangles[i+2]+vertPos),indices.push(triangles[i+2]+vertPos);for(i=0;length>i;i++)verts.push(points[2*i],points[2*i+1],r,g,b,alpha);return!0}}},{"../../const":320,"../../math":331,"../../renderers/webgl/WebGLRenderer":347,"../../renderers/webgl/utils/ObjectRenderer":361,"../../utils":375,"./WebGLGraphicsData":326,earcut:304}],326:[function(require,module,exports){function WebGLGraphicsData(gl){this.gl=gl,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=gl.createBuffer(),this.indexBuffer=gl.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}WebGLGraphicsData.prototype.constructor=WebGLGraphicsData,module.exports=WebGLGraphicsData,WebGLGraphicsData.prototype.reset=function(){this.points.length=0,this.indices.length=0},WebGLGraphicsData.prototype.upload=function(){var gl=this.gl;this.glPoints=new Float32Array(this.points),gl.bindBuffer(gl.ARRAY_BUFFER,this.buffer),gl.bufferData(gl.ARRAY_BUFFER,this.glPoints,gl.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,this.glIndices,gl.STATIC_DRAW),this.dirty=!1},WebGLGraphicsData.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{}],327:[function(require,module,exports){var core=module.exports=Object.assign(require("./const"),require("./math"),{utils:require("./utils"),ticker:require("./ticker"),DisplayObject:require("./display/DisplayObject"),Container:require("./display/Container"),Sprite:require("./sprites/Sprite"),ParticleContainer:require("./particles/ParticleContainer"),SpriteRenderer:require("./sprites/webgl/SpriteRenderer"),ParticleRenderer:require("./particles/webgl/ParticleRenderer"),Text:require("./text/Text"),Graphics:require("./graphics/Graphics"),GraphicsData:require("./graphics/GraphicsData"),GraphicsRenderer:require("./graphics/webgl/GraphicsRenderer"),Texture:require("./textures/Texture"),BaseTexture:require("./textures/BaseTexture"),RenderTexture:require("./textures/RenderTexture"),VideoBaseTexture:require("./textures/VideoBaseTexture"),TextureUvs:require("./textures/TextureUvs"),CanvasRenderer:require("./renderers/canvas/CanvasRenderer"),CanvasGraphics:require("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:require("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:require("./renderers/webgl/WebGLRenderer"),WebGLManager:require("./renderers/webgl/managers/WebGLManager"),ShaderManager:require("./renderers/webgl/managers/ShaderManager"),Shader:require("./renderers/webgl/shaders/Shader"),TextureShader:require("./renderers/webgl/shaders/TextureShader"),PrimitiveShader:require("./renderers/webgl/shaders/PrimitiveShader"),ComplexPrimitiveShader:require("./renderers/webgl/shaders/ComplexPrimitiveShader"),ObjectRenderer:require("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:require("./renderers/webgl/utils/RenderTarget"),AbstractFilter:require("./renderers/webgl/filters/AbstractFilter"),FXAAFilter:require("./renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:require("./renderers/webgl/filters/SpriteMaskFilter"),autoDetectRenderer:function(width,height,options,noWebGL){return width=width||800,height=height||600,!noWebGL&&core.utils.isWebGLSupported()?new core.WebGLRenderer(width,height,options):new core.CanvasRenderer(width,height,options)}})},{"./const":320,"./display/Container":321,"./display/DisplayObject":322,"./graphics/Graphics":323,"./graphics/GraphicsData":324,"./graphics/webgl/GraphicsRenderer":325,"./math":331,"./particles/ParticleContainer":337,"./particles/webgl/ParticleRenderer":339,"./renderers/canvas/CanvasRenderer":342,"./renderers/canvas/utils/CanvasBuffer":343,"./renderers/canvas/utils/CanvasGraphics":344,"./renderers/webgl/WebGLRenderer":347,"./renderers/webgl/filters/AbstractFilter":348,"./renderers/webgl/filters/FXAAFilter":349,"./renderers/webgl/filters/SpriteMaskFilter":350,"./renderers/webgl/managers/ShaderManager":354,"./renderers/webgl/managers/WebGLManager":356,"./renderers/webgl/shaders/ComplexPrimitiveShader":357,"./renderers/webgl/shaders/PrimitiveShader":358,"./renderers/webgl/shaders/Shader":359,"./renderers/webgl/shaders/TextureShader":360,"./renderers/webgl/utils/ObjectRenderer":361,"./renderers/webgl/utils/RenderTarget":363,"./sprites/Sprite":365,"./sprites/webgl/SpriteRenderer":366,"./text/Text":367,"./textures/BaseTexture":368,"./textures/RenderTexture":369,"./textures/Texture":370,"./textures/TextureUvs":371,"./textures/VideoBaseTexture":372,"./ticker":374,"./utils":375}],328:[function(require,module,exports){function signum(x){return 0>x?-1:x>0?1:0}function init(){for(var i=0;16>i;i++){var row=[];mul.push(row);for(var j=0;16>j;j++)for(var _ux=signum(ux[i]*ux[j]+vx[i]*uy[j]),_uy=signum(uy[i]*ux[j]+vy[i]*uy[j]),_vx=signum(ux[i]*vx[j]+vx[i]*vy[j]),_vy=signum(uy[i]*vx[j]+vy[i]*vy[j]),k=0;16>k;k++)if(ux[k]===_ux&&uy[k]===_uy&&vx[k]===_vx&&vy[k]===_vy){row.push(k);break}}for(i=0;16>i;i++){var mat=new Matrix;mat.set(ux[i],uy[i],vx[i],vy[i],0,0),tempMatrices.push(mat)}}var ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],tempMatrices=[],Matrix=require("./Matrix"),mul=[];init();var GroupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(ind){return ux[ind]},uY:function(ind){return uy[ind]},vX:function(ind){return vx[ind]},vY:function(ind){return vy[ind]},inv:function(rotation){return 8&rotation?15&rotation:7&-rotation},add:function(rotationSecond,rotationFirst){return mul[rotationSecond][rotationFirst]},sub:function(rotationSecond,rotationFirst){return mul[rotationSecond][GroupD8.inv(rotationFirst)]},rotate180:function(rotation){return 4^rotation},isSwapWidthHeight:function(rotation){return 2===(3&rotation)},byDirection:function(dx,dy){return 2*Math.abs(dx)<=Math.abs(dy)?dy>=0?GroupD8.S:GroupD8.N:2*Math.abs(dy)<=Math.abs(dx)?dx>0?GroupD8.E:GroupD8.W:dy>0?dx>0?GroupD8.SE:GroupD8.SW:dx>0?GroupD8.NE:GroupD8.NW},matrixAppendRotationInv:function(matrix,rotation,tx,ty){var mat=tempMatrices[GroupD8.inv(rotation)];tx=tx||0,ty=ty||0,mat.tx=tx,mat.ty=ty,matrix.append(mat)}};module.exports=GroupD8},{"./Matrix":329}],329:[function(require,module,exports){function Matrix(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var Point=require("./Point");Matrix.prototype.constructor=Matrix,module.exports=Matrix,Matrix.prototype.fromArray=function(array){this.a=array[0],this.b=array[1],this.c=array[3],this.d=array[4],this.tx=array[2],this.ty=array[5]},Matrix.prototype.set=function(a,b,c,d,tx,ty){return this.a=a,this.b=b,this.c=c,this.d=d,this.tx=tx,this.ty=ty,this},Matrix.prototype.toArray=function(transpose,out){this.array||(this.array=new Float32Array(9));var array=out||this.array;return transpose?(array[0]=this.a,array[1]=this.b,array[2]=0,array[3]=this.c,array[4]=this.d,array[5]=0,array[6]=this.tx,array[7]=this.ty,array[8]=1):(array[0]=this.a,array[1]=this.c,array[2]=this.tx,array[3]=this.b,array[4]=this.d,array[5]=this.ty,array[6]=0,array[7]=0,array[8]=1),array},Matrix.prototype.apply=function(pos,newPos){newPos=newPos||new Point;var x=pos.x,y=pos.y;return newPos.x=this.a*x+this.c*y+this.tx,newPos.y=this.b*x+this.d*y+this.ty,newPos},Matrix.prototype.applyInverse=function(pos,newPos){newPos=newPos||new Point;var id=1/(this.a*this.d+this.c*-this.b),x=pos.x,y=pos.y;return newPos.x=this.d*id*x+-this.c*id*y+(this.ty*this.c-this.tx*this.d)*id,newPos.y=this.a*id*y+-this.b*id*x+(-this.ty*this.a+this.tx*this.b)*id,newPos},Matrix.prototype.translate=function(x,y){return this.tx+=x,this.ty+=y,this},Matrix.prototype.scale=function(x,y){return this.a*=x,this.d*=y,this.c*=x,this.b*=y,this.tx*=x,this.ty*=y,this},Matrix.prototype.rotate=function(angle){var cos=Math.cos(angle),sin=Math.sin(angle),a1=this.a,c1=this.c,tx1=this.tx;return this.a=a1*cos-this.b*sin,this.b=a1*sin+this.b*cos,this.c=c1*cos-this.d*sin,this.d=c1*sin+this.d*cos,this.tx=tx1*cos-this.ty*sin,this.ty=tx1*sin+this.ty*cos,this},Matrix.prototype.append=function(matrix){var a1=this.a,b1=this.b,c1=this.c,d1=this.d;return this.a=matrix.a*a1+matrix.b*c1,this.b=matrix.a*b1+matrix.b*d1,this.c=matrix.c*a1+matrix.d*c1,this.d=matrix.c*b1+matrix.d*d1,this.tx=matrix.tx*a1+matrix.ty*c1+this.tx,this.ty=matrix.tx*b1+matrix.ty*d1+this.ty,this},Matrix.prototype.setTransform=function(x,y,pivotX,pivotY,scaleX,scaleY,rotation,skewX,skewY){var a,b,c,d,sr,cr,cy,sy,nsx,cx;return sr=Math.sin(rotation),cr=Math.cos(rotation),cy=Math.cos(skewY),sy=Math.sin(skewY),nsx=-Math.sin(skewX),cx=Math.cos(skewX),a=cr*scaleX,b=sr*scaleX,c=-sr*scaleY,d=cr*scaleY,this.a=cy*a+sy*c,this.b=cy*b+sy*d,this.c=nsx*a+cx*c,this.d=nsx*b+cx*d,this.tx=x+(pivotX*a+pivotY*c),this.ty=y+(pivotX*b+pivotY*d),this},Matrix.prototype.prepend=function(matrix){var tx1=this.tx;if(1!==matrix.a||0!==matrix.b||0!==matrix.c||1!==matrix.d){var a1=this.a,c1=this.c;this.a=a1*matrix.a+this.b*matrix.c,this.b=a1*matrix.b+this.b*matrix.d,this.c=c1*matrix.a+this.d*matrix.c,this.d=c1*matrix.b+this.d*matrix.d}return this.tx=tx1*matrix.a+this.ty*matrix.c+matrix.tx,this.ty=tx1*matrix.b+this.ty*matrix.d+matrix.ty,this},Matrix.prototype.invert=function(){var a1=this.a,b1=this.b,c1=this.c,d1=this.d,tx1=this.tx,n=a1*d1-b1*c1;return this.a=d1/n,this.b=-b1/n,this.c=-c1/n,this.d=a1/n,this.tx=(c1*this.ty-d1*tx1)/n,this.ty=-(a1*this.ty-b1*tx1)/n,this},Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Matrix.prototype.clone=function(){var matrix=new Matrix;return matrix.a=this.a,matrix.b=this.b,matrix.c=this.c,matrix.d=this.d,matrix.tx=this.tx,matrix.ty=this.ty,matrix},Matrix.prototype.copy=function(matrix){return matrix.a=this.a,matrix.b=this.b,matrix.c=this.c,matrix.d=this.d,matrix.tx=this.tx,matrix.ty=this.ty,matrix},Matrix.IDENTITY=new Matrix,Matrix.TEMP_MATRIX=new Matrix},{"./Point":330}],330:[function(require,module,exports){function Point(x,y){this.x=x||0,this.y=y||0}Point.prototype.constructor=Point,module.exports=Point,Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.copy=function(p){this.set(p.x,p.y)},Point.prototype.equals=function(p){return p.x===this.x&&p.y===this.y},Point.prototype.set=function(x,y){this.x=x||0,this.y=y||(0!==y?this.x:0)}},{}],331:[function(require,module,exports){module.exports={Point:require("./Point"),Matrix:require("./Matrix"),GroupD8:require("./GroupD8"),Circle:require("./shapes/Circle"),Ellipse:require("./shapes/Ellipse"),Polygon:require("./shapes/Polygon"),Rectangle:require("./shapes/Rectangle"),RoundedRectangle:require("./shapes/RoundedRectangle")}},{"./GroupD8":328,"./Matrix":329,"./Point":330,"./shapes/Circle":332,"./shapes/Ellipse":333,"./shapes/Polygon":334,"./shapes/Rectangle":335,"./shapes/RoundedRectangle":336}],332:[function(require,module,exports){function Circle(x,y,radius){this.x=x||0,this.y=y||0,this.radius=radius||0,this.type=CONST.SHAPES.CIRC}var Rectangle=require("./Rectangle"),CONST=require("../../const");Circle.prototype.constructor=Circle,module.exports=Circle,Circle.prototype.clone=function(){return new Circle(this.x,this.y,this.radius)},Circle.prototype.contains=function(x,y){if(this.radius<=0)return!1;var dx=this.x-x,dy=this.y-y,r2=this.radius*this.radius;return dx*=dx,dy*=dy,r2>=dx+dy},Circle.prototype.getBounds=function(){return new Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":320,"./Rectangle":335}],333:[function(require,module,exports){function Ellipse(x,y,width,height){this.x=x||0,this.y=y||0,this.width=width||0,this.height=height||0,this.type=CONST.SHAPES.ELIP}var Rectangle=require("./Rectangle"),CONST=require("../../const");Ellipse.prototype.constructor=Ellipse,module.exports=Ellipse,
Ellipse.prototype.clone=function(){return new Ellipse(this.x,this.y,this.width,this.height)},Ellipse.prototype.contains=function(x,y){if(this.width<=0||this.height<=0)return!1;var normx=(x-this.x)/this.width,normy=(y-this.y)/this.height;return normx*=normx,normy*=normy,1>=normx+normy},Ellipse.prototype.getBounds=function(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":320,"./Rectangle":335}],334:[function(require,module,exports){function Polygon(points_){var points=points_;if(!Array.isArray(points)){points=new Array(arguments.length);for(var a=0;a<points.length;++a)points[a]=arguments[a]}if(points[0]instanceof Point){for(var p=[],i=0,il=points.length;il>i;i++)p.push(points[i].x,points[i].y);points=p}this.closed=!0,this.points=points,this.type=CONST.SHAPES.POLY}var Point=require("../Point"),CONST=require("../../const");Polygon.prototype.constructor=Polygon,module.exports=Polygon,Polygon.prototype.clone=function(){return new Polygon(this.points.slice())},Polygon.prototype.contains=function(x,y){for(var inside=!1,length=this.points.length/2,i=0,j=length-1;length>i;j=i++){var xi=this.points[2*i],yi=this.points[2*i+1],xj=this.points[2*j],yj=this.points[2*j+1],intersect=yi>y!=yj>y&&(xj-xi)*(y-yi)/(yj-yi)+xi>x;intersect&&(inside=!inside)}return inside}},{"../../const":320,"../Point":330}],335:[function(require,module,exports){function Rectangle(x,y,width,height){this.x=x||0,this.y=y||0,this.width=width||0,this.height=height||0,this.type=CONST.SHAPES.RECT}var CONST=require("../../const");Rectangle.prototype.constructor=Rectangle,module.exports=Rectangle,Rectangle.EMPTY=new Rectangle(0,0,0,0),Rectangle.prototype.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)},Rectangle.prototype.contains=function(x,y){return this.width<=0||this.height<=0?!1:x>=this.x&&x<this.x+this.width&&y>=this.y&&y<this.y+this.height}},{"../../const":320}],336:[function(require,module,exports){function RoundedRectangle(x,y,width,height,radius){this.x=x||0,this.y=y||0,this.width=width||0,this.height=height||0,this.radius=radius||20,this.type=CONST.SHAPES.RREC}var CONST=require("../../const");RoundedRectangle.prototype.constructor=RoundedRectangle,module.exports=RoundedRectangle,RoundedRectangle.prototype.clone=function(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},RoundedRectangle.prototype.contains=function(x,y){return this.width<=0||this.height<=0?!1:x>=this.x&&x<=this.x+this.width&&y>=this.y&&y<=this.y+this.height}},{"../../const":320}],337:[function(require,module,exports){function ParticleContainer(maxSize,properties,batchSize){Container.call(this),batchSize=batchSize||15e3,maxSize=maxSize||15e3;var maxBatchSize=16384;batchSize>maxBatchSize&&(batchSize=maxBatchSize),batchSize>maxSize&&(batchSize=maxSize),this._properties=[!1,!0,!1,!1,!1],this._maxSize=maxSize,this._batchSize=batchSize,this._buffers=null,this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=CONST.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(properties)}var Container=require("../display/Container"),CONST=require("../const");ParticleContainer.prototype=Object.create(Container.prototype),ParticleContainer.prototype.constructor=ParticleContainer,module.exports=ParticleContainer,ParticleContainer.prototype.setProperties=function(properties){properties&&(this._properties[0]="scale"in properties?!!properties.scale:this._properties[0],this._properties[1]="position"in properties?!!properties.position:this._properties[1],this._properties[2]="rotation"in properties?!!properties.rotation:this._properties[2],this._properties[3]="uvs"in properties?!!properties.uvs:this._properties[3],this._properties[4]="alpha"in properties?!!properties.alpha:this._properties[4])},ParticleContainer.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},ParticleContainer.prototype.renderWebGL=function(renderer){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(renderer.setObjectRenderer(renderer.plugins.particle),renderer.plugins.particle.render(this))},ParticleContainer.prototype.onChildrenChange=function(smallestChildIndex){var bufferIndex=Math.floor(smallestChildIndex/this._batchSize);bufferIndex<this._bufferToUpdate&&(this._bufferToUpdate=bufferIndex)},ParticleContainer.prototype.renderCanvas=function(renderer){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var context=renderer.context,transform=this.worldTransform,isRotated=!0,positionX=0,positionY=0,finalWidth=0,finalHeight=0,compositeOperation=renderer.blendModes[this.blendMode];compositeOperation!==context.globalCompositeOperation&&(context.globalCompositeOperation=compositeOperation),context.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var i=0;i<this.children.length;++i){var child=this.children[i];if(child.visible){var frame=child.texture.frame;if(context.globalAlpha=this.worldAlpha*child.alpha,child.rotation%(2*Math.PI)===0)isRotated&&(context.setTransform(transform.a,transform.b,transform.c,transform.d,transform.tx,transform.ty),isRotated=!1),positionX=child.anchor.x*(-frame.width*child.scale.x)+child.position.x+.5,positionY=child.anchor.y*(-frame.height*child.scale.y)+child.position.y+.5,finalWidth=frame.width*child.scale.x,finalHeight=frame.height*child.scale.y;else{isRotated||(isRotated=!0),child.displayObjectUpdateTransform();var childTransform=child.worldTransform;renderer.roundPixels?context.setTransform(childTransform.a,childTransform.b,childTransform.c,childTransform.d,0|childTransform.tx,0|childTransform.ty):context.setTransform(childTransform.a,childTransform.b,childTransform.c,childTransform.d,childTransform.tx,childTransform.ty),positionX=child.anchor.x*-frame.width+.5,positionY=child.anchor.y*-frame.height+.5,finalWidth=frame.width,finalHeight=frame.height}context.drawImage(child.texture.baseTexture.source,frame.x,frame.y,frame.width,frame.height,positionX,positionY,finalWidth,finalHeight)}}}},ParticleContainer.prototype.destroy=function(){if(Container.prototype.destroy.apply(this,arguments),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null}},{"../const":320,"../display/Container":321}],338:[function(require,module,exports){function ParticleBuffer(gl,properties,dynamicPropertyFlags,size){this.gl=gl,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=size,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<properties.length;i++){var property=properties[i];dynamicPropertyFlags[i]?this.dynamicProperties.push(property):this.staticProperties.push(property)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}ParticleBuffer.prototype.constructor=ParticleBuffer,module.exports=ParticleBuffer,ParticleBuffer.prototype.initBuffers=function(){var i,property,gl=this.gl,dynamicOffset=0;for(this.dynamicStride=0,i=0;i<this.dynamicProperties.length;i++)property=this.dynamicProperties[i],property.offset=dynamicOffset,dynamicOffset+=property.size,this.dynamicStride+=property.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,this.dynamicBuffer),gl.bufferData(gl.ARRAY_BUFFER,this.dynamicData,gl.DYNAMIC_DRAW);var staticOffset=0;for(this.staticStride=0,i=0;i<this.staticProperties.length;i++)property=this.staticProperties[i],property.offset=staticOffset,staticOffset+=property.size,this.staticStride+=property.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,this.staticBuffer),gl.bufferData(gl.ARRAY_BUFFER,this.staticData,gl.DYNAMIC_DRAW)},ParticleBuffer.prototype.uploadDynamic=function(children,startIndex,amount){for(var gl=this.gl,i=0;i<this.dynamicProperties.length;i++){var property=this.dynamicProperties[i];property.uploadFunction(children,startIndex,amount,this.dynamicData,this.dynamicStride,property.offset)}gl.bindBuffer(gl.ARRAY_BUFFER,this.dynamicBuffer),gl.bufferSubData(gl.ARRAY_BUFFER,0,this.dynamicData)},ParticleBuffer.prototype.uploadStatic=function(children,startIndex,amount){for(var gl=this.gl,i=0;i<this.staticProperties.length;i++){var property=this.staticProperties[i];property.uploadFunction(children,startIndex,amount,this.staticData,this.staticStride,property.offset)}gl.bindBuffer(gl.ARRAY_BUFFER,this.staticBuffer),gl.bufferSubData(gl.ARRAY_BUFFER,0,this.staticData)},ParticleBuffer.prototype.bind=function(){var i,property,gl=this.gl;for(gl.bindBuffer(gl.ARRAY_BUFFER,this.dynamicBuffer),i=0;i<this.dynamicProperties.length;i++)property=this.dynamicProperties[i],gl.vertexAttribPointer(property.attribute,property.size,gl.FLOAT,!1,4*this.dynamicStride,4*property.offset);for(gl.bindBuffer(gl.ARRAY_BUFFER,this.staticBuffer),i=0;i<this.staticProperties.length;i++)property=this.staticProperties[i],gl.vertexAttribPointer(property.attribute,property.size,gl.FLOAT,!1,4*this.staticStride,4*property.offset)},ParticleBuffer.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},{}],339:[function(require,module,exports){function ParticleRenderer(renderer){ObjectRenderer.call(this,renderer);var numIndices=98304;this.indices=new Uint16Array(numIndices);for(var i=0,j=0;numIndices>i;i+=6,j+=4)this.indices[i+0]=j+0,this.indices[i+1]=j+1,this.indices[i+2]=j+2,this.indices[i+3]=j+0,this.indices[i+4]=j+2,this.indices[i+5]=j+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new math.Matrix}var ObjectRenderer=require("../../renderers/webgl/utils/ObjectRenderer"),WebGLRenderer=require("../../renderers/webgl/WebGLRenderer"),ParticleShader=require("./ParticleShader"),ParticleBuffer=require("./ParticleBuffer"),math=require("../../math");ParticleRenderer.prototype=Object.create(ObjectRenderer.prototype),ParticleRenderer.prototype.constructor=ParticleRenderer,module.exports=ParticleRenderer,WebGLRenderer.registerPlugin("particle",ParticleRenderer),ParticleRenderer.prototype.onContextChange=function(){var gl=this.renderer.gl;this.shader=new ParticleShader(this.renderer.shaderManager),this.indexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,this.indices,gl.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},ParticleRenderer.prototype.start=function(){var gl=this.renderer.gl;gl.activeTexture(gl.TEXTURE0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var shader=this.shader;this.renderer.shaderManager.setShader(shader)},ParticleRenderer.prototype.render=function(container){var children=container.children,totalChildren=children.length,maxSize=container._maxSize,batchSize=container._batchSize;if(0!==totalChildren){totalChildren>maxSize&&(totalChildren=maxSize),container._buffers||(container._buffers=this.generateBuffers(container)),this.renderer.blendModeManager.setBlendMode(container.blendMode);var gl=this.renderer.gl,m=container.worldTransform.copy(this.tempMatrix);m.prepend(this.renderer.currentRenderTarget.projectionMatrix),gl.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,m.toArray(!0)),gl.uniform1f(this.shader.uniforms.uAlpha._location,container.worldAlpha);var baseTexture=children[0]._texture.baseTexture;if(baseTexture._glTextures[gl.id])gl.bindTexture(gl.TEXTURE_2D,baseTexture._glTextures[gl.id]);else{if(!this.renderer.updateTexture(baseTexture))return;container._properties[0]&&container._properties[3]||(container._bufferToUpdate=0)}for(var i=0,j=0;totalChildren>i;i+=batchSize,j+=1){var amount=totalChildren-i;amount>batchSize&&(amount=batchSize);var buffer=container._buffers[j];buffer.uploadDynamic(children,i,amount),container._bufferToUpdate===j&&(buffer.uploadStatic(children,i,amount),container._bufferToUpdate=j+1),buffer.bind(this.shader),gl.drawElements(gl.TRIANGLES,6*amount,gl.UNSIGNED_SHORT,0),this.renderer.drawCount++}}},ParticleRenderer.prototype.generateBuffers=function(container){var i,gl=this.renderer.gl,buffers=[],size=container._maxSize,batchSize=container._batchSize,dynamicPropertyFlags=container._properties;for(i=0;size>i;i+=batchSize)buffers.push(new ParticleBuffer(gl,this.properties,dynamicPropertyFlags,batchSize));return buffers},ParticleRenderer.prototype.uploadVertices=function(children,startIndex,amount,array,stride,offset){for(var sprite,texture,trim,sx,sy,w0,w1,h0,h1,i=0;amount>i;i++)sprite=children[startIndex+i],texture=sprite._texture,sx=sprite.scale.x,sy=sprite.scale.y,texture.trim?(trim=texture.trim,w1=trim.x-sprite.anchor.x*trim.width,w0=w1+texture.crop.width,h1=trim.y-sprite.anchor.y*trim.height,h0=h1+texture.crop.height):(w0=texture._frame.width*(1-sprite.anchor.x),w1=texture._frame.width*-sprite.anchor.x,h0=texture._frame.height*(1-sprite.anchor.y),h1=texture._frame.height*-sprite.anchor.y),array[offset]=w1*sx,array[offset+1]=h1*sy,array[offset+stride]=w0*sx,array[offset+stride+1]=h1*sy,array[offset+2*stride]=w0*sx,array[offset+2*stride+1]=h0*sy,array[offset+3*stride]=w1*sx,array[offset+3*stride+1]=h0*sy,offset+=4*stride},ParticleRenderer.prototype.uploadPosition=function(children,startIndex,amount,array,stride,offset){for(var i=0;amount>i;i++){var spritePosition=children[startIndex+i].position;array[offset]=spritePosition.x,array[offset+1]=spritePosition.y,array[offset+stride]=spritePosition.x,array[offset+stride+1]=spritePosition.y,array[offset+2*stride]=spritePosition.x,array[offset+2*stride+1]=spritePosition.y,array[offset+3*stride]=spritePosition.x,array[offset+3*stride+1]=spritePosition.y,offset+=4*stride}},ParticleRenderer.prototype.uploadRotation=function(children,startIndex,amount,array,stride,offset){for(var i=0;amount>i;i++){var spriteRotation=children[startIndex+i].rotation;array[offset]=spriteRotation,array[offset+stride]=spriteRotation,array[offset+2*stride]=spriteRotation,array[offset+3*stride]=spriteRotation,offset+=4*stride}},ParticleRenderer.prototype.uploadUvs=function(children,startIndex,amount,array,stride,offset){for(var i=0;amount>i;i++){var textureUvs=children[startIndex+i]._texture._uvs;textureUvs?(array[offset]=textureUvs.x0,array[offset+1]=textureUvs.y0,array[offset+stride]=textureUvs.x1,array[offset+stride+1]=textureUvs.y1,array[offset+2*stride]=textureUvs.x2,array[offset+2*stride+1]=textureUvs.y2,array[offset+3*stride]=textureUvs.x3,array[offset+3*stride+1]=textureUvs.y3,offset+=4*stride):(array[offset]=0,array[offset+1]=0,array[offset+stride]=0,array[offset+stride+1]=0,array[offset+2*stride]=0,array[offset+2*stride+1]=0,array[offset+3*stride]=0,array[offset+3*stride+1]=0,offset+=4*stride)}},ParticleRenderer.prototype.uploadAlpha=function(children,startIndex,amount,array,stride,offset){for(var i=0;amount>i;i++){var spriteAlpha=children[startIndex+i].alpha;array[offset]=spriteAlpha,array[offset+stride]=spriteAlpha,array[offset+2*stride]=spriteAlpha,array[offset+3*stride]=spriteAlpha,offset+=4*stride}},ParticleRenderer.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),ObjectRenderer.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{"../../math":331,"../../renderers/webgl/WebGLRenderer":347,"../../renderers/webgl/utils/ObjectRenderer":361,"./ParticleBuffer":338,"./ParticleShader":340}],340:[function(require,module,exports){function ParticleShader(shaderManager){TextureShader.call(this,shaderManager,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var TextureShader=require("../../renderers/webgl/shaders/TextureShader");ParticleShader.prototype=Object.create(TextureShader.prototype),ParticleShader.prototype.constructor=ParticleShader,module.exports=ParticleShader},{"../../renderers/webgl/shaders/TextureShader":360}],341:[function(require,module,exports){function SystemRenderer(system,width,height,options){if(EventEmitter.call(this),utils.sayHello(system),options)for(var i in CONST.DEFAULT_RENDER_OPTIONS)"undefined"==typeof options[i]&&(options[i]=CONST.DEFAULT_RENDER_OPTIONS[i]);else options=CONST.DEFAULT_RENDER_OPTIONS;this.type=CONST.RENDERER_TYPE.UNKNOWN,this.width=width||800,this.height=height||600,this.view=options.view||document.createElement("canvas"),this.resolution=options.resolution,this.transparent=options.transparent,this.autoResize=options.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=options.preserveDrawingBuffer,this.clearBeforeRender=options.clearBeforeRender,this.roundPixels=options.roundPixels,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=options.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new math.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var utils=require("../utils"),math=require("../math"),CONST=require("../const"),EventEmitter=require("eventemitter3");SystemRenderer.prototype=Object.create(EventEmitter.prototype),SystemRenderer.prototype.constructor=SystemRenderer,module.exports=SystemRenderer,Object.defineProperties(SystemRenderer.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(val){this._backgroundColor=val,this._backgroundColorString=utils.hex2string(val),utils.hex2rgb(val,this._backgroundColorRgb)}}}),SystemRenderer.prototype.resize=function(width,height){this.width=width*this.resolution,this.height=height*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},SystemRenderer.prototype.destroy=function(removeView){removeView&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=CONST.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},{"../const":320,"../math":331,"../utils":375,eventemitter3:305}],342:[function(require,module,exports){function CanvasRenderer(width,height,options){options=options||{},SystemRenderer.call(this,"Canvas",width,height,options),this.type=CONST.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new CanvasMaskManager,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new math.Matrix,worldAlpha:1},this.resize(width,height)}var SystemRenderer=require("../SystemRenderer"),CanvasMaskManager=require("./utils/CanvasMaskManager"),utils=require("../../utils"),math=require("../../math"),CONST=require("../../const");CanvasRenderer.prototype=Object.create(SystemRenderer.prototype),CanvasRenderer.prototype.constructor=CanvasRenderer,module.exports=CanvasRenderer,utils.pluginTarget.mixin(CanvasRenderer),CanvasRenderer.prototype.render=function(object){this.emit("prerender");var cacheParent=object.parent;this._lastObjectRendered=object,object.parent=this._tempDisplayObjectParent,object.updateTransform(),object.parent=cacheParent,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.context.globalCompositeOperation=this.blendModes[CONST.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(object,this.context),this.emit("postrender")},CanvasRenderer.prototype.destroy=function(removeView){this.destroyPlugins(),SystemRenderer.prototype.destroy.call(this,removeView),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},CanvasRenderer.prototype.renderDisplayObject=function(displayObject,context){var tempContext=this.context;this.context=context,displayObject.renderCanvas(this),this.context=tempContext},CanvasRenderer.prototype.resize=function(w,h){SystemRenderer.prototype.resize.call(this,w,h),this.smoothProperty&&(this.context[this.smoothProperty]=CONST.SCALE_MODES.DEFAULT===CONST.SCALE_MODES.LINEAR)},CanvasRenderer.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},utils.canUseNewCanvasBlendModes()?(this.blendModes[CONST.BLEND_MODES.NORMAL]="source-over",this.blendModes[CONST.BLEND_MODES.ADD]="lighter",this.blendModes[CONST.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[CONST.BLEND_MODES.SCREEN]="screen",this.blendModes[CONST.BLEND_MODES.OVERLAY]="overlay",this.blendModes[CONST.BLEND_MODES.DARKEN]="darken",this.blendModes[CONST.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[CONST.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[CONST.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[CONST.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[CONST.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[CONST.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[CONST.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[CONST.BLEND_MODES.HUE]="hue",this.blendModes[CONST.BLEND_MODES.SATURATION]="saturate",this.blendModes[CONST.BLEND_MODES.COLOR]="color",this.blendModes[CONST.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[CONST.BLEND_MODES.NORMAL]="source-over",this.blendModes[CONST.BLEND_MODES.ADD]="lighter",this.blendModes[CONST.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[CONST.BLEND_MODES.SCREEN]="source-over",this.blendModes[CONST.BLEND_MODES.OVERLAY]="source-over",this.blendModes[CONST.BLEND_MODES.DARKEN]="source-over",this.blendModes[CONST.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[CONST.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[CONST.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[CONST.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[CONST.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[CONST.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[CONST.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[CONST.BLEND_MODES.HUE]="source-over",this.blendModes[CONST.BLEND_MODES.SATURATION]="source-over",this.blendModes[CONST.BLEND_MODES.COLOR]="source-over",this.blendModes[CONST.BLEND_MODES.LUMINOSITY]="source-over"))}},{"../../const":320,"../../math":331,"../../utils":375,"../SystemRenderer":341,"./utils/CanvasMaskManager":345}],343:[function(require,module,exports){function CanvasBuffer(width,height){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=width,this.canvas.height=height}CanvasBuffer.prototype.constructor=CanvasBuffer,module.exports=CanvasBuffer,Object.defineProperties(CanvasBuffer.prototype,{width:{get:function(){return this.canvas.width},set:function(val){this.canvas.width=val}},height:{get:function(){return this.canvas.height},set:function(val){this.canvas.height=val}}}),CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},CanvasBuffer.prototype.resize=function(width,height){this.canvas.width=width,this.canvas.height=height},CanvasBuffer.prototype.destroy=function(){this.context=null,this.canvas=null}},{}],344:[function(require,module,exports){var CONST=require("../../../const"),CanvasGraphics={};module.exports=CanvasGraphics,CanvasGraphics.renderGraphics=function(graphics,context){var worldAlpha=graphics.worldAlpha;graphics.dirty&&(this.updateGraphicsTint(graphics),graphics.dirty=!1);for(var i=0;i<graphics.graphicsData.length;i++){var data=graphics.graphicsData[i],shape=data.shape,fillColor=data._fillTint,lineColor=data._lineTint;if(context.lineWidth=data.lineWidth,data.type===CONST.SHAPES.POLY){context.beginPath();var points=shape.points;context.moveTo(points[0],points[1]);for(var j=1;j<points.length/2;j++)context.lineTo(points[2*j],points[2*j+1]);shape.closed&&context.lineTo(points[0],points[1]),points[0]===points[points.length-2]&&points[1]===points[points.length-1]&&context.closePath(),data.fill&&(context.globalAlpha=data.fillAlpha*worldAlpha,context.fillStyle="#"+("00000"+(0|fillColor).toString(16)).substr(-6),context.fill()),data.lineWidth&&(context.globalAlpha=data.lineAlpha*worldAlpha,context.strokeStyle="#"+("00000"+(0|lineColor).toString(16)).substr(-6),context.stroke())}else if(data.type===CONST.SHAPES.RECT)(data.fillColor||0===data.fillColor)&&(context.globalAlpha=data.fillAlpha*worldAlpha,context.fillStyle="#"+("00000"+(0|fillColor).toString(16)).substr(-6),context.fillRect(shape.x,shape.y,shape.width,shape.height)),data.lineWidth&&(context.globalAlpha=data.lineAlpha*worldAlpha,context.strokeStyle="#"+("00000"+(0|lineColor).toString(16)).substr(-6),context.strokeRect(shape.x,shape.y,shape.width,shape.height));else if(data.type===CONST.SHAPES.CIRC)context.beginPath(),context.arc(shape.x,shape.y,shape.radius,0,2*Math.PI),context.closePath(),data.fill&&(context.globalAlpha=data.fillAlpha*worldAlpha,context.fillStyle="#"+("00000"+(0|fillColor).toString(16)).substr(-6),context.fill()),data.lineWidth&&(context.globalAlpha=data.lineAlpha*worldAlpha,context.strokeStyle="#"+("00000"+(0|lineColor).toString(16)).substr(-6),context.stroke());else if(data.type===CONST.SHAPES.ELIP){var w=2*shape.width,h=2*shape.height,x=shape.x-w/2,y=shape.y-h/2;context.beginPath();var kappa=.5522848,ox=w/2*kappa,oy=h/2*kappa,xe=x+w,ye=y+h,xm=x+w/2,ym=y+h/2;context.moveTo(x,ym),context.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y),context.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym),context.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye),context.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym),context.closePath(),data.fill&&(context.globalAlpha=data.fillAlpha*worldAlpha,context.fillStyle="#"+("00000"+(0|fillColor).toString(16)).substr(-6),context.fill()),data.lineWidth&&(context.globalAlpha=data.lineAlpha*worldAlpha,context.strokeStyle="#"+("00000"+(0|lineColor).toString(16)).substr(-6),context.stroke())}else if(data.type===CONST.SHAPES.RREC){var rx=shape.x,ry=shape.y,width=shape.width,height=shape.height,radius=shape.radius,maxRadius=Math.min(width,height)/2|0;radius=radius>maxRadius?maxRadius:radius,context.beginPath(),context.moveTo(rx,ry+radius),context.lineTo(rx,ry+height-radius),context.quadraticCurveTo(rx,ry+height,rx+radius,ry+height),context.lineTo(rx+width-radius,ry+height),context.quadraticCurveTo(rx+width,ry+height,rx+width,ry+height-radius),context.lineTo(rx+width,ry+radius),context.quadraticCurveTo(rx+width,ry,rx+width-radius,ry),context.lineTo(rx+radius,ry),context.quadraticCurveTo(rx,ry,rx,ry+radius),context.closePath(),(data.fillColor||0===data.fillColor)&&(context.globalAlpha=data.fillAlpha*worldAlpha,context.fillStyle="#"+("00000"+(0|fillColor).toString(16)).substr(-6),context.fill()),data.lineWidth&&(context.globalAlpha=data.lineAlpha*worldAlpha,context.strokeStyle="#"+("00000"+(0|lineColor).toString(16)).substr(-6),context.stroke())}}},CanvasGraphics.renderGraphicsMask=function(graphics,context){var len=graphics.graphicsData.length;if(0!==len){context.beginPath();for(var i=0;len>i;i++){var data=graphics.graphicsData[i],shape=data.shape;if(data.type===CONST.SHAPES.POLY){var points=shape.points;context.moveTo(points[0],points[1]);for(var j=1;j<points.length/2;j++)context.lineTo(points[2*j],points[2*j+1]);points[0]===points[points.length-2]&&points[1]===points[points.length-1]&&context.closePath()}else if(data.type===CONST.SHAPES.RECT)context.rect(shape.x,shape.y,shape.width,shape.height),context.closePath();else if(data.type===CONST.SHAPES.CIRC)context.arc(shape.x,shape.y,shape.radius,0,2*Math.PI),context.closePath();else if(data.type===CONST.SHAPES.ELIP){var w=2*shape.width,h=2*shape.height,x=shape.x-w/2,y=shape.y-h/2,kappa=.5522848,ox=w/2*kappa,oy=h/2*kappa,xe=x+w,ye=y+h,xm=x+w/2,ym=y+h/2;context.moveTo(x,ym),context.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y),context.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym),context.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye),context.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym),context.closePath()}else if(data.type===CONST.SHAPES.RREC){var rx=shape.x,ry=shape.y,width=shape.width,height=shape.height,radius=shape.radius,maxRadius=Math.min(width,height)/2|0;radius=radius>maxRadius?maxRadius:radius,context.moveTo(rx,ry+radius),context.lineTo(rx,ry+height-radius),context.quadraticCurveTo(rx,ry+height,rx+radius,ry+height),context.lineTo(rx+width-radius,ry+height),context.quadraticCurveTo(rx+width,ry+height,rx+width,ry+height-radius),context.lineTo(rx+width,ry+radius),context.quadraticCurveTo(rx+width,ry,rx+width-radius,ry),context.lineTo(rx+radius,ry),context.quadraticCurveTo(rx,ry,rx,ry+radius),context.closePath()}}}},CanvasGraphics.updateGraphicsTint=function(graphics){if(16777215!==graphics.tint||graphics._prevTint!==graphics.tint){graphics._prevTint=graphics.tint;for(var tintR=(graphics.tint>>16&255)/255,tintG=(graphics.tint>>8&255)/255,tintB=(255&graphics.tint)/255,i=0;i<graphics.graphicsData.length;i++){var data=graphics.graphicsData[i],fillColor=0|data.fillColor,lineColor=0|data.lineColor;data._fillTint=((fillColor>>16&255)/255*tintR*255<<16)+((fillColor>>8&255)/255*tintG*255<<8)+(255&fillColor)/255*tintB*255,data._lineTint=((lineColor>>16&255)/255*tintR*255<<16)+((lineColor>>8&255)/255*tintG*255<<8)+(255&lineColor)/255*tintB*255}}}},{"../../../const":320}],345:[function(require,module,exports){function CanvasMaskManager(){}var CanvasGraphics=require("./CanvasGraphics");CanvasMaskManager.prototype.constructor=CanvasMaskManager,module.exports=CanvasMaskManager,CanvasMaskManager.prototype.pushMask=function(maskData,renderer){renderer.context.save();var cacheAlpha=maskData.alpha,transform=maskData.worldTransform,resolution=renderer.resolution;renderer.context.setTransform(transform.a*resolution,transform.b*resolution,transform.c*resolution,transform.d*resolution,transform.tx*resolution,transform.ty*resolution),
maskData.texture||(CanvasGraphics.renderGraphicsMask(maskData,renderer.context),renderer.context.clip()),maskData.worldAlpha=cacheAlpha},CanvasMaskManager.prototype.popMask=function(renderer){renderer.context.restore()},CanvasMaskManager.prototype.destroy=function(){}},{"./CanvasGraphics":344}],346:[function(require,module,exports){var utils=require("../../../utils"),CanvasTinter={};module.exports=CanvasTinter,CanvasTinter.getTintedTexture=function(sprite,color){var texture=sprite.texture;color=CanvasTinter.roundColor(color);var stringColor="#"+("00000"+(0|color).toString(16)).substr(-6);if(texture.tintCache=texture.tintCache||{},texture.tintCache[stringColor])return texture.tintCache[stringColor];var canvas=CanvasTinter.canvas||document.createElement("canvas");if(CanvasTinter.tintMethod(texture,color,canvas),CanvasTinter.convertTintToImage){var tintImage=new Image;tintImage.src=canvas.toDataURL(),texture.tintCache[stringColor]=tintImage}else texture.tintCache[stringColor]=canvas,CanvasTinter.canvas=null;return canvas},CanvasTinter.tintWithMultiply=function(texture,color,canvas){var context=canvas.getContext("2d"),resolution=texture.baseTexture.resolution,crop=texture.crop.clone();crop.x*=resolution,crop.y*=resolution,crop.width*=resolution,crop.height*=resolution,canvas.width=crop.width,canvas.height=crop.height,context.fillStyle="#"+("00000"+(0|color).toString(16)).substr(-6),context.fillRect(0,0,crop.width,crop.height),context.globalCompositeOperation="multiply",context.drawImage(texture.baseTexture.source,crop.x,crop.y,crop.width,crop.height,0,0,crop.width,crop.height),context.globalCompositeOperation="destination-atop",context.drawImage(texture.baseTexture.source,crop.x,crop.y,crop.width,crop.height,0,0,crop.width,crop.height)},CanvasTinter.tintWithOverlay=function(texture,color,canvas){var context=canvas.getContext("2d"),resolution=texture.baseTexture.resolution,crop=texture.crop.clone();crop.x*=resolution,crop.y*=resolution,crop.width*=resolution,crop.height*=resolution,canvas.width=crop.width,canvas.height=crop.height,context.globalCompositeOperation="copy",context.fillStyle="#"+("00000"+(0|color).toString(16)).substr(-6),context.fillRect(0,0,crop.width,crop.height),context.globalCompositeOperation="destination-atop",context.drawImage(texture.baseTexture.source,crop.x,crop.y,crop.width,crop.height,0,0,crop.width,crop.height)},CanvasTinter.tintWithPerPixel=function(texture,color,canvas){var context=canvas.getContext("2d"),resolution=texture.baseTexture.resolution,crop=texture.crop.clone();crop.x*=resolution,crop.y*=resolution,crop.width*=resolution,crop.height*=resolution,canvas.width=crop.width,canvas.height=crop.height,context.globalCompositeOperation="copy",context.drawImage(texture.baseTexture.source,crop.x,crop.y,crop.width,crop.height,0,0,crop.width,crop.height);for(var rgbValues=utils.hex2rgb(color),r=rgbValues[0],g=rgbValues[1],b=rgbValues[2],pixelData=context.getImageData(0,0,crop.width,crop.height),pixels=pixelData.data,i=0;i<pixels.length;i+=4)pixels[i+0]*=r,pixels[i+1]*=g,pixels[i+2]*=b;context.putImageData(pixelData,0,0)},CanvasTinter.roundColor=function(color){var step=CanvasTinter.cacheStepsPerColorChannel,rgbValues=utils.hex2rgb(color);return rgbValues[0]=Math.min(255,rgbValues[0]/step*step),rgbValues[1]=Math.min(255,rgbValues[1]/step*step),rgbValues[2]=Math.min(255,rgbValues[2]/step*step),utils.rgb2hex(rgbValues)},CanvasTinter.cacheStepsPerColorChannel=8,CanvasTinter.convertTintToImage=!1,CanvasTinter.canUseMultiply=utils.canUseNewCanvasBlendModes(),CanvasTinter.tintMethod=CanvasTinter.canUseMultiply?CanvasTinter.tintWithMultiply:CanvasTinter.tintWithPerPixel},{"../../../utils":375}],347:[function(require,module,exports){function WebGLRenderer(width,height,options){options=options||{},SystemRenderer.call(this,"WebGL",width,height,options),this.type=CONST.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!options.forceFXAA&&options.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:options.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:options.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new ShaderManager(this),this.maskManager=new MaskManager(this),this.stencilManager=new StencilManager(this),this.filterManager=new FilterManager(this),this.blendModeManager=new BlendModeManager(this),this.currentRenderTarget=null,this.currentRenderer=new ObjectRenderer(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._managedTextures=[],this._renderTargetStack=[]}var SystemRenderer=require("../SystemRenderer"),ShaderManager=require("./managers/ShaderManager"),MaskManager=require("./managers/MaskManager"),StencilManager=require("./managers/StencilManager"),FilterManager=require("./managers/FilterManager"),BlendModeManager=require("./managers/BlendModeManager"),RenderTarget=require("./utils/RenderTarget"),ObjectRenderer=require("./utils/ObjectRenderer"),FXAAFilter=require("./filters/FXAAFilter"),utils=require("../../utils"),CONST=require("../../const");WebGLRenderer.prototype=Object.create(SystemRenderer.prototype),WebGLRenderer.prototype.constructor=WebGLRenderer,module.exports=WebGLRenderer,utils.pluginTarget.mixin(WebGLRenderer),WebGLRenderer.glContextId=0,WebGLRenderer.prototype._createContext=function(){var gl=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=gl,!gl)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=WebGLRenderer.glContextId++,gl.id=this.glContextId,gl.renderer=this},WebGLRenderer.prototype._initContext=function(){var gl=this.gl;gl.disable(gl.DEPTH_TEST),gl.disable(gl.CULL_FACE),gl.enable(gl.BLEND),this.renderTarget=new RenderTarget(gl,this.width,this.height,null,this.resolution,!0),this.setRenderTarget(this.renderTarget),this.emit("context",gl),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!gl.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new FXAAFilter])},WebGLRenderer.prototype.render=function(object){if(this.emit("prerender"),!this.gl.isContextLost()){this.drawCount=0,this._lastObjectRendered=object,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,object.filterArea=this.renderTarget.size,object.filters=this._FXAAFilter);var cacheParent=object.parent;object.parent=this._tempDisplayObjectParent,object.updateTransform(),object.parent=cacheParent;var gl=this.gl;this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?gl.clearColor(0,0,0,0):gl.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),gl.clear(gl.COLOR_BUFFER_BIT)),this.renderDisplayObject(object,this.renderTarget),this.emit("postrender")}},WebGLRenderer.prototype.renderDisplayObject=function(displayObject,renderTarget,clear){this.setRenderTarget(renderTarget),clear&&renderTarget.clear(),this.filterManager.setFilterStack(renderTarget.filterStack),displayObject.renderWebGL(this),this.currentRenderer.flush()},WebGLRenderer.prototype.setObjectRenderer=function(objectRenderer){this.currentRenderer!==objectRenderer&&(this.currentRenderer.stop(),this.currentRenderer=objectRenderer,this.currentRenderer.start())},WebGLRenderer.prototype.setRenderTarget=function(renderTarget){this.currentRenderTarget!==renderTarget&&(this.currentRenderTarget=renderTarget,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(renderTarget.stencilMaskStack))},WebGLRenderer.prototype.resize=function(width,height){SystemRenderer.prototype.resize.call(this,width,height),this.filterManager.resize(width,height),this.renderTarget.resize(width,height),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},WebGLRenderer.prototype.updateTexture=function(texture){if(texture=texture.baseTexture||texture,texture.hasLoaded){var gl=this.gl;return texture._glTextures[gl.id]||(texture._glTextures[gl.id]=gl.createTexture(),texture.on("update",this.updateTexture,this),texture.on("dispose",this.destroyTexture,this),this._managedTextures.push(texture)),gl.bindTexture(gl.TEXTURE_2D,texture._glTextures[gl.id]),gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,texture.premultipliedAlpha),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,texture.source),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,texture.scaleMode===CONST.SCALE_MODES.LINEAR?gl.LINEAR:gl.NEAREST),texture.mipmap&&texture.isPowerOfTwo?(gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,texture.scaleMode===CONST.SCALE_MODES.LINEAR?gl.LINEAR_MIPMAP_LINEAR:gl.NEAREST_MIPMAP_NEAREST),gl.generateMipmap(gl.TEXTURE_2D)):gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,texture.scaleMode===CONST.SCALE_MODES.LINEAR?gl.LINEAR:gl.NEAREST),texture.isPowerOfTwo?(gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.REPEAT)):(gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE)),texture._glTextures[gl.id]}},WebGLRenderer.prototype.destroyTexture=function(texture,_skipRemove){if(texture=texture.baseTexture||texture,texture.hasLoaded&&texture._glTextures[this.gl.id]&&(this.gl.deleteTexture(texture._glTextures[this.gl.id]),delete texture._glTextures[this.gl.id],!_skipRemove)){var i=this._managedTextures.indexOf(texture);-1!==i&&utils.removeItems(this._managedTextures,i,1)}},WebGLRenderer.prototype.handleContextLost=function(event){event.preventDefault()},WebGLRenderer.prototype.handleContextRestored=function(){this._initContext();for(var i=0;i<this._managedTextures.length;++i){var texture=this._managedTextures[i];texture._glTextures[this.gl.id]&&delete texture._glTextures[this.gl.id]}},WebGLRenderer.prototype.destroy=function(removeView){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);for(var i=0;i<this._managedTextures.length;++i){var texture=this._managedTextures[i];this.destroyTexture(texture,!0),texture.off("update",this.updateTexture,this),texture.off("dispose",this.destroyTexture,this)}SystemRenderer.prototype.destroy.call(this,removeView),this.uid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.blendModeManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this._managedTextures=null,this.drawCount=0,this.gl.useProgram(null),this.gl=null},WebGLRenderer.prototype._mapGlModes=function(){var gl=this.gl;this.blendModes||(this.blendModes={},this.blendModes[CONST.BLEND_MODES.NORMAL]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[CONST.BLEND_MODES.ADD]=[gl.ONE,gl.DST_ALPHA],this.blendModes[CONST.BLEND_MODES.MULTIPLY]=[gl.DST_COLOR,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[CONST.BLEND_MODES.SCREEN]=[gl.ONE,gl.ONE_MINUS_SRC_COLOR],this.blendModes[CONST.BLEND_MODES.OVERLAY]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[CONST.BLEND_MODES.DARKEN]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[CONST.BLEND_MODES.LIGHTEN]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[CONST.BLEND_MODES.COLOR_DODGE]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[CONST.BLEND_MODES.COLOR_BURN]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[CONST.BLEND_MODES.HARD_LIGHT]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[CONST.BLEND_MODES.SOFT_LIGHT]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[CONST.BLEND_MODES.DIFFERENCE]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[CONST.BLEND_MODES.EXCLUSION]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[CONST.BLEND_MODES.HUE]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[CONST.BLEND_MODES.SATURATION]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[CONST.BLEND_MODES.COLOR]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA],this.blendModes[CONST.BLEND_MODES.LUMINOSITY]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[CONST.DRAW_MODES.POINTS]=gl.POINTS,this.drawModes[CONST.DRAW_MODES.LINES]=gl.LINES,this.drawModes[CONST.DRAW_MODES.LINE_LOOP]=gl.LINE_LOOP,this.drawModes[CONST.DRAW_MODES.LINE_STRIP]=gl.LINE_STRIP,this.drawModes[CONST.DRAW_MODES.TRIANGLES]=gl.TRIANGLES,this.drawModes[CONST.DRAW_MODES.TRIANGLE_STRIP]=gl.TRIANGLE_STRIP,this.drawModes[CONST.DRAW_MODES.TRIANGLE_FAN]=gl.TRIANGLE_FAN)}},{"../../const":320,"../../utils":375,"../SystemRenderer":341,"./filters/FXAAFilter":349,"./managers/BlendModeManager":351,"./managers/FilterManager":352,"./managers/MaskManager":353,"./managers/ShaderManager":354,"./managers/StencilManager":355,"./utils/ObjectRenderer":361,"./utils/RenderTarget":363}],348:[function(require,module,exports){function AbstractFilter(vertexSrc,fragmentSrc,uniforms){this.shaders=[],this.padding=0,this.uniforms=uniforms||{},this.vertexSrc=vertexSrc||DefaultShader.defaultVertexSrc,this.fragmentSrc=fragmentSrc||DefaultShader.defaultFragmentSrc}var DefaultShader=require("../shaders/TextureShader");AbstractFilter.prototype.constructor=AbstractFilter,module.exports=AbstractFilter,AbstractFilter.prototype.getShader=function(renderer){var gl=renderer.gl,shader=this.shaders[gl.id];return shader||(shader=new DefaultShader(renderer.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[gl.id]=shader),shader},AbstractFilter.prototype.applyFilter=function(renderer,input,output,clear){var shader=this.getShader(renderer);renderer.filterManager.applyFilter(shader,input,output,clear)},AbstractFilter.prototype.syncUniform=function(uniform){for(var i=0,j=this.shaders.length;j>i;++i)this.shaders[i].syncUniform(uniform)}},{"../shaders/TextureShader":360}],349:[function(require,module,exports){function FXAAFilter(){AbstractFilter.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}var AbstractFilter=require("./AbstractFilter");FXAAFilter.prototype=Object.create(AbstractFilter.prototype),FXAAFilter.prototype.constructor=FXAAFilter,module.exports=FXAAFilter,FXAAFilter.prototype.applyFilter=function(renderer,input,output){var filterManager=renderer.filterManager,shader=this.getShader(renderer);filterManager.applyFilter(shader,input,output)}},{"./AbstractFilter":348}],350:[function(require,module,exports){function SpriteMaskFilter(sprite){var maskMatrix=new math.Matrix;AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:sprite._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:maskMatrix.toArray(!0)}}),this.maskSprite=sprite,this.maskMatrix=maskMatrix}var AbstractFilter=require("./AbstractFilter"),math=require("../../../math");SpriteMaskFilter.prototype=Object.create(AbstractFilter.prototype),SpriteMaskFilter.prototype.constructor=SpriteMaskFilter,module.exports=SpriteMaskFilter,SpriteMaskFilter.prototype.applyFilter=function(renderer,input,output){var filterManager=renderer.filterManager;this.uniforms.mask.value=this.maskSprite._texture,filterManager.calculateMappedMatrix(input.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha;var shader=this.getShader(renderer);filterManager.applyFilter(shader,input,output)},Object.defineProperties(SpriteMaskFilter.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(value){this.uniforms.mask.value=value}},offset:{get:function(){return this.uniforms.offset.value},set:function(value){this.uniforms.offset.value=value}}})},{"../../../math":331,"./AbstractFilter":348}],351:[function(require,module,exports){function BlendModeManager(renderer){WebGLManager.call(this,renderer),this.currentBlendMode=99999}var WebGLManager=require("./WebGLManager");BlendModeManager.prototype=Object.create(WebGLManager.prototype),BlendModeManager.prototype.constructor=BlendModeManager,module.exports=BlendModeManager,BlendModeManager.prototype.setBlendMode=function(blendMode){if(this.currentBlendMode===blendMode)return!1;this.currentBlendMode=blendMode;var mode=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(mode[0],mode[1]),!0}},{"./WebGLManager":356}],352:[function(require,module,exports){function FilterManager(renderer){WebGLManager.call(this,renderer),this.filterStack=[],this.filterStack.push({renderTarget:renderer.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new math.Rectangle(0,0,renderer.width,renderer.height),this.currentFrame=null}var WebGLManager=require("./WebGLManager"),RenderTarget=require("../utils/RenderTarget"),CONST=require("../../../const"),Quad=require("../utils/Quad"),math=require("../../../math");FilterManager.prototype=Object.create(WebGLManager.prototype),FilterManager.prototype.constructor=FilterManager,module.exports=FilterManager,FilterManager.prototype.onContextChange=function(){this.texturePool.length=0;var gl=this.renderer.gl;this.quad=new Quad(gl)},FilterManager.prototype.setFilterStack=function(filterStack){this.filterStack=filterStack},FilterManager.prototype.pushFilter=function(target,filters){var bounds=target.filterArea?target.filterArea.clone():target.getBounds();bounds.x=0|bounds.x,bounds.y=0|bounds.y,bounds.width=0|bounds.width,bounds.height=0|bounds.height;var padding=0|filters[0].padding;if(bounds.x-=padding,bounds.y-=padding,bounds.width+=2*padding,bounds.height+=2*padding,this.renderer.currentRenderTarget.transform){var transform=this.renderer.currentRenderTarget.transform;bounds.x+=transform.tx,bounds.y+=transform.ty,this.capFilterArea(bounds),bounds.x-=transform.tx,bounds.y-=transform.ty}else this.capFilterArea(bounds);if(bounds.width>0&&bounds.height>0){this.currentFrame=bounds;var texture=this.getRenderTarget();this.renderer.setRenderTarget(texture),texture.clear(),this.filterStack.push({renderTarget:texture,filter:filters})}else this.filterStack.push({renderTarget:null,filter:filters})},FilterManager.prototype.popFilter=function(){var filterData=this.filterStack.pop(),previousFilterData=this.filterStack[this.filterStack.length-1],input=filterData.renderTarget;if(filterData.renderTarget){var output=previousFilterData.renderTarget,gl=this.renderer.gl;this.currentFrame=input.frame,this.quad.map(this.textureSize,input.frame),gl.bindBuffer(gl.ARRAY_BUFFER,this.quad.vertexBuffer),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var filters=filterData.filter;if(gl.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,gl.FLOAT,!1,0,0),gl.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,gl.FLOAT,!1,0,32),gl.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,gl.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(CONST.BLEND_MODES.NORMAL),1===filters.length)filters[0].uniforms.dimensions&&(filters[0].uniforms.dimensions.value[0]=this.renderer.width,filters[0].uniforms.dimensions.value[1]=this.renderer.height,filters[0].uniforms.dimensions.value[2]=this.quad.vertices[0],filters[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),filters[0].applyFilter(this.renderer,input,output),this.returnRenderTarget(input);else{for(var flipTexture=input,flopTexture=this.getRenderTarget(!0),i=0;i<filters.length-1;i++){var filter=filters[i];filter.uniforms.dimensions&&(filter.uniforms.dimensions.value[0]=this.renderer.width,filter.uniforms.dimensions.value[1]=this.renderer.height,filter.uniforms.dimensions.value[2]=this.quad.vertices[0],filter.uniforms.dimensions.value[3]=this.quad.vertices[5]),filter.applyFilter(this.renderer,flipTexture,flopTexture);var temp=flipTexture;flipTexture=flopTexture,flopTexture=temp}filters[filters.length-1].applyFilter(this.renderer,flipTexture,output),this.returnRenderTarget(flipTexture),this.returnRenderTarget(flopTexture)}return filterData.filter}},FilterManager.prototype.getRenderTarget=function(clear){var renderTarget=this.texturePool.pop()||new RenderTarget(this.renderer.gl,this.textureSize.width,this.textureSize.height,CONST.SCALE_MODES.LINEAR,this.renderer.resolution*CONST.FILTER_RESOLUTION);return renderTarget.frame=this.currentFrame,clear&&renderTarget.clear(!0),renderTarget},FilterManager.prototype.returnRenderTarget=function(renderTarget){this.texturePool.push(renderTarget)},FilterManager.prototype.applyFilter=function(shader,inputTarget,outputTarget,clear){var gl=this.renderer.gl;this.renderer.setRenderTarget(outputTarget),clear&&outputTarget.clear(),this.renderer.shaderManager.setShader(shader),shader.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),shader.syncUniforms(),gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,inputTarget.texture),gl.drawElements(gl.TRIANGLES,6,gl.UNSIGNED_SHORT,0),this.renderer.drawCount++},FilterManager.prototype.calculateMappedMatrix=function(filterArea,sprite,outputMatrix){var worldTransform=sprite.worldTransform.copy(math.Matrix.TEMP_MATRIX),texture=sprite._texture.baseTexture,mappedMatrix=outputMatrix.identity(),ratio=this.textureSize.height/this.textureSize.width;mappedMatrix.translate(filterArea.x/this.textureSize.width,filterArea.y/this.textureSize.height),mappedMatrix.scale(1,ratio);var translateScaleX=this.textureSize.width/texture.width,translateScaleY=this.textureSize.height/texture.height;return worldTransform.tx/=texture.width*translateScaleX,worldTransform.ty/=texture.width*translateScaleX,worldTransform.invert(),mappedMatrix.prepend(worldTransform),mappedMatrix.scale(1,1/ratio),mappedMatrix.scale(translateScaleX,translateScaleY),mappedMatrix.translate(sprite.anchor.x,sprite.anchor.y),mappedMatrix},FilterManager.prototype.capFilterArea=function(filterArea){filterArea.x<0&&(filterArea.width+=filterArea.x,filterArea.x=0),filterArea.y<0&&(filterArea.height+=filterArea.y,filterArea.y=0),filterArea.x+filterArea.width>this.textureSize.width&&(filterArea.width=this.textureSize.width-filterArea.x),filterArea.y+filterArea.height>this.textureSize.height&&(filterArea.height=this.textureSize.height-filterArea.y)},FilterManager.prototype.resize=function(width,height){this.textureSize.width=width,this.textureSize.height=height;for(var i=0;i<this.texturePool.length;i++)this.texturePool[i].resize(width,height)},FilterManager.prototype.destroy=function(){this.quad.destroy(),WebGLManager.prototype.destroy.call(this),this.filterStack=null,this.offsetY=0;for(var i=0;i<this.texturePool.length;i++)this.texturePool[i].destroy();this.texturePool=null}},{"../../../const":320,"../../../math":331,"../utils/Quad":362,"../utils/RenderTarget":363,"./WebGLManager":356}],353:[function(require,module,exports){function MaskManager(renderer){WebGLManager.call(this,renderer),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var WebGLManager=require("./WebGLManager"),AlphaMaskFilter=require("../filters/SpriteMaskFilter");MaskManager.prototype=Object.create(WebGLManager.prototype),MaskManager.prototype.constructor=MaskManager,module.exports=MaskManager,MaskManager.prototype.pushMask=function(target,maskData){maskData.texture?this.pushSpriteMask(target,maskData):this.pushStencilMask(target,maskData)},MaskManager.prototype.popMask=function(target,maskData){maskData.texture?this.popSpriteMask(target,maskData):this.popStencilMask(target,maskData)},MaskManager.prototype.pushSpriteMask=function(target,maskData){var alphaMaskFilter=this.alphaMaskPool.pop();alphaMaskFilter||(alphaMaskFilter=[new AlphaMaskFilter(maskData)]),alphaMaskFilter[0].maskSprite=maskData,this.renderer.filterManager.pushFilter(target,alphaMaskFilter)},MaskManager.prototype.popSpriteMask=function(){var filters=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(filters)},MaskManager.prototype.pushStencilMask=function(target,maskData){this.renderer.stencilManager.pushMask(maskData)},MaskManager.prototype.popStencilMask=function(target,maskData){this.renderer.stencilManager.popMask(maskData)}},{"../filters/SpriteMaskFilter":350,"./WebGLManager":356}],354:[function(require,module,exports){function ShaderManager(renderer){WebGLManager.call(this,renderer),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var i=0;i<this.maxAttibs;i++)this.attribState[i]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var WebGLManager=require("./WebGLManager"),TextureShader=require("../shaders/TextureShader"),ComplexPrimitiveShader=require("../shaders/ComplexPrimitiveShader"),PrimitiveShader=require("../shaders/PrimitiveShader"),utils=require("../../../utils");
ShaderManager.prototype=Object.create(WebGLManager.prototype),ShaderManager.prototype.constructor=ShaderManager,utils.pluginTarget.mixin(ShaderManager),module.exports=ShaderManager,ShaderManager.prototype.onContextChange=function(){this.initPlugins();var gl=this.renderer.gl;this.maxAttibs=gl.getParameter(gl.MAX_VERTEX_ATTRIBS),this.attribState=[];for(var i=0;i<this.maxAttibs;i++)this.attribState[i]=!1;this.defaultShader=new TextureShader(this),this.primitiveShader=new PrimitiveShader(this),this.complexPrimitiveShader=new ComplexPrimitiveShader(this)},ShaderManager.prototype.setAttribs=function(attribs){var i;for(i=0;i<this.tempAttribState.length;i++)this.tempAttribState[i]=!1;for(var a in attribs)this.tempAttribState[attribs[a]]=!0;var gl=this.renderer.gl;for(i=0;i<this.attribState.length;i++)this.attribState[i]!==this.tempAttribState[i]&&(this.attribState[i]=this.tempAttribState[i],this.attribState[i]?gl.enableVertexAttribArray(i):gl.disableVertexAttribArray(i))},ShaderManager.prototype.setShader=function(shader){return this._currentId===shader.uid?!1:(this._currentId=shader.uid,this.currentShader=shader,this.renderer.gl.useProgram(shader.program),this.setAttribs(shader.attributes),!0)},ShaderManager.prototype.destroy=function(){this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),WebGLManager.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},{"../../../utils":375,"../shaders/ComplexPrimitiveShader":357,"../shaders/PrimitiveShader":358,"../shaders/TextureShader":360,"./WebGLManager":356}],355:[function(require,module,exports){function WebGLMaskManager(renderer){WebGLManager.call(this,renderer),this.stencilMaskStack=null}var WebGLManager=require("./WebGLManager"),utils=require("../../../utils");WebGLMaskManager.prototype=Object.create(WebGLManager.prototype),WebGLMaskManager.prototype.constructor=WebGLMaskManager,module.exports=WebGLMaskManager,WebGLMaskManager.prototype.setMaskStack=function(stencilMaskStack){this.stencilMaskStack=stencilMaskStack;var gl=this.renderer.gl;0===stencilMaskStack.stencilStack.length?gl.disable(gl.STENCIL_TEST):gl.enable(gl.STENCIL_TEST)},WebGLMaskManager.prototype.pushStencil=function(graphics,webGLData){this.renderer.currentRenderTarget.attachStencilBuffer();var gl=this.renderer.gl,sms=this.stencilMaskStack;this.bindGraphics(graphics,webGLData),0===sms.stencilStack.length&&(gl.enable(gl.STENCIL_TEST),gl.clear(gl.STENCIL_BUFFER_BIT),sms.reverse=!0,sms.count=0),sms.stencilStack.push(webGLData);var level=sms.count;gl.colorMask(!1,!1,!1,!1),gl.stencilFunc(gl.ALWAYS,0,255),gl.stencilOp(gl.KEEP,gl.KEEP,gl.INVERT),1===webGLData.mode?(gl.drawElements(gl.TRIANGLE_FAN,webGLData.indices.length-4,gl.UNSIGNED_SHORT,0),sms.reverse?(gl.stencilFunc(gl.EQUAL,255-level,255),gl.stencilOp(gl.KEEP,gl.KEEP,gl.DECR)):(gl.stencilFunc(gl.EQUAL,level,255),gl.stencilOp(gl.KEEP,gl.KEEP,gl.INCR)),gl.drawElements(gl.TRIANGLE_FAN,4,gl.UNSIGNED_SHORT,2*(webGLData.indices.length-4)),sms.reverse?gl.stencilFunc(gl.EQUAL,255-(level+1),255):gl.stencilFunc(gl.EQUAL,level+1,255),sms.reverse=!sms.reverse):(sms.reverse?(gl.stencilFunc(gl.EQUAL,level,255),gl.stencilOp(gl.KEEP,gl.KEEP,gl.INCR)):(gl.stencilFunc(gl.EQUAL,255-level,255),gl.stencilOp(gl.KEEP,gl.KEEP,gl.DECR)),gl.drawElements(gl.TRIANGLE_STRIP,webGLData.indices.length,gl.UNSIGNED_SHORT,0),sms.reverse?gl.stencilFunc(gl.EQUAL,level+1,255):gl.stencilFunc(gl.EQUAL,255-(level+1),255)),gl.colorMask(!0,!0,!0,!0),gl.stencilOp(gl.KEEP,gl.KEEP,gl.KEEP),sms.count++},WebGLMaskManager.prototype.bindGraphics=function(graphics,webGLData){var shader,gl=this.renderer.gl;1===webGLData.mode?(shader=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(shader),gl.uniformMatrix3fv(shader.uniforms.translationMatrix._location,!1,graphics.worldTransform.toArray(!0)),gl.uniformMatrix3fv(shader.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),gl.uniform3fv(shader.uniforms.tint._location,utils.hex2rgb(graphics.tint)),gl.uniform3fv(shader.uniforms.color._location,webGLData.color),gl.uniform1f(shader.uniforms.alpha._location,graphics.worldAlpha),gl.bindBuffer(gl.ARRAY_BUFFER,webGLData.buffer),gl.vertexAttribPointer(shader.attributes.aVertexPosition,2,gl.FLOAT,!1,8,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,webGLData.indexBuffer)):(shader=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(shader),gl.uniformMatrix3fv(shader.uniforms.translationMatrix._location,!1,graphics.worldTransform.toArray(!0)),gl.uniformMatrix3fv(shader.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),gl.uniform3fv(shader.uniforms.tint._location,utils.hex2rgb(graphics.tint)),gl.uniform1f(shader.uniforms.alpha._location,graphics.worldAlpha),gl.bindBuffer(gl.ARRAY_BUFFER,webGLData.buffer),gl.vertexAttribPointer(shader.attributes.aVertexPosition,2,gl.FLOAT,!1,24,0),gl.vertexAttribPointer(shader.attributes.aColor,4,gl.FLOAT,!1,24,8),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,webGLData.indexBuffer))},WebGLMaskManager.prototype.popStencil=function(graphics,webGLData){var gl=this.renderer.gl,sms=this.stencilMaskStack;if(sms.stencilStack.pop(),sms.count--,0===sms.stencilStack.length)gl.disable(gl.STENCIL_TEST);else{var level=sms.count;this.bindGraphics(graphics,webGLData),gl.colorMask(!1,!1,!1,!1),1===webGLData.mode?(sms.reverse=!sms.reverse,sms.reverse?(gl.stencilFunc(gl.EQUAL,255-(level+1),255),gl.stencilOp(gl.KEEP,gl.KEEP,gl.INCR)):(gl.stencilFunc(gl.EQUAL,level+1,255),gl.stencilOp(gl.KEEP,gl.KEEP,gl.DECR)),gl.drawElements(gl.TRIANGLE_FAN,4,gl.UNSIGNED_SHORT,2*(webGLData.indices.length-4)),gl.stencilFunc(gl.ALWAYS,0,255),gl.stencilOp(gl.KEEP,gl.KEEP,gl.INVERT),gl.drawElements(gl.TRIANGLE_FAN,webGLData.indices.length-4,gl.UNSIGNED_SHORT,0),this.renderer.drawCount+=2,sms.reverse?gl.stencilFunc(gl.EQUAL,level,255):gl.stencilFunc(gl.EQUAL,255-level,255)):(sms.reverse?(gl.stencilFunc(gl.EQUAL,level+1,255),gl.stencilOp(gl.KEEP,gl.KEEP,gl.DECR)):(gl.stencilFunc(gl.EQUAL,255-(level+1),255),gl.stencilOp(gl.KEEP,gl.KEEP,gl.INCR)),gl.drawElements(gl.TRIANGLE_STRIP,webGLData.indices.length,gl.UNSIGNED_SHORT,0),this.renderer.drawCount++,sms.reverse?gl.stencilFunc(gl.EQUAL,level,255):gl.stencilFunc(gl.EQUAL,255-level,255)),gl.colorMask(!0,!0,!0,!0),gl.stencilOp(gl.KEEP,gl.KEEP,gl.KEEP)}},WebGLMaskManager.prototype.destroy=function(){WebGLManager.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},WebGLMaskManager.prototype.pushMask=function(maskData){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),maskData.dirty&&this.renderer.plugins.graphics.updateGraphics(maskData,this.renderer.gl),maskData._webGL[this.renderer.gl.id].data.length&&this.pushStencil(maskData,maskData._webGL[this.renderer.gl.id].data[0])},WebGLMaskManager.prototype.popMask=function(maskData){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(maskData,maskData._webGL[this.renderer.gl.id].data[0])}},{"../../../utils":375,"./WebGLManager":356}],356:[function(require,module,exports){function WebGLManager(renderer){this.renderer=renderer,this.renderer.on("context",this.onContextChange,this)}WebGLManager.prototype.constructor=WebGLManager,module.exports=WebGLManager,WebGLManager.prototype.onContextChange=function(){},WebGLManager.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],357:[function(require,module,exports){function ComplexPrimitiveShader(shaderManager){Shader.call(this,shaderManager,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var Shader=require("./Shader");ComplexPrimitiveShader.prototype=Object.create(Shader.prototype),ComplexPrimitiveShader.prototype.constructor=ComplexPrimitiveShader,module.exports=ComplexPrimitiveShader},{"./Shader":359}],358:[function(require,module,exports){function PrimitiveShader(shaderManager){Shader.call(this,shaderManager,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var Shader=require("./Shader");PrimitiveShader.prototype=Object.create(Shader.prototype),PrimitiveShader.prototype.constructor=PrimitiveShader,module.exports=PrimitiveShader},{"./Shader":359}],359:[function(require,module,exports){function Shader(shaderManager,vertexSrc,fragmentSrc,uniforms,attributes){if(!vertexSrc||!fragmentSrc)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uid=utils.uid(),this.gl=shaderManager.renderer.gl,this.shaderManager=shaderManager,this.program=null,this.uniforms=uniforms||{},this.attributes=attributes||{},this.textureCount=1,this.vertexSrc=vertexSrc,this.fragmentSrc=fragmentSrc,this.init()}var utils=require("../../../utils");Shader.prototype.constructor=Shader,module.exports=Shader,Shader.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},Shader.prototype.cacheUniformLocations=function(keys){for(var i=0;i<keys.length;++i)this.uniforms[keys[i]]._location=this.gl.getUniformLocation(this.program,keys[i])},Shader.prototype.cacheAttributeLocations=function(keys){for(var i=0;i<keys.length;++i)this.attributes[keys[i]]=this.gl.getAttribLocation(this.program,keys[i])},Shader.prototype.compile=function(){var gl=this.gl,glVertShader=this._glCompile(gl.VERTEX_SHADER,this.vertexSrc),glFragShader=this._glCompile(gl.FRAGMENT_SHADER,this.fragmentSrc),program=gl.createProgram();return gl.attachShader(program,glVertShader),gl.attachShader(program,glFragShader),gl.linkProgram(program),gl.getProgramParameter(program,gl.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",gl.getProgramParameter(program,gl.VALIDATE_STATUS)),console.error("gl.getError()",gl.getError()),""!==gl.getProgramInfoLog(program)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",gl.getProgramInfoLog(program)),gl.deleteProgram(program),program=null),gl.deleteShader(glVertShader),gl.deleteShader(glFragShader),this.program=program},Shader.prototype.syncUniform=function(uniform){var i,il,location=uniform._location,value=uniform.value,gl=this.gl;switch(uniform.type){case"b":case"bool":case"boolean":gl.uniform1i(location,value?1:0);break;case"i":case"1i":gl.uniform1i(location,value);break;case"f":case"1f":gl.uniform1f(location,value);break;case"2f":gl.uniform2f(location,value[0],value[1]);break;case"3f":gl.uniform3f(location,value[0],value[1],value[2]);break;case"4f":gl.uniform4f(location,value[0],value[1],value[2],value[3]);break;case"v2":gl.uniform2f(location,value.x,value.y);break;case"v3":gl.uniform3f(location,value.x,value.y,value.z);break;case"v4":gl.uniform4f(location,value.x,value.y,value.z,value.w);break;case"1iv":gl.uniform1iv(location,value);break;case"2iv":gl.uniform2iv(location,value);break;case"3iv":gl.uniform3iv(location,value);break;case"4iv":gl.uniform4iv(location,value);break;case"1fv":gl.uniform1fv(location,value);break;case"2fv":gl.uniform2fv(location,value);break;case"3fv":gl.uniform3fv(location,value);break;case"4fv":gl.uniform4fv(location,value);break;case"m2":case"mat2":case"Matrix2fv":gl.uniformMatrix2fv(location,uniform.transpose,value);break;case"m3":case"mat3":case"Matrix3fv":gl.uniformMatrix3fv(location,uniform.transpose,value);break;case"m4":case"mat4":case"Matrix4fv":gl.uniformMatrix4fv(location,uniform.transpose,value);break;case"c":"number"==typeof value&&(value=utils.hex2rgb(value)),gl.uniform3f(location,value[0],value[1],value[2]);break;case"iv1":gl.uniform1iv(location,value);break;case"iv":gl.uniform3iv(location,value);break;case"fv1":gl.uniform1fv(location,value);break;case"fv":gl.uniform3fv(location,value);break;case"v2v":for(uniform._array||(uniform._array=new Float32Array(2*value.length)),i=0,il=value.length;il>i;++i)uniform._array[2*i]=value[i].x,uniform._array[2*i+1]=value[i].y;gl.uniform2fv(location,uniform._array);break;case"v3v":for(uniform._array||(uniform._array=new Float32Array(3*value.length)),i=0,il=value.length;il>i;++i)uniform._array[3*i]=value[i].x,uniform._array[3*i+1]=value[i].y,uniform._array[3*i+2]=value[i].z;gl.uniform3fv(location,uniform._array);break;case"v4v":for(uniform._array||(uniform._array=new Float32Array(4*value.length)),i=0,il=value.length;il>i;++i)uniform._array[4*i]=value[i].x,uniform._array[4*i+1]=value[i].y,uniform._array[4*i+2]=value[i].z,uniform._array[4*i+3]=value[i].w;gl.uniform4fv(location,uniform._array);break;case"t":case"sampler2D":if(!uniform.value||!uniform.value.baseTexture.hasLoaded)break;gl.activeTexture(gl["TEXTURE"+this.textureCount]);var texture=uniform.value.baseTexture._glTextures[gl.id];texture||(this.initSampler2D(uniform),texture=uniform.value.baseTexture._glTextures[gl.id]),gl.bindTexture(gl.TEXTURE_2D,texture),gl.uniform1i(uniform._location,this.textureCount),this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+uniform.type)}},Shader.prototype.syncUniforms=function(){this.textureCount=1;for(var key in this.uniforms)this.syncUniform(this.uniforms[key])},Shader.prototype.initSampler2D=function(uniform){var gl=this.gl,texture=uniform.value.baseTexture;if(texture.hasLoaded)if(uniform.textureData){var data=uniform.textureData;texture._glTextures[gl.id]=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,texture._glTextures[gl.id]),gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,texture.premultipliedAlpha),gl.texImage2D(gl.TEXTURE_2D,0,data.luminance?gl.LUMINANCE:gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,texture.source),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,data.magFilter?data.magFilter:gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,data.wrapS?data.wrapS:gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,data.wrapS?data.wrapS:gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,data.wrapT?data.wrapT:gl.CLAMP_TO_EDGE)}else this.shaderManager.renderer.updateTexture(texture)},Shader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},Shader.prototype._glCompile=function(type,src){var shader=this.gl.createShader(type);return this.gl.shaderSource(shader,src),this.gl.compileShader(shader),this.gl.getShaderParameter(shader,this.gl.COMPILE_STATUS)?shader:(console.log(this.gl.getShaderInfoLog(shader)),null)}},{"../../../utils":375}],360:[function(require,module,exports){function TextureShader(shaderManager,vertexSrc,fragmentSrc,customUniforms,customAttributes){var uniforms={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(customUniforms)for(var u in customUniforms)uniforms[u]=customUniforms[u];var attributes={aVertexPosition:0,aTextureCoord:0,aColor:0};if(customAttributes)for(var a in customAttributes)attributes[a]=customAttributes[a];vertexSrc=vertexSrc||TextureShader.defaultVertexSrc,fragmentSrc=fragmentSrc||TextureShader.defaultFragmentSrc,Shader.call(this,shaderManager,vertexSrc,fragmentSrc,uniforms,attributes)}var Shader=require("./Shader");TextureShader.prototype=Object.create(Shader.prototype),TextureShader.prototype.constructor=TextureShader,module.exports=TextureShader,TextureShader.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),TextureShader.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},{"./Shader":359}],361:[function(require,module,exports){function ObjectRenderer(renderer){WebGLManager.call(this,renderer)}var WebGLManager=require("../managers/WebGLManager");ObjectRenderer.prototype=Object.create(WebGLManager.prototype),ObjectRenderer.prototype.constructor=ObjectRenderer,module.exports=ObjectRenderer,ObjectRenderer.prototype.start=function(){},ObjectRenderer.prototype.stop=function(){this.flush()},ObjectRenderer.prototype.flush=function(){},ObjectRenderer.prototype.render=function(object){}},{"../managers/WebGLManager":356}],362:[function(require,module,exports){function Quad(gl){this.gl=gl,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=gl.createBuffer(),this.indexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffer),gl.bufferData(gl.ARRAY_BUFFER,128,gl.DYNAMIC_DRAW),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,this.indices,gl.STATIC_DRAW),this.upload()}Quad.prototype.constructor=Quad,Quad.prototype.map=function(rect,rect2){var x=0,y=0;this.uvs[0]=x,this.uvs[1]=y,this.uvs[2]=x+rect2.width/rect.width,this.uvs[3]=y,this.uvs[4]=x+rect2.width/rect.width,this.uvs[5]=y+rect2.height/rect.height,this.uvs[6]=x,this.uvs[7]=y+rect2.height/rect.height,x=rect2.x,y=rect2.y,this.vertices[0]=x,this.vertices[1]=y,this.vertices[2]=x+rect2.width,this.vertices[3]=y,this.vertices[4]=x+rect2.width,this.vertices[5]=y+rect2.height,this.vertices[6]=x,this.vertices[7]=y+rect2.height,this.upload()},Quad.prototype.upload=function(){var gl=this.gl;gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffer),gl.bufferSubData(gl.ARRAY_BUFFER,0,this.vertices),gl.bufferSubData(gl.ARRAY_BUFFER,32,this.uvs),gl.bufferSubData(gl.ARRAY_BUFFER,64,this.colors)},Quad.prototype.destroy=function(){var gl=this.gl;gl.deleteBuffer(this.vertexBuffer),gl.deleteBuffer(this.indexBuffer)},module.exports=Quad},{}],363:[function(require,module,exports){var math=require("../../../math"),utils=require("../../../utils"),CONST=require("../../../const"),StencilMaskStack=require("./StencilMaskStack"),RenderTarget=function(gl,width,height,scaleMode,resolution,root){if(this.gl=gl,this.frameBuffer=null,this.texture=null,this.size=new math.Rectangle(0,0,1,1),this.resolution=resolution||CONST.RESOLUTION,this.projectionMatrix=new math.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new StencilMaskStack,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=scaleMode||CONST.SCALE_MODES.DEFAULT,this.root=root,!this.root){this.frameBuffer=gl.createFramebuffer(),this.texture=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,this.texture),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,scaleMode===CONST.SCALE_MODES.LINEAR?gl.LINEAR:gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,scaleMode===CONST.SCALE_MODES.LINEAR?gl.LINEAR:gl.NEAREST);var isPowerOfTwo=utils.isPowerOfTwo(width,height);isPowerOfTwo?(gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.REPEAT)):(gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE)),gl.bindFramebuffer(gl.FRAMEBUFFER,this.frameBuffer),gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,this.texture,0)}this.resize(width,height)};RenderTarget.prototype.constructor=RenderTarget,module.exports=RenderTarget,RenderTarget.prototype.clear=function(bind){var gl=this.gl;bind&&gl.bindFramebuffer(gl.FRAMEBUFFER,this.frameBuffer),gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT)},RenderTarget.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var gl=this.gl;this.stencilBuffer=gl.createRenderbuffer(),gl.bindRenderbuffer(gl.RENDERBUFFER,this.stencilBuffer),gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_STENCIL_ATTACHMENT,gl.RENDERBUFFER,this.stencilBuffer),gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},RenderTarget.prototype.activate=function(){var gl=this.gl;gl.bindFramebuffer(gl.FRAMEBUFFER,this.frameBuffer);var projectionFrame=this.frame||this.size;this.calculateProjection(projectionFrame),this.transform&&this.projectionMatrix.append(this.transform),gl.viewport(0,0,projectionFrame.width*this.resolution,projectionFrame.height*this.resolution)},RenderTarget.prototype.calculateProjection=function(projectionFrame){var pm=this.projectionMatrix;pm.identity(),this.root?(pm.a=1/projectionFrame.width*2,pm.d=-1/projectionFrame.height*2,pm.tx=-1-projectionFrame.x*pm.a,pm.ty=1-projectionFrame.y*pm.d):(pm.a=1/projectionFrame.width*2,pm.d=1/projectionFrame.height*2,pm.tx=-1-projectionFrame.x*pm.a,pm.ty=-1-projectionFrame.y*pm.d)},RenderTarget.prototype.resize=function(width,height){if(width=0|width,height=0|height,this.size.width!==width||this.size.height!==height){if(this.size.width=width,this.size.height=height,!this.root){var gl=this.gl;gl.bindTexture(gl.TEXTURE_2D,this.texture),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,width*this.resolution,height*this.resolution,0,gl.RGBA,gl.UNSIGNED_BYTE,null),this.stencilBuffer&&(gl.bindRenderbuffer(gl.RENDERBUFFER,this.stencilBuffer),gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_STENCIL,width*this.resolution,height*this.resolution))}var projectionFrame=this.frame||this.size;this.calculateProjection(projectionFrame)}},RenderTarget.prototype.destroy=function(){var gl=this.gl;gl.deleteRenderbuffer(this.stencilBuffer),gl.deleteFramebuffer(this.frameBuffer),gl.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},{"../../../const":320,"../../../math":331,"../../../utils":375,"./StencilMaskStack":364}],364:[function(require,module,exports){function StencilMaskStack(){this.stencilStack=[],this.reverse=!0,this.count=0}StencilMaskStack.prototype.constructor=StencilMaskStack,module.exports=StencilMaskStack},{}],365:[function(require,module,exports){function Sprite(texture){Container.call(this),this.anchor=new math.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=CONST.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=texture||Texture.EMPTY}var math=require("../math"),Texture=require("../textures/Texture"),Container=require("../display/Container"),CanvasTinter=require("../renderers/canvas/utils/CanvasTinter"),utils=require("../utils"),CONST=require("../const"),tempPoint=new math.Point,GroupD8=math.GroupD8,canvasRenderWorldTransform=new math.Matrix;Sprite.prototype=Object.create(Container.prototype),Sprite.prototype.constructor=Sprite,module.exports=Sprite,Object.defineProperties(Sprite.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(value){var sign=utils.sign(this.scale.x)||1;this.scale.x=sign*value/this.texture._frame.width,this._width=value}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(value){var sign=utils.sign(this.scale.y)||1;this.scale.y=sign*value/this.texture._frame.height,this._height=value}},texture:{get:function(){return this._texture},set:function(value){this._texture!==value&&(this._texture=value,this.cachedTint=16777215,value&&(value.baseTexture.hasLoaded?this._onTextureUpdate():value.once("update",this._onTextureUpdate,this)))}}}),Sprite.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=utils.sign(this.scale.x)*this._width/this.texture.frame.width),this._height&&(this.scale.y=utils.sign(this.scale.y)*this._height/this.texture.frame.height)},Sprite.prototype._renderWebGL=function(renderer){renderer.setObjectRenderer(renderer.plugins.sprite),renderer.plugins.sprite.render(this)},Sprite.prototype.getBounds=function(matrix){if(!this._currentBounds){var minX,maxX,minY,maxY,width=this._texture._frame.width,height=this._texture._frame.height,w0=width*(1-this.anchor.x),w1=width*-this.anchor.x,h0=height*(1-this.anchor.y),h1=height*-this.anchor.y,worldTransform=matrix||this.worldTransform,a=worldTransform.a,b=worldTransform.b,c=worldTransform.c,d=worldTransform.d,tx=worldTransform.tx,ty=worldTransform.ty,x1=a*w1+c*h1+tx,y1=d*h1+b*w1+ty,x2=a*w0+c*h1+tx,y2=d*h1+b*w0+ty,x3=a*w0+c*h0+tx,y3=d*h0+b*w0+ty,x4=a*w1+c*h0+tx,y4=d*h0+b*w1+ty;if(minX=x1,minX=minX>x2?x2:minX,minX=minX>x3?x3:minX,minX=minX>x4?x4:minX,minY=y1,minY=minY>y2?y2:minY,minY=minY>y3?y3:minY,minY=minY>y4?y4:minY,maxX=x1,maxX=x2>maxX?x2:maxX,maxX=x3>maxX?x3:maxX,maxX=x4>maxX?x4:maxX,maxY=y1,maxY=y2>maxY?y2:maxY,maxY=y3>maxY?y3:maxY,maxY=y4>maxY?y4:maxY,this.children.length){var childBounds=this.containerGetBounds();w0=childBounds.x,w1=childBounds.x+childBounds.width,h0=childBounds.y,h1=childBounds.y+childBounds.height,minX=w0>minX?minX:w0,minY=h0>minY?minY:h0,maxX=maxX>w1?maxX:w1,maxY=maxY>h1?maxY:h1}var bounds=this._bounds;bounds.x=minX,bounds.width=maxX-minX,bounds.y=minY,bounds.height=maxY-minY,this._currentBounds=bounds}return this._currentBounds},Sprite.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},Sprite.prototype.containsPoint=function(point){this.worldTransform.applyInverse(point,tempPoint);var y1,width=this._texture._frame.width,height=this._texture._frame.height,x1=-width*this.anchor.x;return tempPoint.x>x1&&tempPoint.x<x1+width&&(y1=-height*this.anchor.y,tempPoint.y>y1&&tempPoint.y<y1+height)},Sprite.prototype._renderCanvas=function(renderer){if(!(this.texture.crop.width<=0||this.texture.crop.height<=0)){var compositeOperation=renderer.blendModes[this.blendMode];if(compositeOperation!==renderer.context.globalCompositeOperation&&(renderer.context.globalCompositeOperation=compositeOperation),this.texture.valid){var dx,dy,texture=this._texture,wt=this.worldTransform,width=texture.crop.width,height=texture.crop.height;renderer.context.globalAlpha=this.worldAlpha;var smoothingEnabled=texture.baseTexture.scaleMode===CONST.SCALE_MODES.LINEAR;renderer.smoothProperty&&renderer.context[renderer.smoothProperty]!==smoothingEnabled&&(renderer.context[renderer.smoothProperty]=smoothingEnabled),2===(3&texture.rotate)&&(width=texture.crop.height,height=texture.crop.width),texture.trim?(dx=texture.crop.width/2+texture.trim.x-this.anchor.x*texture.trim.width,dy=texture.crop.height/2+texture.trim.y-this.anchor.y*texture.trim.height):(dx=(.5-this.anchor.x)*texture._frame.width,dy=(.5-this.anchor.y)*texture._frame.height),texture.rotate&&(wt.copy(canvasRenderWorldTransform),wt=canvasRenderWorldTransform,GroupD8.matrixAppendRotationInv(wt,texture.rotate,dx,dy),dx=0,dy=0),dx-=width/2,dy-=height/2,renderer.roundPixels?(renderer.context.setTransform(wt.a,wt.b,wt.c,wt.d,wt.tx*renderer.resolution|0,wt.ty*renderer.resolution|0),dx=0|dx,dy=0|dy):renderer.context.setTransform(wt.a,wt.b,wt.c,wt.d,wt.tx*renderer.resolution,wt.ty*renderer.resolution);var resolution=texture.baseTexture.resolution;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=CanvasTinter.getTintedTexture(this,this.tint)),renderer.context.drawImage(this.tintedTexture,0,0,width*resolution,height*resolution,dx*renderer.resolution,dy*renderer.resolution,width*renderer.resolution,height*renderer.resolution)):renderer.context.drawImage(texture.baseTexture.source,texture.crop.x*resolution,texture.crop.y*resolution,width*resolution,height*resolution,dx*renderer.resolution,dy*renderer.resolution,width*renderer.resolution,height*renderer.resolution)}}},Sprite.prototype.destroy=function(destroyTexture,destroyBaseTexture){Container.prototype.destroy.call(this),this.anchor=null,destroyTexture&&this._texture.destroy(destroyBaseTexture),this._texture=null,this.shader=null},Sprite.fromFrame=function(frameId){var texture=utils.TextureCache[frameId];if(!texture)throw new Error('The frameId "'+frameId+'" does not exist in the texture cache');return new Sprite(texture)},Sprite.fromImage=function(imageId,crossorigin,scaleMode){return new Sprite(Texture.fromImage(imageId,crossorigin,scaleMode))}},{"../const":320,"../display/Container":321,"../math":331,"../renderers/canvas/utils/CanvasTinter":346,"../textures/Texture":370,"../utils":375}],366:[function(require,module,exports){function SpriteRenderer(renderer){ObjectRenderer.call(this,renderer),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=CONST.SPRITE_BATCH_SIZE;var numVerts=4*this.size*this.vertByteSize,numIndices=6*this.size;this.vertices=new ArrayBuffer(numVerts),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(numIndices);for(var i=0,j=0;numIndices>i;i+=6,j+=4)this.indices[i+0]=j+0,this.indices[i+1]=j+1,this.indices[i+2]=j+2,this.indices[i+3]=j+0,this.indices[i+4]=j+2,this.indices[i+5]=j+3;this.currentBatchSize=0,this.sprites=[],this.shader=null}var ObjectRenderer=require("../../renderers/webgl/utils/ObjectRenderer"),WebGLRenderer=require("../../renderers/webgl/WebGLRenderer"),CONST=require("../../const");SpriteRenderer.prototype=Object.create(ObjectRenderer.prototype),SpriteRenderer.prototype.constructor=SpriteRenderer,module.exports=SpriteRenderer,WebGLRenderer.registerPlugin("sprite",SpriteRenderer),SpriteRenderer.prototype.onContextChange=function(){var gl=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=gl.createBuffer(),this.indexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,this.indices,gl.STATIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffer),gl.bufferData(gl.ARRAY_BUFFER,this.vertices,gl.DYNAMIC_DRAW),this.currentBlendMode=99999},SpriteRenderer.prototype.render=function(sprite){var texture=sprite._texture;this.currentBatchSize>=this.size&&this.flush();var uvs=texture._uvs;if(uvs){var w0,w1,h0,h1,aX=sprite.anchor.x,aY=sprite.anchor.y;if(texture.trim&&void 0===sprite.tileScale){var trim=texture.trim;w1=trim.x-aX*trim.width,w0=w1+texture.crop.width,h1=trim.y-aY*trim.height,h0=h1+texture.crop.height}else w0=texture._frame.width*(1-aX),w1=texture._frame.width*-aX,h0=texture._frame.height*(1-aY),h1=texture._frame.height*-aY;var index=this.currentBatchSize*this.vertByteSize,worldTransform=sprite.worldTransform,a=worldTransform.a,b=worldTransform.b,c=worldTransform.c,d=worldTransform.d,tx=worldTransform.tx,ty=worldTransform.ty,colors=this.colors,positions=this.positions;
if(this.renderer.roundPixels){var resolution=this.renderer.resolution;positions[index]=((a*w1+c*h1+tx)*resolution|0)/resolution,positions[index+1]=((d*h1+b*w1+ty)*resolution|0)/resolution,positions[index+5]=((a*w0+c*h1+tx)*resolution|0)/resolution,positions[index+6]=((d*h1+b*w0+ty)*resolution|0)/resolution,positions[index+10]=((a*w0+c*h0+tx)*resolution|0)/resolution,positions[index+11]=((d*h0+b*w0+ty)*resolution|0)/resolution,positions[index+15]=((a*w1+c*h0+tx)*resolution|0)/resolution,positions[index+16]=((d*h0+b*w1+ty)*resolution|0)/resolution}else positions[index]=a*w1+c*h1+tx,positions[index+1]=d*h1+b*w1+ty,positions[index+5]=a*w0+c*h1+tx,positions[index+6]=d*h1+b*w0+ty,positions[index+10]=a*w0+c*h0+tx,positions[index+11]=d*h0+b*w0+ty,positions[index+15]=a*w1+c*h0+tx,positions[index+16]=d*h0+b*w1+ty;positions[index+2]=uvs.x0,positions[index+3]=uvs.y0,positions[index+7]=uvs.x1,positions[index+8]=uvs.y1,positions[index+12]=uvs.x2,positions[index+13]=uvs.y2,positions[index+17]=uvs.x3,positions[index+18]=uvs.y3;var tint=sprite.tint;colors[index+4]=colors[index+9]=colors[index+14]=colors[index+19]=(tint>>16)+(65280&tint)+((255&tint)<<16)+(255*sprite.worldAlpha<<24),this.sprites[this.currentBatchSize++]=sprite}},SpriteRenderer.prototype.flush=function(){if(0!==this.currentBatchSize){var shader,gl=this.renderer.gl;if(this.currentBatchSize>.5*this.size)gl.bufferSubData(gl.ARRAY_BUFFER,0,this.vertices);else{var view=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);gl.bufferSubData(gl.ARRAY_BUFFER,0,view)}for(var nextTexture,nextBlendMode,nextShader,sprite,batchSize=0,start=0,currentBaseTexture=null,currentBlendMode=this.renderer.blendModeManager.currentBlendMode,currentShader=null,blendSwap=!1,shaderSwap=!1,i=0,j=this.currentBatchSize;j>i;i++)sprite=this.sprites[i],nextTexture=sprite._texture.baseTexture,nextBlendMode=sprite.blendMode,nextShader=sprite.shader||this.shader,blendSwap=currentBlendMode!==nextBlendMode,shaderSwap=currentShader!==nextShader,(currentBaseTexture!==nextTexture||blendSwap||shaderSwap)&&(this.renderBatch(currentBaseTexture,batchSize,start),start=i,batchSize=0,currentBaseTexture=nextTexture,blendSwap&&(currentBlendMode=nextBlendMode,this.renderer.blendModeManager.setBlendMode(currentBlendMode)),shaderSwap&&(currentShader=nextShader,shader=currentShader.shaders?currentShader.shaders[gl.id]:currentShader,shader||(shader=currentShader.getShader(this.renderer)),this.renderer.shaderManager.setShader(shader),shader.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),shader.syncUniforms(),gl.activeTexture(gl.TEXTURE0))),batchSize++;this.renderBatch(currentBaseTexture,batchSize,start),this.currentBatchSize=0}},SpriteRenderer.prototype.renderBatch=function(texture,size,startIndex){if(0!==size){var gl=this.renderer.gl;texture._glTextures[gl.id]?gl.bindTexture(gl.TEXTURE_2D,texture._glTextures[gl.id]):this.renderer.updateTexture(texture),gl.drawElements(gl.TRIANGLES,6*size,gl.UNSIGNED_SHORT,6*startIndex*2),this.renderer.drawCount++}},SpriteRenderer.prototype.start=function(){var gl=this.renderer.gl;gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffer),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var stride=this.vertByteSize;gl.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,gl.FLOAT,!1,stride,0),gl.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,gl.FLOAT,!1,stride,8),gl.vertexAttribPointer(this.shader.attributes.aColor,4,gl.UNSIGNED_BYTE,!0,stride,16)},SpriteRenderer.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),ObjectRenderer.prototype.destroy.call(this),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},{"../../const":320,"../../renderers/webgl/WebGLRenderer":347,"../../renderers/webgl/utils/ObjectRenderer":361}],367:[function(require,module,exports){function Text(text,style,resolution){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=resolution||CONST.RESOLUTION,this._text=null,this._style=null;var texture=Texture.fromCanvas(this.canvas);texture.trim=new math.Rectangle,Sprite.call(this,texture),this.text=text,this.style=style}var Sprite=require("../sprites/Sprite"),Texture=require("../textures/Texture"),math=require("../math"),utils=require("../utils"),CONST=require("../const");Text.prototype=Object.create(Sprite.prototype),Text.prototype.constructor=Text,module.exports=Text,Text.fontPropertiesCache={},Text.fontPropertiesCanvas=document.createElement("canvas"),Text.fontPropertiesContext=Text.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(Text.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(value){this.scale.x=value/this._texture._frame.width,this._width=value}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(value){this.scale.y=value/this._texture._frame.height,this._height=value}},style:{get:function(){return this._style},set:function(style){style=style||{},"number"==typeof style.fill&&(style.fill=utils.hex2string(style.fill)),"number"==typeof style.stroke&&(style.stroke=utils.hex2string(style.stroke)),"number"==typeof style.dropShadowColor&&(style.dropShadowColor=utils.hex2string(style.dropShadowColor)),style.font=style.font||"bold 20pt Arial",style.fill=style.fill||"black",style.align=style.align||"left",style.stroke=style.stroke||"black",style.strokeThickness=style.strokeThickness||0,style.wordWrap=style.wordWrap||!1,style.wordWrapWidth=style.wordWrapWidth||100,style.dropShadow=style.dropShadow||!1,style.dropShadowColor=style.dropShadowColor||"#000000",style.dropShadowAngle=void 0!==style.dropShadowAngle?style.dropShadowAngle:Math.PI/6,style.dropShadowDistance=void 0!==style.dropShadowDistance?style.dropShadowDistance:5,style.dropShadowBlur=void 0!==style.dropShadowBlur?style.dropShadowBlur:0,style.padding=style.padding||0,style.textBaseline=style.textBaseline||"alphabetic",style.lineJoin=style.lineJoin||"miter",style.miterLimit=style.miterLimit||10,this._style=style,this.dirty=!0}},text:{get:function(){return this._text},set:function(text){text=text.toString()||" ",this._text!==text&&(this._text=text,this.dirty=!0)}}}),Text.prototype.updateText=function(){var style=this._style;this.context.font=style.font;for(var outputText=style.wordWrap?this.wordWrap(this._text):this._text,lines=outputText.split(/(?:\r\n|\r|\n)/),lineWidths=new Array(lines.length),maxLineWidth=0,fontProperties=this.determineFontProperties(style.font),i=0;i<lines.length;i++){var lineWidth=this.context.measureText(lines[i]).width;lineWidths[i]=lineWidth,maxLineWidth=Math.max(maxLineWidth,lineWidth)}var width=maxLineWidth+style.strokeThickness;style.dropShadow&&(width+=style.dropShadowDistance),this.canvas.width=(width+this.context.lineWidth)*this.resolution;var lineHeight=this.style.lineHeight||fontProperties.fontSize+style.strokeThickness,height=lineHeight*lines.length;style.dropShadow&&(height+=style.dropShadowDistance),this.canvas.height=(height+2*this._style.padding)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=style.font,this.context.strokeStyle=style.stroke,this.context.lineWidth=style.strokeThickness,this.context.textBaseline=style.textBaseline,this.context.lineJoin=style.lineJoin,this.context.miterLimit=style.miterLimit;var linePositionX,linePositionY;if(style.dropShadow){style.dropShadowBlur>0?(this.context.shadowColor=style.dropShadowColor,this.context.shadowBlur=style.dropShadowBlur):this.context.fillStyle=style.dropShadowColor;var xShadowOffset=Math.cos(style.dropShadowAngle)*style.dropShadowDistance,yShadowOffset=Math.sin(style.dropShadowAngle)*style.dropShadowDistance;for(i=0;i<lines.length;i++)linePositionX=style.strokeThickness/2,linePositionY=style.strokeThickness/2+i*lineHeight+fontProperties.ascent,"right"===style.align?linePositionX+=maxLineWidth-lineWidths[i]:"center"===style.align&&(linePositionX+=(maxLineWidth-lineWidths[i])/2),style.fill&&this.context.fillText(lines[i],linePositionX+xShadowOffset,linePositionY+yShadowOffset+this._style.padding)}for(this.context.fillStyle=style.fill,i=0;i<lines.length;i++)linePositionX=style.strokeThickness/2,linePositionY=style.strokeThickness/2+i*lineHeight+fontProperties.ascent,"right"===style.align?linePositionX+=maxLineWidth-lineWidths[i]:"center"===style.align&&(linePositionX+=(maxLineWidth-lineWidths[i])/2),style.stroke&&style.strokeThickness&&this.context.strokeText(lines[i],linePositionX,linePositionY+this._style.padding),style.fill&&this.context.fillText(lines[i],linePositionX,linePositionY+this._style.padding);this.updateTexture()},Text.prototype.updateTexture=function(){var texture=this._texture;texture.baseTexture.hasLoaded=!0,texture.baseTexture.resolution=this.resolution,texture.baseTexture.width=this.canvas.width/this.resolution,texture.baseTexture.height=this.canvas.height/this.resolution,texture.crop.width=texture._frame.width=this.canvas.width/this.resolution,texture.crop.height=texture._frame.height=this.canvas.height/this.resolution,texture.trim.x=0,texture.trim.y=-this._style.padding,texture.trim.width=texture._frame.width,texture.trim.height=texture._frame.height-2*this._style.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,texture.baseTexture.emit("update",texture.baseTexture),this.dirty=!1},Text.prototype.renderWebGL=function(renderer){this.dirty&&this.updateText(),Sprite.prototype.renderWebGL.call(this,renderer)},Text.prototype._renderCanvas=function(renderer){this.dirty&&this.updateText(),Sprite.prototype._renderCanvas.call(this,renderer)},Text.prototype.determineFontProperties=function(fontStyle){var properties=Text.fontPropertiesCache[fontStyle];if(!properties){properties={};var canvas=Text.fontPropertiesCanvas,context=Text.fontPropertiesContext;context.font=fontStyle;var width=Math.ceil(context.measureText("|Mq").width),baseline=Math.ceil(context.measureText("M").width),height=2*baseline;baseline=1.4*baseline|0,canvas.width=width,canvas.height=height,context.fillStyle="#f00",context.fillRect(0,0,width,height),context.font=fontStyle,context.textBaseline="alphabetic",context.fillStyle="#000",context.fillText("|Mq",0,baseline);var i,j,imagedata=context.getImageData(0,0,width,height).data,pixels=imagedata.length,line=4*width,idx=0,stop=!1;for(i=0;baseline>i;i++){for(j=0;line>j;j+=4)if(255!==imagedata[idx+j]){stop=!0;break}if(stop)break;idx+=line}for(properties.ascent=baseline-i,idx=pixels-line,stop=!1,i=height;i>baseline;i--){for(j=0;line>j;j+=4)if(255!==imagedata[idx+j]){stop=!0;break}if(stop)break;idx-=line}properties.descent=i-baseline,properties.fontSize=properties.ascent+properties.descent,Text.fontPropertiesCache[fontStyle]=properties}return properties},Text.prototype.wordWrap=function(text){for(var result="",lines=text.split("\n"),wordWrapWidth=this._style.wordWrapWidth,i=0;i<lines.length;i++){for(var spaceLeft=wordWrapWidth,words=lines[i].split(" "),j=0;j<words.length;j++){var wordWidth=this.context.measureText(words[j]).width,wordWidthWithSpace=wordWidth+this.context.measureText(" ").width;0===j||wordWidthWithSpace>spaceLeft?(j>0&&(result+="\n"),result+=words[j],spaceLeft=wordWrapWidth-wordWidth):(spaceLeft-=wordWidthWithSpace,result+=" "+words[j])}i<lines.length-1&&(result+="\n")}return result},Text.prototype.getBounds=function(matrix){return this.dirty&&this.updateText(),Sprite.prototype.getBounds.call(this,matrix)},Text.prototype.destroy=function(destroyBaseTexture){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===destroyBaseTexture?!0:destroyBaseTexture)}},{"../const":320,"../math":331,"../sprites/Sprite":365,"../textures/Texture":370,"../utils":375}],368:[function(require,module,exports){function BaseTexture(source,scaleMode,resolution){EventEmitter.call(this),this.uid=utils.uid(),this.resolution=resolution||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=scaleMode||CONST.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures={},source&&this.loadSource(source)}var utils=require("../utils"),CONST=require("../const"),EventEmitter=require("eventemitter3");BaseTexture.prototype=Object.create(EventEmitter.prototype),BaseTexture.prototype.constructor=BaseTexture,module.exports=BaseTexture,BaseTexture.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=utils.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},BaseTexture.prototype.loadSource=function(source){var wasLoading=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,wasLoading&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=source,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!source.getContext){this.isLoading=!0;var scope=this;source.onload=function(){source.onload=null,source.onerror=null,scope.isLoading&&(scope.isLoading=!1,scope._sourceLoaded(),scope.emit("loaded",scope))},source.onerror=function(){source.onload=null,source.onerror=null,scope.isLoading&&(scope.isLoading=!1,scope.emit("error",scope))},source.complete&&source.src&&(this.isLoading=!1,source.onload=null,source.onerror=null,source.width&&source.height?(this._sourceLoaded(),wasLoading&&this.emit("loaded",this)):wasLoading&&this.emit("error",this))}},BaseTexture.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},BaseTexture.prototype.destroy=function(){this.imageUrl?(delete utils.BaseTextureCache[this.imageUrl],delete utils.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete utils.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},BaseTexture.prototype.dispose=function(){this.emit("dispose",this)},BaseTexture.prototype.updateSourceImage=function(newSrc){this.source.src=newSrc,this.loadSource(this.source)},BaseTexture.fromImage=function(imageUrl,crossorigin,scaleMode){var baseTexture=utils.BaseTextureCache[imageUrl];if(void 0===crossorigin&&0!==imageUrl.indexOf("data:")&&(crossorigin=!0),!baseTexture){var image=new Image;crossorigin&&(image.crossOrigin=""),baseTexture=new BaseTexture(image,scaleMode),baseTexture.imageUrl=imageUrl,image.src=imageUrl,utils.BaseTextureCache[imageUrl]=baseTexture,baseTexture.resolution=utils.getResolutionOfUrl(imageUrl)}return baseTexture},BaseTexture.fromCanvas=function(canvas,scaleMode){canvas._pixiId||(canvas._pixiId="canvas_"+utils.uid());var baseTexture=utils.BaseTextureCache[canvas._pixiId];return baseTexture||(baseTexture=new BaseTexture(canvas,scaleMode),utils.BaseTextureCache[canvas._pixiId]=baseTexture),baseTexture}},{"../const":320,"../utils":375,eventemitter3:305}],369:[function(require,module,exports){function RenderTexture(renderer,width,height,scaleMode,resolution){if(!renderer)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");width=width||100,height=height||100,resolution=resolution||CONST.RESOLUTION;var baseTexture=new BaseTexture;if(baseTexture.width=width,baseTexture.height=height,baseTexture.resolution=resolution,baseTexture.scaleMode=scaleMode||CONST.SCALE_MODES.DEFAULT,baseTexture.hasLoaded=!0,Texture.call(this,baseTexture,new math.Rectangle(0,0,width,height)),this.width=width,this.height=height,this.resolution=resolution,this.render=null,this.renderer=renderer,this.renderer.type===CONST.RENDERER_TYPE.WEBGL){var gl=this.renderer.gl;this.textureBuffer=new RenderTarget(gl,this.width,this.height,baseTexture.scaleMode,this.resolution),this.baseTexture._glTextures[gl.id]=this.textureBuffer.texture,this.filterManager=new FilterManager(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(width,height),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()}else this.render=this.renderCanvas,this.textureBuffer=new CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}var BaseTexture=require("./BaseTexture"),Texture=require("./Texture"),RenderTarget=require("../renderers/webgl/utils/RenderTarget"),FilterManager=require("../renderers/webgl/managers/FilterManager"),CanvasBuffer=require("../renderers/canvas/utils/CanvasBuffer"),math=require("../math"),CONST=require("../const"),tempMatrix=new math.Matrix;RenderTexture.prototype=Object.create(Texture.prototype),RenderTexture.prototype.constructor=RenderTexture,module.exports=RenderTexture,RenderTexture.prototype.resize=function(width,height,updateBase){width===this.width&&height===this.height||(this.valid=width>0&&height>0,this.width=this._frame.width=this.crop.width=width,this.height=this._frame.height=this.crop.height=height,updateBase&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height)))},RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===CONST.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},RenderTexture.prototype.renderWebGL=function(displayObject,matrix,clear,updateTransform){if(this.valid){if(updateTransform=void 0!==updateTransform?updateTransform:!0,this.textureBuffer.transform=matrix,this.textureBuffer.activate(),displayObject.worldAlpha=1,updateTransform){displayObject.worldTransform.identity(),displayObject.currentBounds=null;var i,j,children=displayObject.children;for(i=0,j=children.length;j>i;++i)children[i].updateTransform()}var temp=this.renderer.filterManager;this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(displayObject,this.textureBuffer,clear),this.renderer.filterManager=temp}},RenderTexture.prototype.renderCanvas=function(displayObject,matrix,clear,updateTransform){if(this.valid){updateTransform=!!updateTransform;var wt=tempMatrix;wt.identity(),matrix&&wt.append(matrix);var cachedWt=displayObject.worldTransform;displayObject.worldTransform=wt,displayObject.worldAlpha=1;var i,j,children=displayObject.children;for(i=0,j=children.length;j>i;++i)children[i].updateTransform();clear&&this.textureBuffer.clear();var context=this.textureBuffer.context,realResolution=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(displayObject,context),this.renderer.resolution=realResolution,displayObject.worldTransform===wt&&(displayObject.worldTransform=cachedWt)}},RenderTexture.prototype.destroy=function(){Texture.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},RenderTexture.prototype.getImage=function(){var image=new Image;return image.src=this.getBase64(),image},RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===CONST.RENDERER_TYPE.WEBGL){var gl=this.renderer.gl,width=this.textureBuffer.size.width,height=this.textureBuffer.size.height,webGLPixels=new Uint8Array(4*width*height);gl.bindFramebuffer(gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),gl.readPixels(0,0,width,height,gl.RGBA,gl.UNSIGNED_BYTE,webGLPixels),gl.bindFramebuffer(gl.FRAMEBUFFER,null);var tempCanvas=new CanvasBuffer(width,height),canvasData=tempCanvas.context.getImageData(0,0,width,height);return canvasData.data.set(webGLPixels),tempCanvas.context.putImageData(canvasData,0,0),tempCanvas.canvas}return this.textureBuffer.canvas},RenderTexture.prototype.getPixels=function(){var width,height;if(this.renderer.type===CONST.RENDERER_TYPE.WEBGL){var gl=this.renderer.gl;width=this.textureBuffer.size.width,height=this.textureBuffer.size.height;var webGLPixels=new Uint8Array(4*width*height);return gl.bindFramebuffer(gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),gl.readPixels(0,0,width,height,gl.RGBA,gl.UNSIGNED_BYTE,webGLPixels),gl.bindFramebuffer(gl.FRAMEBUFFER,null),webGLPixels}return width=this.textureBuffer.canvas.width,height=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,width,height).data},RenderTexture.prototype.getPixel=function(x,y){if(this.renderer.type===CONST.RENDERER_TYPE.WEBGL){var gl=this.renderer.gl,webGLPixels=new Uint8Array(4);return gl.bindFramebuffer(gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),gl.readPixels(x,y,1,1,gl.RGBA,gl.UNSIGNED_BYTE,webGLPixels),gl.bindFramebuffer(gl.FRAMEBUFFER,null),webGLPixels}return this.textureBuffer.canvas.getContext("2d").getImageData(x,y,1,1).data}},{"../const":320,"../math":331,"../renderers/canvas/utils/CanvasBuffer":343,"../renderers/webgl/managers/FilterManager":352,"../renderers/webgl/utils/RenderTarget":363,"./BaseTexture":368,"./Texture":370}],370:[function(require,module,exports){function Texture(baseTexture,frame,crop,trim,rotate){if(EventEmitter.call(this),this.noFrame=!1,frame||(this.noFrame=!0,frame=new math.Rectangle(0,0,1,1)),baseTexture instanceof Texture&&(baseTexture=baseTexture.baseTexture),this.baseTexture=baseTexture,this._frame=frame,this.trim=trim,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=crop||frame,this._rotate=+(rotate||0),rotate===!0)this._rotate=2;else if(this._rotate%2!==0)throw"attempt to use diamond-shaped UVs. If you are sure, set rotation manually";baseTexture.hasLoaded?(this.noFrame&&(frame=new math.Rectangle(0,0,baseTexture.width,baseTexture.height),baseTexture.on("update",this.onBaseTextureUpdated,this)),this.frame=frame):baseTexture.once("loaded",this.onBaseTextureLoaded,this)}var BaseTexture=require("./BaseTexture"),VideoBaseTexture=require("./VideoBaseTexture"),TextureUvs=require("./TextureUvs"),EventEmitter=require("eventemitter3"),math=require("../math"),utils=require("../utils");Texture.prototype=Object.create(EventEmitter.prototype),Texture.prototype.constructor=Texture,module.exports=Texture,Object.defineProperties(Texture.prototype,{frame:{get:function(){return this._frame},set:function(frame){if(this._frame=frame,this.noFrame=!1,this.width=frame.width,this.height=frame.height,!this.trim&&!this.rotate&&(frame.x+frame.width>this.baseTexture.width||frame.y+frame.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=frame&&frame.width&&frame.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=frame,this.valid&&this._updateUvs()}},rotate:{get:function(){return this._rotate},set:function(rotate){this._rotate=rotate,this.valid&&this._updateUvs()}}}),Texture.prototype.update=function(){this.baseTexture.update()},Texture.prototype.onBaseTextureLoaded=function(baseTexture){this.noFrame?this.frame=new math.Rectangle(0,0,baseTexture.width,baseTexture.height):this.frame=this._frame,this.emit("update",this)},Texture.prototype.onBaseTextureUpdated=function(baseTexture){this._frame.width=baseTexture.width,this._frame.height=baseTexture.height,this.emit("update",this)},Texture.prototype.destroy=function(destroyBase){this.baseTexture&&(destroyBase&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},Texture.prototype.clone=function(){return new Texture(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new TextureUvs),this._uvs.set(this.crop,this.baseTexture,this.rotate)},Texture.fromImage=function(imageUrl,crossorigin,scaleMode){var texture=utils.TextureCache[imageUrl];return texture||(texture=new Texture(BaseTexture.fromImage(imageUrl,crossorigin,scaleMode)),utils.TextureCache[imageUrl]=texture),texture},Texture.fromFrame=function(frameId){var texture=utils.TextureCache[frameId];if(!texture)throw new Error('The frameId "'+frameId+'" does not exist in the texture cache');return texture},Texture.fromCanvas=function(canvas,scaleMode){return new Texture(BaseTexture.fromCanvas(canvas,scaleMode))},Texture.fromVideo=function(video,scaleMode){return"string"==typeof video?Texture.fromVideoUrl(video,scaleMode):new Texture(VideoBaseTexture.fromVideo(video,scaleMode))},Texture.fromVideoUrl=function(videoUrl,scaleMode){return new Texture(VideoBaseTexture.fromUrl(videoUrl,scaleMode))},Texture.addTextureToCache=function(texture,id){utils.TextureCache[id]=texture},Texture.removeTextureFromCache=function(id){var texture=utils.TextureCache[id];return delete utils.TextureCache[id],delete utils.BaseTextureCache[id],texture},Texture.EMPTY=new Texture(new BaseTexture)},{"../math":331,"../utils":375,"./BaseTexture":368,"./TextureUvs":371,"./VideoBaseTexture":372,eventemitter3:305}],371:[function(require,module,exports){function TextureUvs(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}module.exports=TextureUvs;var GroupD8=require("../math/GroupD8");TextureUvs.prototype.set=function(frame,baseFrame,rotate){var tw=baseFrame.width,th=baseFrame.height;if(rotate){var swapWidthHeight=GroupD8.isSwapWidthHeight(rotate),w2=(swapWidthHeight?frame.height:frame.width)/2/tw,h2=(swapWidthHeight?frame.width:frame.height)/2/th,cX=frame.x/tw+w2,cY=frame.y/th+h2;rotate=GroupD8.add(rotate,GroupD8.NW),this.x0=cX+w2*GroupD8.uX(rotate),this.y0=cY+h2*GroupD8.uY(rotate),rotate=GroupD8.add(rotate,2),this.x1=cX+w2*GroupD8.uX(rotate),this.y1=cY+h2*GroupD8.uY(rotate),rotate=GroupD8.add(rotate,2),this.x2=cX+w2*GroupD8.uX(rotate),this.y2=cY+h2*GroupD8.uY(rotate),rotate=GroupD8.add(rotate,2),this.x3=cX+w2*GroupD8.uX(rotate),this.y3=cY+h2*GroupD8.uY(rotate)}else this.x0=frame.x/tw,this.y0=frame.y/th,this.x1=(frame.x+frame.width)/tw,this.y1=frame.y/th,this.x2=(frame.x+frame.width)/tw,this.y2=(frame.y+frame.height)/th,this.x3=frame.x/tw,this.y3=(frame.y+frame.height)/th}},{"../math/GroupD8":328}],372:[function(require,module,exports){function VideoBaseTexture(source,scaleMode){if(!source)throw new Error("No video source element specified.");(source.readyState===source.HAVE_ENOUGH_DATA||source.readyState===source.HAVE_FUTURE_DATA)&&source.width&&source.height&&(source.complete=!0),BaseTexture.call(this,source,scaleMode),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),source.complete||(source.addEventListener("canplay",this._onCanPlay),source.addEventListener("canplaythrough",this._onCanPlay),source.addEventListener("play",this._onPlayStart.bind(this)),source.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function createSource(path,type){type||(type="video/"+path.substr(path.lastIndexOf(".")+1));var source=document.createElement("source");return source.src=path,source.type=type,source}var BaseTexture=require("./BaseTexture"),utils=require("../utils");VideoBaseTexture.prototype=Object.create(BaseTexture.prototype),VideoBaseTexture.prototype.constructor=VideoBaseTexture,module.exports=VideoBaseTexture,VideoBaseTexture.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},VideoBaseTexture.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},VideoBaseTexture.prototype._onPlayStop=function(){this.autoUpdate=!1},VideoBaseTexture.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},VideoBaseTexture.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete utils.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),BaseTexture.prototype.destroy.call(this)},VideoBaseTexture.fromVideo=function(video,scaleMode){video._pixiId||(video._pixiId="video_"+utils.uid());var baseTexture=utils.BaseTextureCache[video._pixiId];return baseTexture||(baseTexture=new VideoBaseTexture(video,scaleMode),utils.BaseTextureCache[video._pixiId]=baseTexture),baseTexture},VideoBaseTexture.fromUrl=function(videoSrc,scaleMode){var video=document.createElement("video");if(Array.isArray(videoSrc))for(var i=0;i<videoSrc.length;++i)video.appendChild(createSource(videoSrc[i].src||videoSrc[i],videoSrc[i].mime));else video.appendChild(createSource(videoSrc.src||videoSrc,videoSrc.mime));return video.load(),video.play(),VideoBaseTexture.fromVideo(video,scaleMode)},VideoBaseTexture.fromUrls=VideoBaseTexture.fromUrl},{"../utils":375,"./BaseTexture":368}],373:[function(require,module,exports){function Ticker(){var _this=this;this._tick=function(time){_this._requestId=null,_this.started&&(_this.update(time),_this.started&&null===_this._requestId&&_this._emitter.listeners(TICK,!0)&&(_this._requestId=requestAnimationFrame(_this._tick)))},this._emitter=new EventEmitter,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/CONST.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var CONST=require("../const"),EventEmitter=require("eventemitter3"),TICK="tick";Object.defineProperties(Ticker.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(fps){var minFPMS=Math.min(Math.max(0,fps)/1e3,CONST.TARGET_FPMS);this._maxElapsedMS=1/minFPMS}}}),Ticker.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(TICK,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},Ticker.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Ticker.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Ticker.prototype.add=function(fn,context){return this._emitter.on(TICK,fn,context),this._startIfPossible(),this},Ticker.prototype.addOnce=function(fn,context){return this._emitter.once(TICK,fn,context),this._startIfPossible(),this},Ticker.prototype.remove=function(fn,context){return this._emitter.off(TICK,fn,context),this._emitter.listeners(TICK,!0)||this._cancelIfNeeded(),this},Ticker.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Ticker.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Ticker.prototype.update=function(currentTime){var elapsedMS;currentTime=currentTime||performance.now(),elapsedMS=this.elapsedMS=currentTime-this.lastTime,elapsedMS>this._maxElapsedMS&&(elapsedMS=this._maxElapsedMS),this.deltaTime=elapsedMS*CONST.TARGET_FPMS*this.speed,this._emitter.emit(TICK,this.deltaTime),this.lastTime=currentTime},module.exports=Ticker},{"../const":320,eventemitter3:305}],374:[function(require,module,exports){var Ticker=require("./Ticker"),shared=new Ticker;shared.autoStart=!0,module.exports={shared:shared,
Ticker:Ticker}},{"./Ticker":373}],375:[function(require,module,exports){var CONST=require("../const"),utils=module.exports={_uid:0,_saidHello:!1,EventEmitter:require("eventemitter3"),pluginTarget:require("./pluginTarget"),async:require("async"),uid:function(){return++utils._uid},hex2rgb:function(hex,out){return out=out||[],out[0]=(hex>>16&255)/255,out[1]=(hex>>8&255)/255,out[2]=(255&hex)/255,out},hex2string:function(hex){return hex=hex.toString(16),hex="000000".substr(0,6-hex.length)+hex,"#"+hex},rgb2hex:function(rgb){return(255*rgb[0]<<16)+(255*rgb[1]<<8)+255*rgb[2]},canUseNewCanvasBlendModes:function(){if("undefined"==typeof document)return!1;var pngHead="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",pngEnd="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",magenta=new Image;magenta.src=pngHead+"AP804Oa6"+pngEnd;var yellow=new Image;yellow.src=pngHead+"/wCKxvRF"+pngEnd;var canvas=document.createElement("canvas");canvas.width=6,canvas.height=1;var context=canvas.getContext("2d");context.globalCompositeOperation="multiply",context.drawImage(magenta,0,0),context.drawImage(yellow,2,0);var data=context.getImageData(2,0,1,1).data;return 255===data[0]&&0===data[1]&&0===data[2]},getNextPowerOfTwo:function(number){if(number>0&&0===(number&number-1))return number;for(var result=1;number>result;)result<<=1;return result},isPowerOfTwo:function(width,height){return width>0&&0===(width&width-1)&&height>0&&0===(height&height-1)},getResolutionOfUrl:function(url){var resolution=CONST.RETINA_PREFIX.exec(url);return resolution?parseFloat(resolution[1]):1},sayHello:function(type){if(!utils._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var args=["\n %c %c %c Pixi.js "+CONST.VERSION+" -  "+type+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,args)}else window.console&&window.console.log("Pixi.js "+CONST.VERSION+" - "+type+" - http://www.pixijs.com/");utils._saidHello=!0}},isWebGLSupported:function(){var contextOptions={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var canvas=document.createElement("canvas"),gl=canvas.getContext("webgl",contextOptions)||canvas.getContext("experimental-webgl",contextOptions);return!(!gl||!gl.getContextAttributes().stencil)}catch(e){return!1}},sign:function(n){return n?0>n?-1:1:0},removeItems:function(arr,startIdx,removeCount){var length=arr.length;if(!(startIdx>=length||0===removeCount)){removeCount=startIdx+removeCount>length?length-startIdx:removeCount;for(var i=startIdx,len=length-removeCount;len>i;++i)arr[i]=arr[i+removeCount];arr.length=len}},TextureCache:{},BaseTextureCache:{}}},{"../const":320,"./pluginTarget":376,async:316,eventemitter3:305}],376:[function(require,module,exports){function pluginTarget(obj){obj.__plugins={},obj.registerPlugin=function(pluginName,ctor){obj.__plugins[pluginName]=ctor},obj.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var o in obj.__plugins)this.plugins[o]=new obj.__plugins[o](this)},obj.prototype.destroyPlugins=function(){for(var o in this.plugins)this.plugins[o].destroy(),this.plugins[o]=null;this.plugins=null}}module.exports={mixin:function(obj){pluginTarget(obj)}}},{}],377:[function(require,module,exports){var core=require("./core"),mesh=require("./mesh"),extras=require("./extras"),filters=require("./filters");core.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},core.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(core,{Stage:{get:function(){return console.warn("You do not need to use a PIXI Stage any more, you can simply render any container."),core.Container}},DisplayObjectContainer:{get:function(){return console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),core.Container}},Strip:{get:function(){return console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),mesh.Mesh}},Rope:{get:function(){return console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),mesh.Rope}},MovieClip:{get:function(){return console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on."),extras.MovieClip}},TilingSprite:{get:function(){return console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),extras.TilingSprite}},BitmapText:{get:function(){return console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),extras.BitmapText}},blendModes:{get:function(){return console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),core.BLEND_MODES}},scaleModes:{get:function(){return console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),core.SCALE_MODES}},BaseTextureCache:{get:function(){return console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),core.utils.BaseTextureCache}},TextureCache:{get:function(){return console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),core.utils.TextureCache}},math:{get:function(){return console.warn("The math namespace is deprecated, please access members already accessible on PIXI."),core}}}),core.Sprite.prototype.setTexture=function(texture){this.texture=texture,console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},extras.BitmapText.prototype.setText=function(text){this.text=text,console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},core.Text.prototype.setText=function(text){this.text=text,console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},core.Text.prototype.setStyle=function(style){this.style=style,console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},core.Texture.prototype.setFrame=function(frame){this.frame=frame,console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")},Object.defineProperties(filters,{AbstractFilter:{get:function(){return console.warn("filters.AbstractFilter is an undocumented alias, please use AbstractFilter from now on."),core.AbstractFilter}},FXAAFilter:{get:function(){return console.warn("filters.FXAAFilter is an undocumented alias, please use FXAAFilter from now on."),core.FXAAFilter}},SpriteMaskFilter:{get:function(){return console.warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),core.SpriteMaskFilter}}}),core.utils.uuid=function(){return console.warn("utils.uuid() is deprecated, please use utils.uid() from now on."),core.utils.uid()}},{"./core":327,"./extras":384,"./filters":401,"./mesh":426}],378:[function(require,module,exports){function BitmapText(text,style){core.Container.call(this),style=style||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==style.tint?style.tint:16777215,align:style.align||"left",name:null,size:0},this.font=style.font,this._text=text,this.maxWidth=0,this.maxLineHeight=0,this.dirty=!1,this.updateText()}var core=require("../core");BitmapText.prototype=Object.create(core.Container.prototype),BitmapText.prototype.constructor=BitmapText,module.exports=BitmapText,Object.defineProperties(BitmapText.prototype,{tint:{get:function(){return this._font.tint},set:function(value){this._font.tint="number"==typeof value&&value>=0?value:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(value){this._font.align=value||"left",this.dirty=!0}},font:{get:function(){return this._font},set:function(value){value&&("string"==typeof value?(value=value.split(" "),this._font.name=1===value.length?value[0]:value.slice(1).join(" "),this._font.size=value.length>=2?parseInt(value[0],10):BitmapText.fonts[this._font.name].size):(this._font.name=value.name,this._font.size="number"==typeof value.size?value.size:parseInt(value.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(value){value=value.toString()||" ",this._text!==value&&(this._text=value,this.dirty=!0)}}}),BitmapText.prototype.updateText=function(){for(var data=BitmapText.fonts[this._font.name],pos=new core.Point,prevCharCode=null,chars=[],lastLineWidth=0,maxLineWidth=0,lineWidths=[],line=0,scale=this._font.size/data.size,lastSpace=-1,maxLineHeight=0,i=0;i<this.text.length;i++){var charCode=this.text.charCodeAt(i);if(lastSpace=/(\s)/.test(this.text.charAt(i))?i:lastSpace,/(?:\r\n|\r|\n)/.test(this.text.charAt(i)))lineWidths.push(lastLineWidth),maxLineWidth=Math.max(maxLineWidth,lastLineWidth),line++,pos.x=0,pos.y+=data.lineHeight,prevCharCode=null;else if(-1!==lastSpace&&this.maxWidth>0&&pos.x*scale>this.maxWidth)core.utils.removeItems(chars,lastSpace,i-lastSpace),i=lastSpace,lastSpace=-1,lineWidths.push(lastLineWidth),maxLineWidth=Math.max(maxLineWidth,lastLineWidth),line++,pos.x=0,pos.y+=data.lineHeight,prevCharCode=null;else{var charData=data.chars[charCode];charData&&(prevCharCode&&charData.kerning[prevCharCode]&&(pos.x+=charData.kerning[prevCharCode]),chars.push({texture:charData.texture,line:line,charCode:charCode,position:new core.Point(pos.x+charData.xOffset,pos.y+charData.yOffset)}),lastLineWidth=pos.x+(charData.texture.width+charData.xOffset),pos.x+=charData.xAdvance,maxLineHeight=Math.max(maxLineHeight,charData.yOffset+charData.texture.height),prevCharCode=charCode)}}lineWidths.push(lastLineWidth),maxLineWidth=Math.max(maxLineWidth,lastLineWidth);var lineAlignOffsets=[];for(i=0;line>=i;i++){var alignOffset=0;"right"===this._font.align?alignOffset=maxLineWidth-lineWidths[i]:"center"===this._font.align&&(alignOffset=(maxLineWidth-lineWidths[i])/2),lineAlignOffsets.push(alignOffset)}var lenChars=chars.length,tint=this.tint;for(i=0;lenChars>i;i++){var c=this._glyphs[i];c?c.texture=chars[i].texture:(c=new core.Sprite(chars[i].texture),this._glyphs.push(c)),c.position.x=(chars[i].position.x+lineAlignOffsets[chars[i].line])*scale,c.position.y=chars[i].position.y*scale,c.scale.x=c.scale.y=scale,c.tint=tint,c.parent||this.addChild(c)}for(i=lenChars;i<this._glyphs.length;++i)this.removeChild(this._glyphs[i]);this.textWidth=maxLineWidth*scale,this.textHeight=(pos.y+data.lineHeight)*scale,this.maxLineHeight=maxLineHeight*scale},BitmapText.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},BitmapText.prototype.getLocalBounds=function(){return this.validate(),core.Container.prototype.getLocalBounds.call(this)},BitmapText.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},BitmapText.fonts={}},{"../core":327}],379:[function(require,module,exports){function MovieClip(textures){core.Sprite.call(this,textures[0]instanceof core.Texture?textures[0]:textures[0].texture),this._textures=null,this._durations=null,this.textures=textures,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var core=require("../core");MovieClip.prototype=Object.create(core.Sprite.prototype),MovieClip.prototype.constructor=MovieClip,module.exports=MovieClip,Object.defineProperties(MovieClip.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(value){if(value[0]instanceof core.Texture)this._textures=value,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<value.length;i++)this._textures.push(value[i].texture),this._durations.push(value[i].time)}}},currentFrame:{get:function(){var currentFrame=Math.floor(this._currentTime)%this._textures.length;return 0>currentFrame&&(currentFrame+=this._textures.length),currentFrame}}}),MovieClip.prototype.stop=function(){this.playing&&(this.playing=!1,core.ticker.shared.remove(this.update,this))},MovieClip.prototype.play=function(){this.playing||(this.playing=!0,core.ticker.shared.add(this.update,this))},MovieClip.prototype.gotoAndStop=function(frameNumber){this.stop(),this._currentTime=frameNumber,this._texture=this._textures[this.currentFrame]},MovieClip.prototype.gotoAndPlay=function(frameNumber){this._currentTime=frameNumber,this.play()},MovieClip.prototype.update=function(deltaTime){var elapsed=this.animationSpeed*deltaTime;if(null!==this._durations){var lag=this._currentTime%1*this._durations[this.currentFrame];for(lag+=elapsed/60*1e3;0>lag;)this._currentTime--,lag+=this._durations[this.currentFrame];var sign=Math.sign(this.animationSpeed*deltaTime);for(this._currentTime=Math.floor(this._currentTime);lag>=this._durations[this.currentFrame];)lag-=this._durations[this.currentFrame]*sign,this._currentTime+=sign;this._currentTime+=lag/this._durations[this.currentFrame]}else this._currentTime+=elapsed;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):this._texture=this._textures[this.currentFrame]},MovieClip.prototype.destroy=function(){this.stop(),core.Sprite.prototype.destroy.call(this)},MovieClip.fromFrames=function(frames){for(var textures=[],i=0;i<frames.length;++i)textures.push(new core.Texture.fromFrame(frames[i]));return new MovieClip(textures)},MovieClip.fromImages=function(images){for(var textures=[],i=0;i<images.length;++i)textures.push(new core.Texture.fromImage(images[i]));return new MovieClip(textures)}},{"../core":327}],380:[function(require,module,exports){function TilingSprite(texture,width,height){core.Sprite.call(this,texture),this.tileScale=new core.Point(1,1),this.tilePosition=new core.Point(0,0),this._width=width||100,this._height=height||100,this._uvs=new core.TextureUvs,this._canvasPattern=null,this.shader=new core.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}var core=require("../core"),tempPoint=new core.Point,CanvasTinter=require("../core/renderers/canvas/utils/CanvasTinter");TilingSprite.prototype=Object.create(core.Sprite.prototype),TilingSprite.prototype.constructor=TilingSprite,module.exports=TilingSprite,Object.defineProperties(TilingSprite.prototype,{width:{get:function(){return this._width},set:function(value){this._width=value}},height:{get:function(){return this._height},set:function(value){this._height=value}}}),TilingSprite.prototype._onTextureUpdate=function(){},TilingSprite.prototype._renderWebGL=function(renderer){var texture=this._texture;if(texture&&texture._uvs){var tempUvs=texture._uvs,tempWidth=texture._frame.width,tempHeight=texture._frame.height,tw=texture.baseTexture.width,th=texture.baseTexture.height;texture._uvs=this._uvs,texture._frame.width=this.width,texture._frame.height=this.height,this.shader.uniforms.uPixelSize.value[0]=1/tw,this.shader.uniforms.uPixelSize.value[1]=1/th,this.shader.uniforms.uFrame.value[0]=tempUvs.x0,this.shader.uniforms.uFrame.value[1]=tempUvs.y0,this.shader.uniforms.uFrame.value[2]=tempUvs.x1-tempUvs.x0,this.shader.uniforms.uFrame.value[3]=tempUvs.y2-tempUvs.y0,this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(tempWidth*this.tileScale.x)/this._width,this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(tempHeight*this.tileScale.y)/this._height,this.shader.uniforms.uTransform.value[2]=tw/this._width*this.tileScale.x,this.shader.uniforms.uTransform.value[3]=th/this._height*this.tileScale.y,renderer.setObjectRenderer(renderer.plugins.sprite),renderer.plugins.sprite.render(this),texture._uvs=tempUvs,texture._frame.width=tempWidth,texture._frame.height=tempHeight}},TilingSprite.prototype._renderCanvas=function(renderer){var texture=this._texture;if(texture.baseTexture.hasLoaded){var context=renderer.context,transform=this.worldTransform,resolution=renderer.resolution,baseTexture=texture.baseTexture,modX=this.tilePosition.x/this.tileScale.x%texture._frame.width,modY=this.tilePosition.y/this.tileScale.y%texture._frame.height;if(!this._canvasPattern){var tempCanvas=new core.CanvasBuffer(texture._frame.width,texture._frame.height);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=CanvasTinter.getTintedTexture(this,this.tint)),tempCanvas.context.drawImage(this.tintedTexture,0,0)):tempCanvas.context.drawImage(baseTexture.source,-texture._frame.x,-texture._frame.y),this._canvasPattern=tempCanvas.context.createPattern(tempCanvas.canvas,"repeat")}context.globalAlpha=this.worldAlpha,context.setTransform(transform.a*resolution,transform.b*resolution,transform.c*resolution,transform.d*resolution,transform.tx*resolution,transform.ty*resolution),context.scale(this.tileScale.x,this.tileScale.y),context.translate(modX+this.anchor.x*-this._width,modY+this.anchor.y*-this._height);var compositeOperation=renderer.blendModes[this.blendMode];compositeOperation!==renderer.context.globalCompositeOperation&&(context.globalCompositeOperation=compositeOperation),context.fillStyle=this._canvasPattern,context.fillRect(-modX,-modY,this._width/this.tileScale.x,this._height/this.tileScale.y)}},TilingSprite.prototype.getBounds=function(){var minX,maxX,minY,maxY,width=this._width,height=this._height,w0=width*(1-this.anchor.x),w1=width*-this.anchor.x,h0=height*(1-this.anchor.y),h1=height*-this.anchor.y,worldTransform=this.worldTransform,a=worldTransform.a,b=worldTransform.b,c=worldTransform.c,d=worldTransform.d,tx=worldTransform.tx,ty=worldTransform.ty,x1=a*w1+c*h1+tx,y1=d*h1+b*w1+ty,x2=a*w0+c*h1+tx,y2=d*h1+b*w0+ty,x3=a*w0+c*h0+tx,y3=d*h0+b*w0+ty,x4=a*w1+c*h0+tx,y4=d*h0+b*w1+ty;minX=x1,minX=minX>x2?x2:minX,minX=minX>x3?x3:minX,minX=minX>x4?x4:minX,minY=y1,minY=minY>y2?y2:minY,minY=minY>y3?y3:minY,minY=minY>y4?y4:minY,maxX=x1,maxX=x2>maxX?x2:maxX,maxX=x3>maxX?x3:maxX,maxX=x4>maxX?x4:maxX,maxY=y1,maxY=y2>maxY?y2:maxY,maxY=y3>maxY?y3:maxY,maxY=y4>maxY?y4:maxY;var bounds=this._bounds;return bounds.x=minX,bounds.width=maxX-minX,bounds.y=minY,bounds.height=maxY-minY,this._currentBounds=bounds,bounds},TilingSprite.prototype.containsPoint=function(point){this.worldTransform.applyInverse(point,tempPoint);var y1,width=this._width,height=this._height,x1=-width*this.anchor.x;return tempPoint.x>x1&&tempPoint.x<x1+width&&(y1=-height*this.anchor.y,tempPoint.y>y1&&tempPoint.y<y1+height)},TilingSprite.prototype.destroy=function(){core.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},TilingSprite.fromFrame=function(frameId,width,height){var texture=core.utils.TextureCache[frameId];if(!texture)throw new Error('The frameId "'+frameId+'" does not exist in the texture cache '+this);return new TilingSprite(texture,width,height)},TilingSprite.fromImage=function(imageId,width,height,crossorigin,scaleMode){return new TilingSprite(core.Texture.fromImage(imageId,crossorigin,scaleMode),width,height)}},{"../core":327,"../core/renderers/canvas/utils/CanvasTinter":346}],381:[function(require,module,exports){var core=require("../core"),DisplayObject=core.DisplayObject,_tempMatrix=new core.Matrix;DisplayObject.prototype._cacheAsBitmap=!1,DisplayObject.prototype._originalRenderWebGL=null,DisplayObject.prototype._originalRenderCanvas=null,DisplayObject.prototype._originalUpdateTransform=null,DisplayObject.prototype._originalHitTest=null,DisplayObject.prototype._originalDestroy=null,DisplayObject.prototype._cachedSprite=null,Object.defineProperties(DisplayObject.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(value){this._cacheAsBitmap!==value&&(this._cacheAsBitmap=value,value?(this._originalRenderWebGL=this.renderWebGL,this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}}),DisplayObject.prototype._renderCachedWebGL=function(renderer){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(renderer),this._cachedSprite.worldAlpha=this.worldAlpha,renderer.setObjectRenderer(renderer.plugins.sprite),renderer.plugins.sprite.render(this._cachedSprite))},DisplayObject.prototype._initCachedDisplayObject=function(renderer){if(!this._cachedSprite){renderer.currentRenderer.flush();var bounds=this.getLocalBounds().clone();if(this._filters){var padding=this._filters[0].padding;bounds.x-=padding,bounds.y-=padding,bounds.width+=2*padding,bounds.height+=2*padding}var cachedRenderTarget=renderer.currentRenderTarget,stack=renderer.filterManager.filterStack,renderTexture=new core.RenderTexture(renderer,0|bounds.width,0|bounds.height),m=_tempMatrix;m.tx=-bounds.x,m.ty=-bounds.y,this.renderWebGL=this._originalRenderWebGL,renderTexture.render(this,m,!0,!0),renderer.setRenderTarget(cachedRenderTarget),renderer.filterManager.filterStack=stack,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new core.Sprite(renderTexture),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(bounds.x/bounds.width),this._cachedSprite.anchor.y=-(bounds.y/bounds.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},DisplayObject.prototype._renderCachedCanvas=function(renderer){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(renderer),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(renderer))},DisplayObject.prototype._initCachedDisplayObjectCanvas=function(renderer){if(!this._cachedSprite){var bounds=this.getLocalBounds(),cachedRenderTarget=renderer.context,renderTexture=new core.RenderTexture(renderer,0|bounds.width,0|bounds.height),m=_tempMatrix;m.tx=-bounds.x,m.ty=-bounds.y,this.renderCanvas=this._originalRenderCanvas,renderTexture.render(this,m,!0),renderer.context=cachedRenderTarget,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new core.Sprite(renderTexture),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(bounds.x/bounds.width),this._cachedSprite.anchor.y=-(bounds.y/bounds.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},DisplayObject.prototype._getCachedBounds=function(){return this._cachedSprite._currentBounds=null,this._cachedSprite.getBounds()},DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy(),this._cachedSprite=null},DisplayObject.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this._originalDestroy()}},{"../core":327}],382:[function(require,module,exports){var core=require("../core");core.DisplayObject.prototype.name=null,core.Container.prototype.getChildByName=function(name){for(var i=0;i<this.children.length;i++)if(this.children[i].name===name)return this.children[i];return null}},{"../core":327}],383:[function(require,module,exports){var core=require("../core");core.DisplayObject.prototype.getGlobalPosition=function(point){return point=point||new core.Point,this.parent?(this.displayObjectUpdateTransform(),point.x=this.worldTransform.tx,point.y=this.worldTransform.ty):(point.x=this.position.x,point.y=this.position.y),point}},{"../core":327}],384:[function(require,module,exports){require("./cacheAsBitmap"),require("./getChildByName"),require("./getGlobalPosition"),module.exports={MovieClip:require("./MovieClip"),TilingSprite:require("./TilingSprite"),BitmapText:require("./BitmapText")}},{"./BitmapText":378,"./MovieClip":379,"./TilingSprite":380,"./cacheAsBitmap":381,"./getChildByName":382,"./getGlobalPosition":383}],385:[function(require,module,exports){function AsciiFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var core=require("../../core");AsciiFilter.prototype=Object.create(core.AbstractFilter.prototype),AsciiFilter.prototype.constructor=AsciiFilter,module.exports=AsciiFilter,Object.defineProperties(AsciiFilter.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(value){this.uniforms.pixelSize.value=value}}})},{"../../core":327}],386:[function(require,module,exports){function BloomFilter(){core.AbstractFilter.call(this),this.blurXFilter=new BlurXFilter,this.blurYFilter=new BlurYFilter,this.defaultFilter=new core.AbstractFilter}var core=require("../../core"),BlurXFilter=require("../blur/BlurXFilter"),BlurYFilter=require("../blur/BlurYFilter");BloomFilter.prototype=Object.create(core.AbstractFilter.prototype),BloomFilter.prototype.constructor=BloomFilter,module.exports=BloomFilter,BloomFilter.prototype.applyFilter=function(renderer,input,output){var renderTarget=renderer.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(renderer,input,output),this.blurXFilter.applyFilter(renderer,input,renderTarget),renderer.blendModeManager.setBlendMode(core.BLEND_MODES.SCREEN),this.blurYFilter.applyFilter(renderer,renderTarget,output),renderer.blendModeManager.setBlendMode(core.BLEND_MODES.NORMAL),renderer.filterManager.returnRenderTarget(renderTarget)},Object.defineProperties(BloomFilter.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(value){this.blurXFilter.blur=this.blurYFilter.blur=value}},blurX:{get:function(){return this.blurXFilter.blur},set:function(value){this.blurXFilter.blur=value}},blurY:{get:function(){return this.blurYFilter.blur},set:function(value){this.blurYFilter.blur=value}}})},{"../../core":327,"../blur/BlurXFilter":389,"../blur/BlurYFilter":390}],387:[function(require,module,exports){function BlurDirFilter(dirX,dirY){core.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",{strength:{type:"1f",value:1},dirX:{type:"1f",value:dirX||0},dirY:{type:"1f",value:dirY||0}}),this.defaultFilter=new core.AbstractFilter,this.passes=1,this.dirX=dirX||0,this.dirY=dirY||0,this.strength=4}var core=require("../../core");BlurDirFilter.prototype=Object.create(core.AbstractFilter.prototype),BlurDirFilter.prototype.constructor=BlurDirFilter,module.exports=BlurDirFilter,BlurDirFilter.prototype.applyFilter=function(renderer,input,output,clear){var shader=this.getShader(renderer);if(this.uniforms.strength.value=this.strength/4/this.passes*(input.frame.width/input.size.width),1===this.passes)renderer.filterManager.applyFilter(shader,input,output,clear);else{var renderTarget=renderer.filterManager.getRenderTarget(!0);renderer.filterManager.applyFilter(shader,input,renderTarget,clear);for(var i=0;i<this.passes-2;i++)renderer.filterManager.applyFilter(shader,renderTarget,renderTarget,clear);renderer.filterManager.applyFilter(shader,renderTarget,output,clear),renderer.filterManager.returnRenderTarget(renderTarget)}},Object.defineProperties(BlurDirFilter.prototype,{blur:{get:function(){return this.strength},set:function(value){this.padding=.5*value,this.strength=value}},dirX:{get:function(){return this.dirX},set:function(value){this.uniforms.dirX.value=value}},dirY:{get:function(){return this.dirY},set:function(value){this.uniforms.dirY.value=value}}})},{"../../core":327}],388:[function(require,module,exports){function BlurFilter(){core.AbstractFilter.call(this),this.blurXFilter=new BlurXFilter,this.blurYFilter=new BlurYFilter}var core=require("../../core"),BlurXFilter=require("./BlurXFilter"),BlurYFilter=require("./BlurYFilter");
BlurFilter.prototype=Object.create(core.AbstractFilter.prototype),BlurFilter.prototype.constructor=BlurFilter,module.exports=BlurFilter,BlurFilter.prototype.applyFilter=function(renderer,input,output){var renderTarget=renderer.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(renderer,input,renderTarget),this.blurYFilter.applyFilter(renderer,renderTarget,output),renderer.filterManager.returnRenderTarget(renderTarget)},Object.defineProperties(BlurFilter.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(value){this.padding=.5*Math.abs(value),this.blurXFilter.blur=this.blurYFilter.blur=value}},passes:{get:function(){return this.blurXFilter.passes},set:function(value){this.blurXFilter.passes=this.blurYFilter.passes=value}},blurX:{get:function(){return this.blurXFilter.blur},set:function(value){this.blurXFilter.blur=value}},blurY:{get:function(){return this.blurYFilter.blur},set:function(value){this.blurYFilter.blur=value}}})},{"../../core":327,"./BlurXFilter":389,"./BlurYFilter":390}],389:[function(require,module,exports){function BlurXFilter(){core.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var core=require("../../core");BlurXFilter.prototype=Object.create(core.AbstractFilter.prototype),BlurXFilter.prototype.constructor=BlurXFilter,module.exports=BlurXFilter,BlurXFilter.prototype.applyFilter=function(renderer,input,output,clear){var shader=this.getShader(renderer);if(this.uniforms.strength.value=this.strength/4/this.passes*(input.frame.width/input.size.width),1===this.passes)renderer.filterManager.applyFilter(shader,input,output,clear);else{for(var renderTarget=renderer.filterManager.getRenderTarget(!0),flip=input,flop=renderTarget,i=0;i<this.passes-1;i++){renderer.filterManager.applyFilter(shader,flip,flop,!0);var temp=flop;flop=flip,flip=temp}renderer.filterManager.applyFilter(shader,flip,output,clear),renderer.filterManager.returnRenderTarget(renderTarget)}},Object.defineProperties(BlurXFilter.prototype,{blur:{get:function(){return this.strength},set:function(value){this.padding=.5*Math.abs(value),this.strength=value}}})},{"../../core":327}],390:[function(require,module,exports){function BlurYFilter(){core.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var core=require("../../core");BlurYFilter.prototype=Object.create(core.AbstractFilter.prototype),BlurYFilter.prototype.constructor=BlurYFilter,module.exports=BlurYFilter,BlurYFilter.prototype.applyFilter=function(renderer,input,output,clear){var shader=this.getShader(renderer);if(this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(input.frame.height/input.size.height),1===this.passes)renderer.filterManager.applyFilter(shader,input,output,clear);else{for(var renderTarget=renderer.filterManager.getRenderTarget(!0),flip=input,flop=renderTarget,i=0;i<this.passes-1;i++){renderer.filterManager.applyFilter(shader,flip,flop,!0);var temp=flop;flop=flip,flip=temp}renderer.filterManager.applyFilter(shader,flip,output,clear),renderer.filterManager.returnRenderTarget(renderTarget)}},Object.defineProperties(BlurYFilter.prototype,{blur:{get:function(){return this.strength},set:function(value){this.padding=.5*Math.abs(value),this.strength=value}}})},{"../../core":327}],391:[function(require,module,exports){function SmartBlurFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{delta:{type:"v2",value:{x:.1,y:0}}})}var core=require("../../core");SmartBlurFilter.prototype=Object.create(core.AbstractFilter.prototype),SmartBlurFilter.prototype.constructor=SmartBlurFilter,module.exports=SmartBlurFilter},{"../../core":327}],392:[function(require,module,exports){function ColorMatrixFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n",{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var core=require("../../core");ColorMatrixFilter.prototype=Object.create(core.AbstractFilter.prototype),ColorMatrixFilter.prototype.constructor=ColorMatrixFilter,module.exports=ColorMatrixFilter,ColorMatrixFilter.prototype._loadMatrix=function(matrix,multiply){multiply=!!multiply;var newMatrix=matrix;multiply&&(this._multiply(newMatrix,this.uniforms.m.value,matrix),newMatrix=this._colorMatrix(newMatrix)),this.uniforms.m.value=newMatrix},ColorMatrixFilter.prototype._multiply=function(out,a,b){return out[0]=a[0]*b[0]+a[1]*b[5]+a[2]*b[10]+a[3]*b[15],out[1]=a[0]*b[1]+a[1]*b[6]+a[2]*b[11]+a[3]*b[16],out[2]=a[0]*b[2]+a[1]*b[7]+a[2]*b[12]+a[3]*b[17],out[3]=a[0]*b[3]+a[1]*b[8]+a[2]*b[13]+a[3]*b[18],out[4]=a[0]*b[4]+a[1]*b[9]+a[2]*b[14]+a[3]*b[19],out[5]=a[5]*b[0]+a[6]*b[5]+a[7]*b[10]+a[8]*b[15],out[6]=a[5]*b[1]+a[6]*b[6]+a[7]*b[11]+a[8]*b[16],out[7]=a[5]*b[2]+a[6]*b[7]+a[7]*b[12]+a[8]*b[17],out[8]=a[5]*b[3]+a[6]*b[8]+a[7]*b[13]+a[8]*b[18],out[9]=a[5]*b[4]+a[6]*b[9]+a[7]*b[14]+a[8]*b[19],out[10]=a[10]*b[0]+a[11]*b[5]+a[12]*b[10]+a[13]*b[15],out[11]=a[10]*b[1]+a[11]*b[6]+a[12]*b[11]+a[13]*b[16],out[12]=a[10]*b[2]+a[11]*b[7]+a[12]*b[12]+a[13]*b[17],out[13]=a[10]*b[3]+a[11]*b[8]+a[12]*b[13]+a[13]*b[18],out[14]=a[10]*b[4]+a[11]*b[9]+a[12]*b[14]+a[13]*b[19],out[15]=a[15]*b[0]+a[16]*b[5]+a[17]*b[10]+a[18]*b[15],out[16]=a[15]*b[1]+a[16]*b[6]+a[17]*b[11]+a[18]*b[16],out[17]=a[15]*b[2]+a[16]*b[7]+a[17]*b[12]+a[18]*b[17],out[18]=a[15]*b[3]+a[16]*b[8]+a[17]*b[13]+a[18]*b[18],out[19]=a[15]*b[4]+a[16]*b[9]+a[17]*b[14]+a[18]*b[19],out},ColorMatrixFilter.prototype._colorMatrix=function(matrix){var m=new Float32Array(matrix);return m[4]/=255,m[9]/=255,m[14]/=255,m[19]/=255,m},ColorMatrixFilter.prototype.brightness=function(b,multiply){var matrix=[b,0,0,0,0,0,b,0,0,0,0,0,b,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.greyscale=function(scale,multiply){var matrix=[scale,scale,scale,0,0,scale,scale,scale,0,0,scale,scale,scale,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale,ColorMatrixFilter.prototype.blackAndWhite=function(multiply){var matrix=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.hue=function(rotation,multiply){rotation=(rotation||0)/180*Math.PI;var cos=Math.cos(rotation),sin=Math.sin(rotation),lumR=.213,lumG=.715,lumB=.072,matrix=[lumR+cos*(1-lumR)+sin*-lumR,lumG+cos*-lumG+sin*-lumG,lumB+cos*-lumB+sin*(1-lumB),0,0,lumR+cos*-lumR+.143*sin,lumG+cos*(1-lumG)+.14*sin,lumB+cos*-lumB+sin*-.283,0,0,lumR+cos*-lumR+sin*-(1-lumR),lumG+cos*-lumG+sin*lumG,lumB+cos*(1-lumB)+sin*lumB,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.contrast=function(amount,multiply){var v=(amount||0)+1,o=-128*(v-1),matrix=[v,0,0,0,o,0,v,0,0,o,0,0,v,0,o,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.saturate=function(amount,multiply){var x=2*(amount||0)/3+1,y=(x-1)*-.5,matrix=[x,y,y,0,0,y,x,y,0,0,y,y,x,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.desaturate=function(multiply){this.saturate(-1)},ColorMatrixFilter.prototype.negative=function(multiply){var matrix=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.sepia=function(multiply){var matrix=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.technicolor=function(multiply){var matrix=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.polaroid=function(multiply){var matrix=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.toBGR=function(multiply){var matrix=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.kodachrome=function(multiply){var matrix=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.browni=function(multiply){var matrix=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.vintage=function(multiply){var matrix=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.colorTone=function(desaturation,toned,lightColor,darkColor,multiply){desaturation=desaturation||.2,toned=toned||.15,lightColor=lightColor||16770432,darkColor=darkColor||3375104;var lR=(lightColor>>16&255)/255,lG=(lightColor>>8&255)/255,lB=(255&lightColor)/255,dR=(darkColor>>16&255)/255,dG=(darkColor>>8&255)/255,dB=(255&darkColor)/255,matrix=[.3,.59,.11,0,0,lR,lG,lB,desaturation,0,dR,dG,dB,toned,0,lR-dR,lG-dG,lB-dB,0,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.night=function(intensity,multiply){intensity=intensity||.1;var matrix=[-2*intensity,-intensity,0,0,0,-intensity,0,intensity,0,0,0,intensity,2*intensity,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.predator=function(amount,multiply){var matrix=[11.224130630493164*amount,-4.794486999511719*amount,-2.8746118545532227*amount,0*amount,.40342438220977783*amount,-3.6330697536468506*amount,9.193157196044922*amount,-2.951810836791992*amount,0*amount,-1.316135048866272*amount,-3.2184197902679443*amount,-4.2375030517578125*amount,7.476448059082031*amount,0*amount,.8044459223747253*amount,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.lsd=function(multiply){var matrix=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)},ColorMatrixFilter.prototype.reset=function(){var matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(matrix,!1)},Object.defineProperties(ColorMatrixFilter.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(value){this.uniforms.m.value=value}}})},{"../../core":327}],393:[function(require,module,exports){function ColorStepFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}var core=require("../../core");ColorStepFilter.prototype=Object.create(core.AbstractFilter.prototype),ColorStepFilter.prototype.constructor=ColorStepFilter,module.exports=ColorStepFilter,Object.defineProperties(ColorStepFilter.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(value){this.uniforms.step.value=value}}})},{"../../core":327}],394:[function(require,module,exports){function ConvolutionFilter(matrix,width,height){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(matrix)},texelSize:{type:"v2",value:{x:1/width,y:1/height}}})}var core=require("../../core");ConvolutionFilter.prototype=Object.create(core.AbstractFilter.prototype),ConvolutionFilter.prototype.constructor=ConvolutionFilter,module.exports=ConvolutionFilter,Object.defineProperties(ConvolutionFilter.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(value){this.uniforms.matrix.value=new Float32Array(value)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(value){this.uniforms.texelSize.value.x=1/value}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(value){this.uniforms.texelSize.value.y=1/value}}})},{"../../core":327}],395:[function(require,module,exports){function CrossHatchFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}var core=require("../../core");CrossHatchFilter.prototype=Object.create(core.AbstractFilter.prototype),CrossHatchFilter.prototype.constructor=CrossHatchFilter,module.exports=CrossHatchFilter},{"../../core":327}],396:[function(require,module,exports){function DisplacementFilter(sprite,scale){var maskMatrix=new core.Matrix;sprite.renderable=!1,core.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision mediump float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:sprite.texture},otherMatrix:{type:"mat3",value:maskMatrix.toArray(!0)},scale:{type:"v2",value:{x:1,y:1}}}),this.maskSprite=sprite,this.maskMatrix=maskMatrix,null!==scale&&void 0!==scale||(scale=20),this.scale=new core.Point(scale,scale)}var core=require("../../core");DisplacementFilter.prototype=Object.create(core.AbstractFilter.prototype),DisplacementFilter.prototype.constructor=DisplacementFilter,module.exports=DisplacementFilter,DisplacementFilter.prototype.applyFilter=function(renderer,input,output){var filterManager=renderer.filterManager;filterManager.calculateMappedMatrix(input.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.scale.value.x=this.scale.x*(1/input.frame.width),this.uniforms.scale.value.y=this.scale.y*(1/input.frame.height);var shader=this.getShader(renderer);filterManager.applyFilter(shader,input,output)},Object.defineProperties(DisplacementFilter.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(value){this.uniforms.mapSampler.value=value}}})},{"../../core":327}],397:[function(require,module,exports){function DotScreenFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var core=require("../../core");DotScreenFilter.prototype=Object.create(core.AbstractFilter.prototype),DotScreenFilter.prototype.constructor=DotScreenFilter,module.exports=DotScreenFilter,Object.defineProperties(DotScreenFilter.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(value){this.uniforms.scale.value=value}},angle:{get:function(){return this.uniforms.angle.value},set:function(value){this.uniforms.angle.value=value}}})},{"../../core":327}],398:[function(require,module,exports){function BlurYTintFilter(){core.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var core=require("../../core");BlurYTintFilter.prototype=Object.create(core.AbstractFilter.prototype),BlurYTintFilter.prototype.constructor=BlurYTintFilter,module.exports=BlurYTintFilter,BlurYTintFilter.prototype.applyFilter=function(renderer,input,output,clear){var shader=this.getShader(renderer);if(this.uniforms.strength.value=this.strength/4/this.passes*(input.frame.height/input.size.height),1===this.passes)renderer.filterManager.applyFilter(shader,input,output,clear);else{for(var renderTarget=renderer.filterManager.getRenderTarget(!0),flip=input,flop=renderTarget,i=0;i<this.passes-1;i++){renderer.filterManager.applyFilter(shader,flip,flop,clear);var temp=flop;flop=flip,flip=temp}renderer.filterManager.applyFilter(shader,flip,output,clear),renderer.filterManager.returnRenderTarget(renderTarget)}},Object.defineProperties(BlurYTintFilter.prototype,{blur:{get:function(){return this.strength},set:function(value){this.padding=.5*value,this.strength=value}}})},{"../../core":327}],399:[function(require,module,exports){function DropShadowFilter(){core.AbstractFilter.call(this),this.blurXFilter=new BlurXFilter,this.blurYTintFilter=new BlurYTintFilter,this.defaultFilter=new core.AbstractFilter,this.padding=30,this._dirtyPosition=!0,this._angle=45*Math.PI/180,this._distance=10,this.alpha=.75,this.hideObject=!1,this.blendMode=core.BLEND_MODES.MULTIPLY}var core=require("../../core"),BlurXFilter=require("../blur/BlurXFilter"),BlurYTintFilter=require("./BlurYTintFilter");DropShadowFilter.prototype=Object.create(core.AbstractFilter.prototype),DropShadowFilter.prototype.constructor=DropShadowFilter,module.exports=DropShadowFilter,DropShadowFilter.prototype.applyFilter=function(renderer,input,output){var renderTarget=renderer.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance),this.blurXFilter.applyFilter(renderer,input,renderTarget),renderer.blendModeManager.setBlendMode(this.blendMode),this.blurYTintFilter.applyFilter(renderer,renderTarget,output),renderer.blendModeManager.setBlendMode(core.BLEND_MODES.NORMAL),this.hideObject||this.defaultFilter.applyFilter(renderer,input,output),renderer.filterManager.returnRenderTarget(renderTarget)},Object.defineProperties(DropShadowFilter.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(value){this.blurXFilter.blur=this.blurYTintFilter.blur=value}},blurX:{get:function(){return this.blurXFilter.blur},set:function(value){this.blurXFilter.blur=value}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(value){this.blurYTintFilter.blur=value}},color:{get:function(){return core.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(value){this.blurYTintFilter.uniforms.color.value=core.utils.hex2rgb(value)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(value){this.blurYTintFilter.uniforms.alpha.value=value}},distance:{get:function(){return this._distance},set:function(value){this._dirtyPosition=!0,this._distance=value}},angle:{get:function(){return this._angle},set:function(value){this._dirtyPosition=!0,this._angle=value}}})},{"../../core":327,"../blur/BlurXFilter":389,"./BlurYTintFilter":398}],400:[function(require,module,exports){function GrayFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}var core=require("../../core");GrayFilter.prototype=Object.create(core.AbstractFilter.prototype),GrayFilter.prototype.constructor=GrayFilter,module.exports=GrayFilter,Object.defineProperties(GrayFilter.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(value){this.uniforms.gray.value=value}}})},{"../../core":327}],401:[function(require,module,exports){module.exports={AsciiFilter:require("./ascii/AsciiFilter"),BloomFilter:require("./bloom/BloomFilter"),BlurFilter:require("./blur/BlurFilter"),BlurXFilter:require("./blur/BlurXFilter"),BlurYFilter:require("./blur/BlurYFilter"),BlurDirFilter:require("./blur/BlurDirFilter"),ColorMatrixFilter:require("./color/ColorMatrixFilter"),ColorStepFilter:require("./color/ColorStepFilter"),ConvolutionFilter:require("./convolution/ConvolutionFilter"),CrossHatchFilter:require("./crosshatch/CrossHatchFilter"),DisplacementFilter:require("./displacement/DisplacementFilter"),DotScreenFilter:require("./dot/DotScreenFilter"),GrayFilter:require("./gray/GrayFilter"),DropShadowFilter:require("./dropshadow/DropShadowFilter"),InvertFilter:require("./invert/InvertFilter"),NoiseFilter:require("./noise/NoiseFilter"),PixelateFilter:require("./pixelate/PixelateFilter"),RGBSplitFilter:require("./rgb/RGBSplitFilter"),ShockwaveFilter:require("./shockwave/ShockwaveFilter"),SepiaFilter:require("./sepia/SepiaFilter"),SmartBlurFilter:require("./blur/SmartBlurFilter"),TiltShiftFilter:require("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:require("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:require("./tiltshift/TiltShiftYFilter"),TwistFilter:require("./twist/TwistFilter")}},{"./ascii/AsciiFilter":385,"./bloom/BloomFilter":386,"./blur/BlurDirFilter":387,"./blur/BlurFilter":388,"./blur/BlurXFilter":389,"./blur/BlurYFilter":390,"./blur/SmartBlurFilter":391,"./color/ColorMatrixFilter":392,"./color/ColorStepFilter":393,"./convolution/ConvolutionFilter":394,"./crosshatch/CrossHatchFilter":395,"./displacement/DisplacementFilter":396,"./dot/DotScreenFilter":397,"./dropshadow/DropShadowFilter":399,"./gray/GrayFilter":400,"./invert/InvertFilter":402,"./noise/NoiseFilter":403,"./pixelate/PixelateFilter":404,"./rgb/RGBSplitFilter":405,"./sepia/SepiaFilter":406,"./shockwave/ShockwaveFilter":407,"./tiltshift/TiltShiftFilter":409,"./tiltshift/TiltShiftXFilter":410,"./tiltshift/TiltShiftYFilter":411,"./twist/TwistFilter":412}],402:[function(require,module,exports){function InvertFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{
invert:{type:"1f",value:1}})}var core=require("../../core");InvertFilter.prototype=Object.create(core.AbstractFilter.prototype),InvertFilter.prototype.constructor=InvertFilter,module.exports=InvertFilter,Object.defineProperties(InvertFilter.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(value){this.uniforms.invert.value=value}}})},{"../../core":327}],403:[function(require,module,exports){function NoiseFilter(){core.AbstractFilter.call(this,null,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:.5}})}var core=require("../../core");NoiseFilter.prototype=Object.create(core.AbstractFilter.prototype),NoiseFilter.prototype.constructor=NoiseFilter,module.exports=NoiseFilter,Object.defineProperties(NoiseFilter.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(value){this.uniforms.noise.value=value}}})},{"../../core":327}],404:[function(require,module,exports){function PixelateFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var core=require("../../core");PixelateFilter.prototype=Object.create(core.AbstractFilter.prototype),PixelateFilter.prototype.constructor=PixelateFilter,module.exports=PixelateFilter,Object.defineProperties(PixelateFilter.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(value){this.uniforms.pixelSize.value=value}}})},{"../../core":327}],405:[function(require,module,exports){function RGBSplitFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var core=require("../../core");RGBSplitFilter.prototype=Object.create(core.AbstractFilter.prototype),RGBSplitFilter.prototype.constructor=RGBSplitFilter,module.exports=RGBSplitFilter,Object.defineProperties(RGBSplitFilter.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(value){this.uniforms.red.value=value}},green:{get:function(){return this.uniforms.green.value},set:function(value){this.uniforms.green.value=value}},blue:{get:function(){return this.uniforms.blue.value},set:function(value){this.uniforms.blue.value=value}}})},{"../../core":327}],406:[function(require,module,exports){function SepiaFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}var core=require("../../core");SepiaFilter.prototype=Object.create(core.AbstractFilter.prototype),SepiaFilter.prototype.constructor=SepiaFilter,module.exports=SepiaFilter,Object.defineProperties(SepiaFilter.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(value){this.uniforms.sepia.value=value}}})},{"../../core":327}],407:[function(require,module,exports){function ShockwaveFilter(){core.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var core=require("../../core");ShockwaveFilter.prototype=Object.create(core.AbstractFilter.prototype),ShockwaveFilter.prototype.constructor=ShockwaveFilter,module.exports=ShockwaveFilter,Object.defineProperties(ShockwaveFilter.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(value){this.uniforms.center.value=value}},params:{get:function(){return this.uniforms.params.value},set:function(value){this.uniforms.params.value=value}},time:{get:function(){return this.uniforms.time.value},set:function(value){this.uniforms.time.value=value}}})},{"../../core":327}],408:[function(require,module,exports){function TiltShiftAxisFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var core=require("../../core");TiltShiftAxisFilter.prototype=Object.create(core.AbstractFilter.prototype),TiltShiftAxisFilter.prototype.constructor=TiltShiftAxisFilter,module.exports=TiltShiftAxisFilter,TiltShiftAxisFilter.prototype.updateDelta=function(){this.uniforms.delta.value.x=0,this.uniforms.delta.value.y=0},Object.defineProperties(TiltShiftAxisFilter.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(value){this.uniforms.blur.value=value}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(value){this.uniforms.gradientBlur.value=value}},start:{get:function(){return this.uniforms.start.value},set:function(value){this.uniforms.start.value=value,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(value){this.uniforms.end.value=value,this.updateDelta()}}})},{"../../core":327}],409:[function(require,module,exports){function TiltShiftFilter(){core.AbstractFilter.call(this),this.tiltShiftXFilter=new TiltShiftXFilter,this.tiltShiftYFilter=new TiltShiftYFilter}var core=require("../../core"),TiltShiftXFilter=require("./TiltShiftXFilter"),TiltShiftYFilter=require("./TiltShiftYFilter");TiltShiftFilter.prototype=Object.create(core.AbstractFilter.prototype),TiltShiftFilter.prototype.constructor=TiltShiftFilter,module.exports=TiltShiftFilter,TiltShiftFilter.prototype.applyFilter=function(renderer,input,output){var renderTarget=renderer.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(renderer,input,renderTarget),this.tiltShiftYFilter.applyFilter(renderer,renderTarget,output),renderer.filterManager.returnRenderTarget(renderTarget)},Object.defineProperties(TiltShiftFilter.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(value){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=value}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(value){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=value}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(value){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=value}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(value){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=value}}})},{"../../core":327,"./TiltShiftXFilter":410,"./TiltShiftYFilter":411}],410:[function(require,module,exports){function TiltShiftXFilter(){TiltShiftAxisFilter.call(this)}var TiltShiftAxisFilter=require("./TiltShiftAxisFilter");TiltShiftXFilter.prototype=Object.create(TiltShiftAxisFilter.prototype),TiltShiftXFilter.prototype.constructor=TiltShiftXFilter,module.exports=TiltShiftXFilter,TiltShiftXFilter.prototype.updateDelta=function(){var dx=this.uniforms.end.value.x-this.uniforms.start.value.x,dy=this.uniforms.end.value.y-this.uniforms.start.value.y,d=Math.sqrt(dx*dx+dy*dy);this.uniforms.delta.value.x=dx/d,this.uniforms.delta.value.y=dy/d}},{"./TiltShiftAxisFilter":408}],411:[function(require,module,exports){function TiltShiftYFilter(){TiltShiftAxisFilter.call(this)}var TiltShiftAxisFilter=require("./TiltShiftAxisFilter");TiltShiftYFilter.prototype=Object.create(TiltShiftAxisFilter.prototype),TiltShiftYFilter.prototype.constructor=TiltShiftYFilter,module.exports=TiltShiftYFilter,TiltShiftYFilter.prototype.updateDelta=function(){var dx=this.uniforms.end.value.x-this.uniforms.start.value.x,dy=this.uniforms.end.value.y-this.uniforms.start.value.y,d=Math.sqrt(dx*dx+dy*dy);this.uniforms.delta.value.x=-dy/d,this.uniforms.delta.value.y=dx/d}},{"./TiltShiftAxisFilter":408}],412:[function(require,module,exports){function TwistFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var core=require("../../core");TwistFilter.prototype=Object.create(core.AbstractFilter.prototype),TwistFilter.prototype.constructor=TwistFilter,module.exports=TwistFilter,Object.defineProperties(TwistFilter.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(value){this.uniforms.offset.value=value}},radius:{get:function(){return this.uniforms.radius.value},set:function(value){this.uniforms.radius.value=value}},angle:{get:function(){return this.uniforms.angle.value},set:function(value){this.uniforms.angle.value=value}}})},{"../../core":327}],413:[function(require,module,exports){(function(global){require("./polyfill");var core=module.exports=require("./core");core.extras=require("./extras"),core.filters=require("./filters"),core.interaction=require("./interaction"),core.loaders=require("./loaders"),core.mesh=require("./mesh"),core.accessibility=require("./accessibility"),core.loader=new core.loaders.Loader,Object.assign(core,require("./deprecation")),global.PIXI=core}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":319,"./core":327,"./deprecation":377,"./extras":384,"./filters":401,"./interaction":416,"./loaders":419,"./mesh":426,"./polyfill":431}],414:[function(require,module,exports){function InteractionData(){this.global=new core.Point,this.target=null,this.originalEvent=null}var core=require("../core");InteractionData.prototype.constructor=InteractionData,module.exports=InteractionData,InteractionData.prototype.getLocalPosition=function(displayObject,point,globalPos){return displayObject.worldTransform.applyInverse(globalPos||this.global,point)}},{"../core":327}],415:[function(require,module,exports){function InteractionManager(renderer,options){options=options||{},this.renderer=renderer,this.autoPreventDefault=void 0!==options.autoPreventDefault?options.autoPreventDefault:!0,this.interactionFrequency=options.interactionFrequency||10,this.mouse=new InteractionData,this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this._tempPoint=new core.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var core=require("../core"),InteractionData=require("./InteractionData");Object.assign(core.DisplayObject.prototype,require("./interactiveTarget")),InteractionManager.prototype.constructor=InteractionManager,module.exports=InteractionManager,InteractionManager.prototype.setTargetElement=function(element,resolution){this.removeEvents(),this.interactionDOMElement=element,this.resolution=resolution||1,this.addEvents()},InteractionManager.prototype.addEvents=function(){this.interactionDOMElement&&(core.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(core.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},InteractionManager.prototype.update=function(deltaTime){if(this._deltaTime+=deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},InteractionManager.prototype.dispatchEvent=function(displayObject,eventString,eventData){eventData.stopped||(eventData.target=displayObject,eventData.type=eventString,displayObject.emit(eventString,eventData),displayObject[eventString]&&displayObject[eventString](eventData))},InteractionManager.prototype.mapPositionToPoint=function(point,x,y){var rect=this.interactionDOMElement.getBoundingClientRect();point.x=(x-rect.left)*(this.interactionDOMElement.width/rect.width)/this.resolution,point.y=(y-rect.top)*(this.interactionDOMElement.height/rect.height)/this.resolution},InteractionManager.prototype.processInteractive=function(point,displayObject,func,hitTest,interactive){if(!displayObject||!displayObject.visible)return!1;var hit=!1,interactiveParent=interactive=displayObject.interactive||interactive;if(displayObject.hitArea&&(interactiveParent=!1),displayObject.interactiveChildren)for(var children=displayObject.children,i=children.length-1;i>=0;i--){var child=children[i];if(this.processInteractive(point,child,func,hitTest,interactiveParent)){if(!child.parent)continue;hit=!0,interactiveParent=!1,child.interactive&&(hitTest=!1)}}return interactive&&(hitTest&&!hit&&(displayObject.hitArea?(displayObject.worldTransform.applyInverse(point,this._tempPoint),hit=displayObject.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):displayObject.containsPoint&&(hit=displayObject.containsPoint(point))),displayObject.interactive&&func(displayObject,hit)),hit},InteractionManager.prototype.onMouseDown=function(event){this.mouse.originalEvent=event,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,event.clientX,event.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)},InteractionManager.prototype.processMouseDown=function(displayObject,hit){var e=this.mouse.originalEvent,isRightButton=2===e.button||3===e.which;hit&&(displayObject[isRightButton?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(displayObject,isRightButton?"rightdown":"mousedown",this.eventData))},InteractionManager.prototype.onMouseUp=function(event){this.mouse.originalEvent=event,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,event.clientX,event.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)},InteractionManager.prototype.processMouseUp=function(displayObject,hit){var e=this.mouse.originalEvent,isRightButton=2===e.button||3===e.which,isDown=isRightButton?"_isRightDown":"_isLeftDown";hit?(this.dispatchEvent(displayObject,isRightButton?"rightup":"mouseup",this.eventData),displayObject[isDown]&&(displayObject[isDown]=!1,this.dispatchEvent(displayObject,isRightButton?"rightclick":"click",this.eventData))):displayObject[isDown]&&(displayObject[isDown]=!1,this.dispatchEvent(displayObject,isRightButton?"rightupoutside":"mouseupoutside",this.eventData))},InteractionManager.prototype.onMouseMove=function(event){this.mouse.originalEvent=event,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,event.clientX,event.clientY),this.didMove=!0,this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},InteractionManager.prototype.processMouseMove=function(displayObject,hit){this.processMouseOverOut(displayObject,hit),this.moveWhenInside&&!hit||this.dispatchEvent(displayObject,"mousemove",this.eventData)},InteractionManager.prototype.onMouseOut=function(event){this.mouse.originalEvent=event,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,event.clientX,event.clientY),this.interactionDOMElement.style.cursor="inherit",this.mapPositionToPoint(this.mouse.global,event.clientX,event.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1)},InteractionManager.prototype.processMouseOverOut=function(displayObject,hit){hit?(displayObject._over||(displayObject._over=!0,this.dispatchEvent(displayObject,"mouseover",this.eventData)),displayObject.buttonMode&&(this.cursor=displayObject.defaultCursor)):displayObject._over&&(displayObject._over=!1,this.dispatchEvent(displayObject,"mouseout",this.eventData))},InteractionManager.prototype.onTouchStart=function(event){this.autoPreventDefault&&event.preventDefault();for(var changedTouches=event.changedTouches,cLength=changedTouches.length,i=0;cLength>i;i++){var touchEvent=changedTouches[i],touchData=this.getTouchData(touchEvent);touchData.originalEvent=event,this.eventData.data=touchData,this.eventData.stopped=!1,this.processInteractive(touchData.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.returnTouchData(touchData)}},InteractionManager.prototype.processTouchStart=function(displayObject,hit){hit&&(displayObject._touchDown=!0,this.dispatchEvent(displayObject,"touchstart",this.eventData))},InteractionManager.prototype.onTouchEnd=function(event){this.autoPreventDefault&&event.preventDefault();for(var changedTouches=event.changedTouches,cLength=changedTouches.length,i=0;cLength>i;i++){var touchEvent=changedTouches[i],touchData=this.getTouchData(touchEvent);touchData.originalEvent=event,this.eventData.data=touchData,this.eventData.stopped=!1,this.processInteractive(touchData.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.returnTouchData(touchData)}},InteractionManager.prototype.processTouchEnd=function(displayObject,hit){hit?(this.dispatchEvent(displayObject,"touchend",this.eventData),displayObject._touchDown&&(displayObject._touchDown=!1,this.dispatchEvent(displayObject,"tap",this.eventData))):displayObject._touchDown&&(displayObject._touchDown=!1,this.dispatchEvent(displayObject,"touchendoutside",this.eventData))},InteractionManager.prototype.onTouchMove=function(event){this.autoPreventDefault&&event.preventDefault();for(var changedTouches=event.changedTouches,cLength=changedTouches.length,i=0;cLength>i;i++){var touchEvent=changedTouches[i],touchData=this.getTouchData(touchEvent);touchData.originalEvent=event,this.eventData.data=touchData,this.eventData.stopped=!1,this.processInteractive(touchData.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside),this.returnTouchData(touchData)}},InteractionManager.prototype.processTouchMove=function(displayObject,hit){this.moveWhenInside&&!hit||this.dispatchEvent(displayObject,"touchmove",this.eventData)},InteractionManager.prototype.getTouchData=function(touchEvent){var touchData=this.interactiveDataPool.pop();return touchData||(touchData=new InteractionData),touchData.identifier=touchEvent.identifier,this.mapPositionToPoint(touchData.global,touchEvent.clientX,touchEvent.clientY),navigator.isCocoonJS&&(touchData.global.x=touchData.global.x/this.resolution,touchData.global.y=touchData.global.y/this.resolution),touchEvent.globalX=touchData.global.x,touchEvent.globalY=touchData.global.y,touchData},InteractionManager.prototype.returnTouchData=function(touchData){this.interactiveDataPool.push(touchData)},InteractionManager.prototype.destroy=function(){this.removeEvents(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},core.WebGLRenderer.registerPlugin("interaction",InteractionManager),core.CanvasRenderer.registerPlugin("interaction",InteractionManager)},{"../core":327,"./InteractionData":414,"./interactiveTarget":417}],416:[function(require,module,exports){module.exports={InteractionData:require("./InteractionData"),InteractionManager:require("./InteractionManager"),interactiveTarget:require("./interactiveTarget")}},{"./InteractionData":414,"./InteractionManager":415,"./interactiveTarget":417}],417:[function(require,module,exports){var interactiveTarget={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1};module.exports=interactiveTarget},{}],418:[function(require,module,exports){function parse(resource,texture){var data={},info=resource.data.getElementsByTagName("info")[0],common=resource.data.getElementsByTagName("common")[0];data.font=info.getAttribute("face"),data.size=parseInt(info.getAttribute("size"),10),data.lineHeight=parseInt(common.getAttribute("lineHeight"),10),data.chars={};for(var letters=resource.data.getElementsByTagName("char"),i=0;i<letters.length;i++){var charCode=parseInt(letters[i].getAttribute("id"),10),textureRect=new core.Rectangle(parseInt(letters[i].getAttribute("x"),10)+texture.frame.x,parseInt(letters[i].getAttribute("y"),10)+texture.frame.y,parseInt(letters[i].getAttribute("width"),10),parseInt(letters[i].getAttribute("height"),10));data.chars[charCode]={xOffset:parseInt(letters[i].getAttribute("xoffset"),10),yOffset:parseInt(letters[i].getAttribute("yoffset"),10),xAdvance:parseInt(letters[i].getAttribute("xadvance"),10),kerning:{},texture:new core.Texture(texture.baseTexture,textureRect)}}var kernings=resource.data.getElementsByTagName("kerning");for(i=0;i<kernings.length;i++){var first=parseInt(kernings[i].getAttribute("first"),10),second=parseInt(kernings[i].getAttribute("second"),10),amount=parseInt(kernings[i].getAttribute("amount"),10);data.chars[second]&&(data.chars[second].kerning[first]=amount)}resource.bitmapFont=data,extras.BitmapText.fonts[data.font]=data}var Resource=require("resource-loader").Resource,core=require("../core"),extras=require("../extras"),path=require("path");module.exports=function(){return function(resource,next){if(!resource.data||!resource.isXml)return next();if(0===resource.data.getElementsByTagName("page").length||0===resource.data.getElementsByTagName("info").length||null===resource.data.getElementsByTagName("info")[0].getAttribute("face"))return next();var xmlUrl=path.dirname(resource.url);"."===xmlUrl&&(xmlUrl=""),this.baseUrl&&xmlUrl&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(xmlUrl+="/"),xmlUrl=xmlUrl.replace(this.baseUrl,"")),xmlUrl&&"/"!==xmlUrl.charAt(xmlUrl.length-1)&&(xmlUrl+="/");var textureUrl=xmlUrl+resource.data.getElementsByTagName("page")[0].getAttribute("file");if(core.utils.TextureCache[textureUrl])parse(resource,core.utils.TextureCache[textureUrl]),next();else{var loadOptions={crossOrigin:resource.crossOrigin,loadType:Resource.LOAD_TYPE.IMAGE,metadata:resource.metadata.imageMetadata};this.add(resource.name+"_image",textureUrl,loadOptions,function(res){parse(resource,res.texture),next()})}}}},{"../core":327,"../extras":384,path:314,"resource-loader":444}],419:[function(require,module,exports){module.exports={Loader:require("./loader"),bitmapFontParser:require("./bitmapFontParser"),spritesheetParser:require("./spritesheetParser"),textureParser:require("./textureParser"),Resource:require("resource-loader").Resource}},{"./bitmapFontParser":418,"./loader":420,"./spritesheetParser":421,"./textureParser":422,"resource-loader":444}],420:[function(require,module,exports){function Loader(baseUrl,concurrency){ResourceLoader.call(this,baseUrl,concurrency);for(var i=0;i<Loader._pixiMiddleware.length;++i)this.use(Loader._pixiMiddleware[i]())}var ResourceLoader=require("resource-loader"),textureParser=require("./textureParser"),spritesheetParser=require("./spritesheetParser"),bitmapFontParser=require("./bitmapFontParser");Loader.prototype=Object.create(ResourceLoader.prototype),Loader.prototype.constructor=Loader,module.exports=Loader,Loader._pixiMiddleware=[ResourceLoader.middleware.parsing.blob,textureParser,spritesheetParser,bitmapFontParser],Loader.addPixiMiddleware=function(fn){Loader._pixiMiddleware.push(fn)};var Resource=ResourceLoader.Resource;Resource.setExtensionXhrType("fnt",Resource.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":418,"./spritesheetParser":421,"./textureParser":422,"resource-loader":444}],421:[function(require,module,exports){var Resource=require("resource-loader").Resource,path=require("path"),core=require("../core");module.exports=function(){return function(resource,next){if(!resource.data||!resource.isJson||!resource.data.frames)return next();var loadOptions={crossOrigin:resource.crossOrigin,loadType:Resource.LOAD_TYPE.IMAGE,metadata:resource.metadata.imageMetadata},route=path.dirname(resource.url.replace(this.baseUrl,"")),resolution=core.utils.getResolutionOfUrl(resource.url);this.add(resource.name+"_image",route+"/"+resource.data.meta.image,loadOptions,function(res){resource.textures={};var frames=resource.data.frames;for(var i in frames){var rect=frames[i].frame;if(rect){var size=null,trim=null;if(size=frames[i].rotated?new core.Rectangle(rect.x,rect.y,rect.h,rect.w):new core.Rectangle(rect.x,rect.y,rect.w,rect.h),frames[i].trimmed&&(trim=new core.Rectangle(frames[i].spriteSourceSize.x/resolution,frames[i].spriteSourceSize.y/resolution,frames[i].sourceSize.w/resolution,frames[i].sourceSize.h/resolution)),frames[i].rotated){var temp=size.width;size.width=size.height,size.height=temp}size.x/=resolution,size.y/=resolution,size.width/=resolution,size.height/=resolution,resource.textures[i]=new core.Texture(res.texture.baseTexture,size,size.clone(),trim,frames[i].rotated?2:0),core.utils.TextureCache[i]=resource.textures[i]}}next()})}}},{"../core":327,path:314,"resource-loader":444}],422:[function(require,module,exports){var core=require("../core");module.exports=function(){return function(resource,next){if(resource.data&&resource.isImage){var baseTexture=new core.BaseTexture(resource.data,null,core.utils.getResolutionOfUrl(resource.url));baseTexture.imageUrl=resource.url,resource.texture=new core.Texture(baseTexture),core.utils.BaseTextureCache[resource.url]=baseTexture,core.utils.TextureCache[resource.url]=resource.texture}next()}}},{"../core":327}],423:[function(require,module,exports){function Mesh(texture,vertices,uvs,indices,drawMode){core.Container.call(this),this._texture=null,this.uvs=uvs||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=vertices||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=indices||new Uint16Array([0,1,3,2]),
this.dirty=!0,this.blendMode=core.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=drawMode||Mesh.DRAW_MODES.TRIANGLE_MESH,this.texture=texture,this.shader=null}var core=require("../core"),tempPoint=new core.Point,tempPolygon=new core.Polygon;Mesh.prototype=Object.create(core.Container.prototype),Mesh.prototype.constructor=Mesh,module.exports=Mesh,Object.defineProperties(Mesh.prototype,{texture:{get:function(){return this._texture},set:function(value){this._texture!==value&&(this._texture=value,value&&(value.baseTexture.hasLoaded?this._onTextureUpdate():value.once("update",this._onTextureUpdate,this)))}}}),Mesh.prototype._renderWebGL=function(renderer){renderer.setObjectRenderer(renderer.plugins.mesh),renderer.plugins.mesh.render(this)},Mesh.prototype._renderCanvas=function(renderer){var context=renderer.context,transform=this.worldTransform;renderer.roundPixels?context.setTransform(transform.a,transform.b,transform.c,transform.d,0|transform.tx,0|transform.ty):context.setTransform(transform.a,transform.b,transform.c,transform.d,transform.tx,transform.ty),this.drawMode===Mesh.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(context):this._renderCanvasTriangles(context)},Mesh.prototype._renderCanvasTriangleMesh=function(context){for(var vertices=this.vertices,uvs=this.uvs,length=vertices.length/2,i=0;length-2>i;i++){var index=2*i;this._renderCanvasDrawTriangle(context,vertices,uvs,index,index+2,index+4)}},Mesh.prototype._renderCanvasTriangles=function(context){for(var vertices=this.vertices,uvs=this.uvs,indices=this.indices,length=indices.length,i=0;length>i;i+=3){var index0=2*indices[i],index1=2*indices[i+1],index2=2*indices[i+2];this._renderCanvasDrawTriangle(context,vertices,uvs,index0,index1,index2)}},Mesh.prototype._renderCanvasDrawTriangle=function(context,vertices,uvs,index0,index1,index2){var textureSource=this._texture.baseTexture.source,textureWidth=this._texture.baseTexture.width,textureHeight=this._texture.baseTexture.height,x0=vertices[index0],x1=vertices[index1],x2=vertices[index2],y0=vertices[index0+1],y1=vertices[index1+1],y2=vertices[index2+1],u0=uvs[index0]*textureWidth,u1=uvs[index1]*textureWidth,u2=uvs[index2]*textureWidth,v0=uvs[index0+1]*textureHeight,v1=uvs[index1+1]*textureHeight,v2=uvs[index2+1]*textureHeight;if(this.canvasPadding>0){var paddingX=this.canvasPadding/this.worldTransform.a,paddingY=this.canvasPadding/this.worldTransform.d,centerX=(x0+x1+x2)/3,centerY=(y0+y1+y2)/3,normX=x0-centerX,normY=y0-centerY,dist=Math.sqrt(normX*normX+normY*normY);x0=centerX+normX/dist*(dist+paddingX),y0=centerY+normY/dist*(dist+paddingY),normX=x1-centerX,normY=y1-centerY,dist=Math.sqrt(normX*normX+normY*normY),x1=centerX+normX/dist*(dist+paddingX),y1=centerY+normY/dist*(dist+paddingY),normX=x2-centerX,normY=y2-centerY,dist=Math.sqrt(normX*normX+normY*normY),x2=centerX+normX/dist*(dist+paddingX),y2=centerY+normY/dist*(dist+paddingY)}context.save(),context.beginPath(),context.moveTo(x0,y0),context.lineTo(x1,y1),context.lineTo(x2,y2),context.closePath(),context.clip();var delta=u0*v1+v0*u2+u1*v2-v1*u2-v0*u1-u0*v2,deltaA=x0*v1+v0*x2+x1*v2-v1*x2-v0*x1-x0*v2,deltaB=u0*x1+x0*u2+u1*x2-x1*u2-x0*u1-u0*x2,deltaC=u0*v1*x2+v0*x1*u2+x0*u1*v2-x0*v1*u2-v0*u1*x2-u0*x1*v2,deltaD=y0*v1+v0*y2+y1*v2-v1*y2-v0*y1-y0*v2,deltaE=u0*y1+y0*u2+u1*y2-y1*u2-y0*u1-u0*y2,deltaF=u0*v1*y2+v0*y1*u2+y0*u1*v2-y0*v1*u2-v0*u1*y2-u0*y1*v2;context.transform(deltaA/delta,deltaD/delta,deltaB/delta,deltaE/delta,deltaC/delta,deltaF/delta),context.drawImage(textureSource,0,0),context.restore()},Mesh.prototype.renderMeshFlat=function(Mesh){var context=this.context,vertices=Mesh.vertices,length=vertices.length/2;context.beginPath();for(var i=1;length-2>i;i++){var index=2*i,x0=vertices[index],x1=vertices[index+2],x2=vertices[index+4],y0=vertices[index+1],y1=vertices[index+3],y2=vertices[index+5];context.moveTo(x0,y0),context.lineTo(x1,y1),context.lineTo(x2,y2)}context.fillStyle="#FF0000",context.fill(),context.closePath()},Mesh.prototype._onTextureUpdate=function(){this.updateFrame=!0},Mesh.prototype.getBounds=function(matrix){if(!this._currentBounds){for(var worldTransform=matrix||this.worldTransform,a=worldTransform.a,b=worldTransform.b,c=worldTransform.c,d=worldTransform.d,tx=worldTransform.tx,ty=worldTransform.ty,maxX=-(1/0),maxY=-(1/0),minX=1/0,minY=1/0,vertices=this.vertices,i=0,n=vertices.length;n>i;i+=2){var rawX=vertices[i],rawY=vertices[i+1],x=a*rawX+c*rawY+tx,y=d*rawY+b*rawX+ty;minX=minX>x?x:minX,minY=minY>y?y:minY,maxX=x>maxX?x:maxX,maxY=y>maxY?y:maxY}if(minX===-(1/0)||maxY===1/0)return core.Rectangle.EMPTY;var bounds=this._bounds;bounds.x=minX,bounds.width=maxX-minX,bounds.y=minY,bounds.height=maxY-minY,this._currentBounds=bounds}return this._currentBounds},Mesh.prototype.containsPoint=function(point){if(!this.getBounds().contains(point.x,point.y))return!1;this.worldTransform.applyInverse(point,tempPoint);var i,len,vertices=this.vertices,points=tempPolygon.points;if(this.drawMode===Mesh.DRAW_MODES.TRIANGLES){var indices=this.indices;for(len=this.indices.length,i=0;len>i;i+=3){var ind0=2*indices[i],ind1=2*indices[i+1],ind2=2*indices[i+2];if(points[0]=vertices[ind0],points[1]=vertices[ind0+1],points[2]=vertices[ind1],points[3]=vertices[ind1+1],points[4]=vertices[ind2],points[5]=vertices[ind2+1],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0}}else for(len=vertices.length,i=0;len>i;i+=6)if(points[0]=vertices[i],points[1]=vertices[i+1],points[2]=vertices[i+2],points[3]=vertices[i+3],points[4]=vertices[i+4],points[5]=vertices[i+5],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0;return!1},Mesh.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":327}],424:[function(require,module,exports){function Plane(texture,segmentsX,segmentsY){Mesh.call(this,texture),this._ready=!0,this.segmentsX=segmentsX||10,this.segmentsY=segmentsY||10,this.drawMode=Mesh.DRAW_MODES.TRIANGLES,this.refresh()}var Mesh=require("./Mesh");Plane.prototype=Object.create(Mesh.prototype),Plane.prototype.constructor=Plane,module.exports=Plane,Plane.prototype.refresh=function(){var total=this.segmentsX*this.segmentsY,verts=[],colors=[],uvs=[],indices=[],texture=this.texture,segmentsXSub=this.segmentsX-1,segmentsYSub=this.segmentsY-1,i=0,sizeX=texture.width/segmentsXSub,sizeY=texture.height/segmentsYSub;for(i=0;total>i;i++){var x=i%this.segmentsX,y=i/this.segmentsX|0;verts.push(x*sizeX,y*sizeY),uvs.push(texture._uvs.x0+(texture._uvs.x1-texture._uvs.x0)*(x/(this.segmentsX-1)),texture._uvs.y0+(texture._uvs.y3-texture._uvs.y0)*(y/(this.segmentsY-1)))}var totalSub=segmentsXSub*segmentsYSub;for(i=0;totalSub>i;i++){var xpos=i%segmentsXSub,ypos=i/segmentsXSub|0,value=ypos*this.segmentsX+xpos,value2=ypos*this.segmentsX+xpos+1,value3=(ypos+1)*this.segmentsX+xpos,value4=(ypos+1)*this.segmentsX+xpos+1;indices.push(value,value2,value3),indices.push(value2,value4,value3)}this.vertices=new Float32Array(verts),this.uvs=new Float32Array(uvs),this.colors=new Float32Array(colors),this.indices=new Uint16Array(indices)},Plane.prototype._onTextureUpdate=function(){Mesh.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},{"./Mesh":423}],425:[function(require,module,exports){function Rope(texture,points){Mesh.call(this,texture),this.points=points,this.vertices=new Float32Array(4*points.length),this.uvs=new Float32Array(4*points.length),this.colors=new Float32Array(2*points.length),this.indices=new Uint16Array(2*points.length),this._ready=!0,this.refresh()}var Mesh=require("./Mesh"),core=require("../core");Rope.prototype=Object.create(Mesh.prototype),Rope.prototype.constructor=Rope,module.exports=Rope,Rope.prototype.refresh=function(){var points=this.points;if(!(points.length<1)&&this._texture._uvs){var uvs=this.uvs,indices=this.indices,colors=this.colors,textureUvs=this._texture._uvs,offset=new core.Point(textureUvs.x0,textureUvs.y0),factor=new core.Point(textureUvs.x2-textureUvs.x0,textureUvs.y2-textureUvs.y0);uvs[0]=0+offset.x,uvs[1]=0+offset.y,uvs[2]=0+offset.x,uvs[3]=1*factor.y+offset.y,colors[0]=1,colors[1]=1,indices[0]=0,indices[1]=1;for(var point,index,amount,total=points.length,i=1;total>i;i++)point=points[i],index=4*i,amount=i/(total-1),uvs[index]=amount*factor.x+offset.x,uvs[index+1]=0+offset.y,uvs[index+2]=amount*factor.x+offset.x,uvs[index+3]=1*factor.y+offset.y,index=2*i,colors[index]=1,colors[index+1]=1,index=2*i,indices[index]=index,indices[index+1]=index+1;this.dirty=!0}},Rope.prototype._onTextureUpdate=function(){Mesh.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},Rope.prototype.updateTransform=function(){var points=this.points;if(!(points.length<1)){for(var nextPoint,point,index,ratio,perpLength,num,lastPoint=points[0],perpX=0,perpY=0,vertices=this.vertices,total=points.length,i=0;total>i;i++)point=points[i],index=4*i,nextPoint=i<points.length-1?points[i+1]:point,perpY=-(nextPoint.x-lastPoint.x),perpX=nextPoint.y-lastPoint.y,ratio=10*(1-i/(total-1)),ratio>1&&(ratio=1),perpLength=Math.sqrt(perpX*perpX+perpY*perpY),num=this._texture.height/2,perpX/=perpLength,perpY/=perpLength,perpX*=num,perpY*=num,vertices[index]=point.x+perpX,vertices[index+1]=point.y+perpY,vertices[index+2]=point.x-perpX,vertices[index+3]=point.y-perpY,lastPoint=point;this.containerUpdateTransform()}}},{"../core":327,"./Mesh":423}],426:[function(require,module,exports){module.exports={Mesh:require("./Mesh"),Plane:require("./Plane"),Rope:require("./Rope"),MeshRenderer:require("./webgl/MeshRenderer"),MeshShader:require("./webgl/MeshShader")}},{"./Mesh":423,"./Plane":424,"./Rope":425,"./webgl/MeshRenderer":427,"./webgl/MeshShader":428}],427:[function(require,module,exports){function MeshRenderer(renderer){core.ObjectRenderer.call(this,renderer),this.indices=new Uint16Array(15e3);for(var i=0,j=0;15e3>i;i+=6,j+=4)this.indices[i+0]=j+0,this.indices[i+1]=j+1,this.indices[i+2]=j+2,this.indices[i+3]=j+0,this.indices[i+4]=j+2,this.indices[i+5]=j+3;this.currentShader=null}var core=require("../../core"),Mesh=require("../Mesh");MeshRenderer.prototype=Object.create(core.ObjectRenderer.prototype),MeshRenderer.prototype.constructor=MeshRenderer,module.exports=MeshRenderer,core.WebGLRenderer.registerPlugin("mesh",MeshRenderer),MeshRenderer.prototype.onContextChange=function(){},MeshRenderer.prototype.render=function(mesh){mesh._vertexBuffer||this._initWebGL(mesh);var renderer=this.renderer,gl=renderer.gl,texture=mesh._texture.baseTexture,shader=mesh.shader,drawMode=mesh.drawMode===Mesh.DRAW_MODES.TRIANGLE_MESH?gl.TRIANGLE_STRIP:gl.TRIANGLES;renderer.blendModeManager.setBlendMode(mesh.blendMode),shader=shader?shader.shaders[gl.id]||shader.getShader(renderer):renderer.shaderManager.plugins.meshShader,this.renderer.shaderManager.setShader(shader),shader.uniforms.translationMatrix.value=mesh.worldTransform.toArray(!0),shader.uniforms.projectionMatrix.value=renderer.currentRenderTarget.projectionMatrix.toArray(!0),shader.uniforms.alpha.value=mesh.worldAlpha,shader.syncUniforms(),mesh.dirty?(mesh.dirty=!1,gl.bindBuffer(gl.ARRAY_BUFFER,mesh._vertexBuffer),gl.bufferData(gl.ARRAY_BUFFER,mesh.vertices,gl.STATIC_DRAW),gl.vertexAttribPointer(shader.attributes.aVertexPosition,2,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,mesh._uvBuffer),gl.bufferData(gl.ARRAY_BUFFER,mesh.uvs,gl.STATIC_DRAW),gl.vertexAttribPointer(shader.attributes.aTextureCoord,2,gl.FLOAT,!1,0,0),gl.activeTexture(gl.TEXTURE0),texture._glTextures[gl.id]?gl.bindTexture(gl.TEXTURE_2D,texture._glTextures[gl.id]):this.renderer.updateTexture(texture),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,mesh._indexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,mesh.indices,gl.STATIC_DRAW)):(gl.bindBuffer(gl.ARRAY_BUFFER,mesh._vertexBuffer),gl.bufferSubData(gl.ARRAY_BUFFER,0,mesh.vertices),gl.vertexAttribPointer(shader.attributes.aVertexPosition,2,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,mesh._uvBuffer),gl.vertexAttribPointer(shader.attributes.aTextureCoord,2,gl.FLOAT,!1,0,0),gl.activeTexture(gl.TEXTURE0),texture._glTextures[gl.id]?gl.bindTexture(gl.TEXTURE_2D,texture._glTextures[gl.id]):this.renderer.updateTexture(texture),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,mesh._indexBuffer),gl.bufferSubData(gl.ELEMENT_ARRAY_BUFFER,0,mesh.indices)),gl.drawElements(drawMode,mesh.indices.length,gl.UNSIGNED_SHORT,0)},MeshRenderer.prototype._initWebGL=function(mesh){var gl=this.renderer.gl;mesh._vertexBuffer=gl.createBuffer(),mesh._indexBuffer=gl.createBuffer(),mesh._uvBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,mesh._vertexBuffer),gl.bufferData(gl.ARRAY_BUFFER,mesh.vertices,gl.DYNAMIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,mesh._uvBuffer),gl.bufferData(gl.ARRAY_BUFFER,mesh.uvs,gl.STATIC_DRAW),mesh.colors&&(mesh._colorBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,mesh._colorBuffer),gl.bufferData(gl.ARRAY_BUFFER,mesh.colors,gl.STATIC_DRAW)),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,mesh._indexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,mesh.indices,gl.STATIC_DRAW)},MeshRenderer.prototype.flush=function(){},MeshRenderer.prototype.start=function(){this.currentShader=null},MeshRenderer.prototype.destroy=function(){core.ObjectRenderer.prototype.destroy.call(this)}},{"../../core":327,"../Mesh":423}],428:[function(require,module,exports){function MeshShader(shaderManager){core.Shader.call(this,shaderManager,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var core=require("../../core");MeshShader.prototype=Object.create(core.Shader.prototype),MeshShader.prototype.constructor=MeshShader,module.exports=MeshShader,core.ShaderManager.registerPlugin("meshShader",MeshShader)},{"../../core":327}],429:[function(require,module,exports){Math.sign||(Math.sign=function(x){return x=+x,0===x||isNaN(x)?x:x>0?1:-1})},{}],430:[function(require,module,exports){Object.assign||(Object.assign=require("object-assign"))},{"object-assign":313}],431:[function(require,module,exports){require("./Object.assign"),require("./requestAnimationFrame"),require("./Math.sign")},{"./Math.sign":429,"./Object.assign":430,"./requestAnimationFrame":432}],432:[function(require,module,exports){(function(global){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!global.performance||!global.performance.now){var startTime=Date.now();global.performance||(global.performance={}),global.performance.now=function(){return Date.now()-startTime}}for(var lastTime=Date.now(),vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!global.requestAnimationFrame;++x)global.requestAnimationFrame=global[vendors[x]+"RequestAnimationFrame"],global.cancelAnimationFrame=global[vendors[x]+"CancelAnimationFrame"]||global[vendors[x]+"CancelRequestAnimationFrame"];global.requestAnimationFrame||(global.requestAnimationFrame=function(callback){if("function"!=typeof callback)throw new TypeError(callback+"is not a function");var currentTime=Date.now(),delay=16+lastTime-currentTime;return 0>delay&&(delay=0),lastTime=currentTime,setTimeout(function(){lastTime=Date.now(),callback(performance.now())},delay)}),global.cancelAnimationFrame||(global.cancelAnimationFrame=function(id){clearTimeout(id)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],433:[function(require,module,exports){function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var timeout=setTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,clearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var currentQueue,process=module.exports={},queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],434:[function(require,module,exports){(function(global){!function(root){function error(type){throw new RangeError(errors[type])}function map(array,fn){for(var length=array.length,result=[];length--;)result[length]=fn(array[length]);return result}function mapDomain(string,fn){var parts=string.split("@"),result="";parts.length>1&&(result=parts[0]+"@",string=parts[1]),string=string.replace(regexSeparators,".");var labels=string.split("."),encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;length>counter;)value=string.charCodeAt(counter++),value>=55296&&56319>=value&&length>counter?(extra=string.charCodeAt(counter++),56320==(64512&extra)?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--)):output.push(value);return output}function ucs2encode(array){return map(array,function(value){var output="";return value>65535&&(value-=65536,output+=stringFromCharCode(value>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value)}).join("")}function basicToDigit(codePoint){return 10>codePoint-48?codePoint-22:26>codePoint-65?codePoint-65:26>codePoint-97?codePoint-97:base}function digitToBasic(digit,flag){return digit+22+75*(26>digit)-((0!=flag)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/damp):delta>>1,delta+=floor(delta/numPoints);delta>baseMinusTMin*tMax>>1;k+=base)delta=floor(delta/baseMinusTMin);return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var out,basic,j,index,oldi,w,k,digit,t,baseMinusT,output=[],inputLength=input.length,i=0,n=initialN,bias=initialBias;for(basic=input.lastIndexOf(delimiter),0>basic&&(basic=0),j=0;basic>j;++j)input.charCodeAt(j)>=128&&error("not-basic"),output.push(input.charCodeAt(j));for(index=basic>0?basic+1:0;inputLength>index;){for(oldi=i,w=1,k=base;index>=inputLength&&error("invalid-input"),digit=basicToDigit(input.charCodeAt(index++)),(digit>=base||digit>floor((maxInt-i)/w))&&error("overflow"),i+=digit*w,t=bias>=k?tMin:k>=bias+tMax?tMax:k-bias,!(t>digit);k+=base)baseMinusT=base-t,w>floor(maxInt/baseMinusT)&&error("overflow"),w*=baseMinusT;out=output.length+1,bias=adapt(i-oldi,out,0==oldi),floor(i/out)>maxInt-n&&error("overflow"),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,inputLength,handledCPCountPlusOne,baseMinusT,qMinusT,output=[];for(input=ucs2decode(input),inputLength=input.length,n=initialN,delta=0,bias=initialBias,j=0;inputLength>j;++j)currentValue=input[j],128>currentValue&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push(delimiter);inputLength>handledCPCount;){for(m=maxInt,j=0;inputLength>j;++j)currentValue=input[j],currentValue>=n&&m>currentValue&&(m=currentValue);for(handledCPCountPlusOne=handledCPCount+1,m-n>floor((maxInt-delta)/handledCPCountPlusOne)&&error("overflow"),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;inputLength>j;++j)if(currentValue=input[j],n>currentValue&&++delta>maxInt&&error("overflow"),currentValue==n){for(q=delta,k=base;t=bias>=k?tMin:k>=bias+tMax?tMax:k-bias,!(t>q);k+=base)qMinusT=q-t,baseMinusT=base-t,output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0))),q=floor(qMinusT/baseMinusT);output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule="object"==typeof module&&module&&!module.nodeType&&module,freeGlobal="object"==typeof global&&global;freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self!==freeGlobal||(root=freeGlobal);var punycode,key,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;if(punycode={version:"1.3.2",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return punycode});else if(freeExports&&freeModule)if(module.exports==freeExports)freeModule.exports=punycode;else for(key in punycode)punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key]);else root.punycode=punycode}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],435:[function(require,module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if("string"!=typeof qs||0===qs.length)return obj;var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;options&&"number"==typeof options.maxKeys&&(maxKeys=options.maxKeys);var len=qs.length;maxKeys>0&&len>maxKeys&&(len=maxKeys);for(var i=0;len>i;++i){var kstr,vstr,k,v,x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq);idx>=0?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=""),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty(obj,k)?isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},{}],436:[function(require,module,exports){"use strict";function map(xs,f){if(xs.map)return xs.map(f);for(var res=[],i=0;i<xs.length;i++)res.push(f(xs[i],i));return res}var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",null===obj&&(obj=void 0),"object"==typeof obj?map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return isArray(obj[k])?map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))}).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)},objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&res.push(key);return res}},{}],437:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode")},{"./decode":435,"./encode":436}],438:[function(require,module,exports){(function(global){for(var now=require("performance-now"),root="undefined"==typeof window?global:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix],i=0;!raf&&i<vendors.length;i++)raf=root[vendors[i]+"Request"+suffix],caf=root[vendors[i]+"Cancel"+suffix]||root[vendors[i]+"CancelRequest"+suffix];if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(callback){if(0===queue.length){var _now=now(),next=Math.max(0,frameDuration-(_now-last));last=next+_now,setTimeout(function(){var cp=queue.slice(0);queue.length=0;for(var i=0;i<cp.length;i++)if(!cp[i].cancelled)try{cp[i].callback(last)}catch(e){setTimeout(function(){throw e},0)}},Math.round(next))}return queue.push({handle:++id,callback:callback,cancelled:!1}),id},caf=function(handle){for(var i=0;i<queue.length;i++)queue[i].handle===handle&&(queue[i].cancelled=!0)}}module.exports=function(fn){return raf.call(root,fn)},module.exports.cancel=function(){caf.apply(root,arguments)},module.exports.polyfill=function(){root.requestAnimationFrame=raf,root.cancelAnimationFrame=caf}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":315}],439:[function(require,module,exports){function _array(length,elementFunction,args){var array=[];if(null==length)throw"length is required.";for(var i=0;length>i;++i)array[i]=elementFunction.apply(this,args);return array}function boolean(){return Math.random()<.5}function booleanArray(length){return _array(length,boolean)}function float(limit,min){if(null!=limit)return null!=min?Math.random()*(limit-min)+min:Math.random()*limit;throw"max is required."}function floatArray(length,limit,min){return _array(length,float,[limit,min])}function integer(max,min){if(null!=max){if(null!=min){if(min>max)throw"max ["+max+"] is less than min ["+min;return Math.floor(Math.random()*(max-min+1))+min}return Math.floor(Math.random()*(max+1))}throw"max is required."}function integerArray(length,max,min){return _array(length,integer,[max,min])}function _normalizeRanges(ranges){randomExt.DEBUG&&console.log("Normalizing ranges:",ranges),ranges.sort(function(a,b){return a[0]-b[0]}),randomExt.DEBUG&&console.log("sorted ranges:",ranges);for(var i=0;i<ranges.length-1;++i)for(var j=i+1;j<ranges.length;++j)ranges[i][1]>=ranges[j][1]?(ranges.splice(j,1),j--):ranges[i][1]>=ranges[j][0]&&(ranges[j][0]=ranges[i][1]+1),randomExt.DEBUG&&console.log("iteration ("+i+","+j+"):",ranges);randomExt.DEBUG&&console.log("Normalized ranges:",ranges)}function _integerFromRanges(ranges){if(_normalizeRanges(ranges),null!=ranges){for(var span=0,i=0;i<ranges.length;++i)span+=ranges[i][1]-ranges[i][0]+1;for(var randomNumber=Math.floor(Math.random()*span),i=0;i<ranges.length&&(randomNumber+=ranges[i][0],!(randomNumber<=ranges[i][1]));++i)randomNumber-=ranges[i][1]+1;return randomNumber}throw"ranges is required."}function _integerArrayFromRanges(length,ranges){var numberArray=[];if(null==length||null==ranges)throw"length and ranges is required.";for(var i=0;length>i;++i)numberArray[i]=_integerFromRanges(ranges);return numberArray}function _stringFromRanges(maxLength,minLength,ranges){var dString="",length=integer(maxLength,minLength),unicodeNumbers=_integerArrayFromRanges(length,ranges);return dString=String.fromCharCode.apply(this,unicodeNumbers)}function date(endDate,startDate){if(null==endDate)throw"end date is required.";var endDateTime=endDate.getTime(),startDateTime=null!=startDate?startDate.getTime():0;return new Date(integer(endDateTime,startDateTime))}function dateArray(length,endDate,startDate){return _array(length,date,[endDate,startDate])}function string(maxLength,minLength){return randomExt.DEBUG&&console.log("string maxLength:",maxLength," minLength:",minLength),_stringFromRanges(maxLength,minLength,[[32,126]])}function stringArray(arrayLength,stringMaxLength,stringMinLength){return _array(arrayLength,string,[stringMaxLength,stringMinLength])}function restrictedString(content,maxLength,minLength){for(var ranges=[],i=0;i<content.length;++i){var contentType=content[i];switch(contentType){case randomExt.CHAR_TYPE.SPECIAL:ranges=ranges.concat([[33,47],[58,64],[91,96],[123,126]]);break;case randomExt.CHAR_TYPE.SPACE:ranges=ranges.concat([[32,32]]);break;case randomExt.CHAR_TYPE.NUMERIC:ranges=ranges.concat([[48,57]]);break;case randomExt.CHAR_TYPE.UPPERCASE:ranges=ranges.concat([[65,90]]);break;case randomExt.CHAR_TYPE.LOWERCASE:ranges=ranges.concat([[97,122]]);break;case randomExt.CHAR_TYPE.HEX:ranges=ranges.concat([[48,57],[97,104]]);break;default:if("string"==typeof contentType)for(var j=0;j<contentType.length;++j)ranges=ranges.concat([[contentType.charCodeAt(j),contentType.charCodeAt(j)]])}}return _stringFromRanges(maxLength,minLength,ranges)}function restrictedStringArray(arrayLength,content,stringMaxLength,stringMinLength){return _array(arrayLength,restrictedString,[content,stringMaxLength,stringMinLength])}function _fromDescriptor(randomDescriptor){var randomValue=null;if(null==randomDescriptor||!randomDescriptor.shift||randomDescriptor.length<=0||"function"!=typeof randomDescriptor[0])randomValue=randomDescriptor;else{var randomFunction=randomDescriptor[0];if(randomDescriptor.length>1){var propertyValueArgs=randomDescriptor.slice(1,randomDescriptor.length);randomValue=randomFunction.apply(this,propertyValueArgs)}else randomValue=randomFunction()}return randomValue}function object(template){randomExt.DEBUG&&console.log("object template:",template);for(var newObject={},properties=Object.getOwnPropertyNames(template),i=0;i<properties.length;++i){var property=properties[i],randomDescriptor=template[property];newObject[property]=_fromDescriptor(randomDescriptor)}return newObject}function objectArray(length,template){return _array(length,object,[template])}function stringPattern(pattern,variableDefinition){for(var stringPattern=pattern,replacedStringArray=(Object.getOwnPropertyNames(variableDefinition),new Array),i=0;i<stringPattern.length;++i)variableDefinition.hasOwnProperty(stringPattern[i])?replacedStringArray[i]=_fromDescriptor(variableDefinition[stringPattern[i]]):replacedStringArray[i]=stringPattern[i];return replacedStringArray.join("")}function stringPatternArray(length,pattern,variableDefinition){return _array(length,stringPattern,[pattern,variableDefinition])}function pick(array){if(null==array)throw"input array is null or undefined.";return array[integer(array.length-1)]}function shuffle(array){if(null==array)throw"input array is null or undefined.";for(var i=0;i<array.length;++i){var randomIndex=integer(array.length-1),temp=array[randomIndex];array[randomIndex]=array[i],array[i]=temp}}function color(){return"#".concat((16777215*Math.random()<<0).toString(16))}var randomExt={boolean:boolean,booleanArray:booleanArray,integer:integer,integerArray:integerArray,float:float,floatArray:floatArray,date:date,dateArray:dateArray,string:string,stringArray:stringArray,restrictedString:restrictedString,restrictedStringArray:restrictedStringArray,object:object,objectArray:objectArray,stringPattern:stringPattern,stringPatternArray:stringPatternArray,pick:pick,shuffle:shuffle,color:color,CHAR_TYPE:{LOWERCASE:0,UPPERCASE:1,NUMERIC:2,SPECIAL:3,SPACE:4,HEX:5},DEBUG:!1};module.exports=randomExt},{}],440:[function(require,module,exports){(function(process){!function(){function only_once(fn){
var called=!1;return function(){if(called)throw new Error("Callback was already called.");called=!0,fn.apply(root,arguments)}}var root,previous_async,async={};root=this,null!=root&&(previous_async=root.async),async.noConflict=function(){return root.async=previous_async,async};var _toString=Object.prototype.toString,_isArray=Array.isArray||function(obj){return"[object Array]"===_toString.call(obj)},_each=function(arr,iterator){for(var i=0;i<arr.length;i+=1)iterator(arr[i],i,arr)},_map=function(arr,iterator){if(arr.map)return arr.map(iterator);var results=[];return _each(arr,function(x,i,a){results.push(iterator(x,i,a))}),results},_reduce=function(arr,iterator,memo){return arr.reduce?arr.reduce(iterator,memo):(_each(arr,function(x,i,a){memo=iterator(memo,x,i,a)}),memo)},_keys=function(obj){if(Object.keys)return Object.keys(obj);var keys=[];for(var k in obj)obj.hasOwnProperty(k)&&keys.push(k);return keys};"undefined"!=typeof process&&process.nextTick?(async.nextTick=process.nextTick,"undefined"!=typeof setImmediate?async.setImmediate=function(fn){setImmediate(fn)}:async.setImmediate=async.nextTick):"function"==typeof setImmediate?(async.nextTick=function(fn){setImmediate(fn)},async.setImmediate=async.nextTick):(async.nextTick=function(fn){setTimeout(fn,0)},async.setImmediate=async.nextTick),async.each=function(arr,iterator,callback){function done(err){err?(callback(err),callback=function(){}):(completed+=1,completed>=arr.length&&callback())}if(callback=callback||function(){},!arr.length)return callback();var completed=0;_each(arr,function(x){iterator(x,only_once(done))})},async.forEach=async.each,async.eachSeries=function(arr,iterator,callback){if(callback=callback||function(){},!arr.length)return callback();var completed=0,iterate=function(){iterator(arr[completed],function(err){err?(callback(err),callback=function(){}):(completed+=1,completed>=arr.length?callback():iterate())})};iterate()},async.forEachSeries=async.eachSeries,async.eachLimit=function(arr,limit,iterator,callback){var fn=_eachLimit(limit);fn.apply(null,[arr,iterator,callback])},async.forEachLimit=async.eachLimit;var _eachLimit=function(limit){return function(arr,iterator,callback){if(callback=callback||function(){},!arr.length||0>=limit)return callback();var completed=0,started=0,running=0;!function replenish(){if(completed>=arr.length)return callback();for(;limit>running&&started<arr.length;)started+=1,running+=1,iterator(arr[started-1],function(err){err?(callback(err),callback=function(){}):(completed+=1,running-=1,completed>=arr.length?callback():replenish())})}()}},doParallel=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.each].concat(args))}},doParallelLimit=function(limit,fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[_eachLimit(limit)].concat(args))}},doSeries=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.eachSeries].concat(args))}},_asyncMap=function(eachfn,arr,iterator,callback){if(arr=_map(arr,function(x,i){return{index:i,value:x}}),callback){var results=[];eachfn(arr,function(x,callback){iterator(x.value,function(err,v){results[x.index]=v,callback(err)})},function(err){callback(err,results)})}else eachfn(arr,function(x,callback){iterator(x.value,function(err){callback(err)})})};async.map=doParallel(_asyncMap),async.mapSeries=doSeries(_asyncMap),async.mapLimit=function(arr,limit,iterator,callback){return _mapLimit(limit)(arr,iterator,callback)};var _mapLimit=function(limit){return doParallelLimit(limit,_asyncMap)};async.reduce=function(arr,memo,iterator,callback){async.eachSeries(arr,function(x,callback){iterator(memo,x,function(err,v){memo=v,callback(err)})},function(err){callback(err,memo)})},async.inject=async.reduce,async.foldl=async.reduce,async.reduceRight=function(arr,memo,iterator,callback){var reversed=_map(arr,function(x){return x}).reverse();async.reduce(reversed,memo,iterator,callback)},async.foldr=async.reduceRight;var _filter=function(eachfn,arr,iterator,callback){var results=[];arr=_map(arr,function(x,i){return{index:i,value:x}}),eachfn(arr,function(x,callback){iterator(x.value,function(v){v&&results.push(x),callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})};async.filter=doParallel(_filter),async.filterSeries=doSeries(_filter),async.select=async.filter,async.selectSeries=async.filterSeries;var _reject=function(eachfn,arr,iterator,callback){var results=[];arr=_map(arr,function(x,i){return{index:i,value:x}}),eachfn(arr,function(x,callback){iterator(x.value,function(v){v||results.push(x),callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})};async.reject=doParallel(_reject),async.rejectSeries=doSeries(_reject);var _detect=function(eachfn,arr,iterator,main_callback){eachfn(arr,function(x,callback){iterator(x,function(result){result?(main_callback(x),main_callback=function(){}):callback()})},function(err){main_callback()})};async.detect=doParallel(_detect),async.detectSeries=doSeries(_detect),async.some=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){v&&(main_callback(!0),main_callback=function(){}),callback()})},function(err){main_callback(!1)})},async.any=async.some,async.every=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){v||(main_callback(!1),main_callback=function(){}),callback()})},function(err){main_callback(!0)})},async.all=async.every,async.sortBy=function(arr,iterator,callback){async.map(arr,function(x,callback){iterator(x,function(err,criteria){err?callback(err):callback(null,{value:x,criteria:criteria})})},function(err,results){if(err)return callback(err);var fn=function(left,right){var a=left.criteria,b=right.criteria;return b>a?-1:a>b?1:0};callback(null,_map(results.sort(fn),function(x){return x.value}))})},async.auto=function(tasks,callback){callback=callback||function(){};var keys=_keys(tasks),remainingTasks=keys.length;if(!remainingTasks)return callback();var results={},listeners=[],addListener=function(fn){listeners.unshift(fn)},removeListener=function(fn){for(var i=0;i<listeners.length;i+=1)if(listeners[i]===fn)return void listeners.splice(i,1)},taskComplete=function(){remainingTasks--,_each(listeners.slice(0),function(fn){fn()})};addListener(function(){if(!remainingTasks){var theCallback=callback;callback=function(){},theCallback(null,results)}}),_each(keys,function(k){var task=_isArray(tasks[k])?tasks[k]:[tasks[k]],taskCallback=function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1&&(args=args[0]),err){var safeResults={};_each(_keys(results),function(rkey){safeResults[rkey]=results[rkey]}),safeResults[k]=args,callback(err,safeResults),callback=function(){}}else results[k]=args,async.setImmediate(taskComplete)},requires=task.slice(0,Math.abs(task.length-1))||[],ready=function(){return _reduce(requires,function(a,x){return a&&results.hasOwnProperty(x)},!0)&&!results.hasOwnProperty(k)};if(ready())task[task.length-1](taskCallback,results);else{var listener=function(){ready()&&(removeListener(listener),task[task.length-1](taskCallback,results))};addListener(listener)}})},async.retry=function(times,task,callback){var DEFAULT_TIMES=5,attempts=[];"function"==typeof times&&(callback=task,task=times,times=DEFAULT_TIMES),times=parseInt(times,10)||DEFAULT_TIMES;var wrappedTask=function(wrappedCallback,wrappedResults){for(var retryAttempt=function(task,finalAttempt){return function(seriesCallback){task(function(err,result){seriesCallback(!err||finalAttempt,{err:err,result:result})},wrappedResults)}};times;)attempts.push(retryAttempt(task,!(times-=1)));async.series(attempts,function(done,data){data=data[data.length-1],(wrappedCallback||callback)(data.err,data.result)})};return callback?wrappedTask():wrappedTask},async.waterfall=function(tasks,callback){if(callback=callback||function(){},!_isArray(tasks)){var err=new Error("First argument to waterfall must be an array of functions");return callback(err)}if(!tasks.length)return callback();var wrapIterator=function(iterator){return function(err){if(err)callback.apply(null,arguments),callback=function(){};else{var args=Array.prototype.slice.call(arguments,1),next=iterator.next();next?args.push(wrapIterator(next)):args.push(callback),async.setImmediate(function(){iterator.apply(null,args)})}}};wrapIterator(async.iterator(tasks))()};var _parallel=function(eachfn,tasks,callback){if(callback=callback||function(){},_isArray(tasks))eachfn.map(tasks,function(fn,callback){fn&&fn(function(err){var args=Array.prototype.slice.call(arguments,1);args.length<=1&&(args=args[0]),callback.call(null,err,args)})},callback);else{var results={};eachfn.each(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);args.length<=1&&(args=args[0]),results[k]=args,callback(err)})},function(err){callback(err,results)})}};async.parallel=function(tasks,callback){_parallel({map:async.map,each:async.each},tasks,callback)},async.parallelLimit=function(tasks,limit,callback){_parallel({map:_mapLimit(limit),each:_eachLimit(limit)},tasks,callback)},async.series=function(tasks,callback){if(callback=callback||function(){},_isArray(tasks))async.mapSeries(tasks,function(fn,callback){fn&&fn(function(err){var args=Array.prototype.slice.call(arguments,1);args.length<=1&&(args=args[0]),callback.call(null,err,args)})},callback);else{var results={};async.eachSeries(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);args.length<=1&&(args=args[0]),results[k]=args,callback(err)})},function(err){callback(err,results)})}},async.iterator=function(tasks){var makeCallback=function(index){var fn=function(){return tasks.length&&tasks[index].apply(null,arguments),fn.next()};return fn.next=function(){return index<tasks.length-1?makeCallback(index+1):null},fn};return makeCallback(0)},async.apply=function(fn){var args=Array.prototype.slice.call(arguments,1);return function(){return fn.apply(null,args.concat(Array.prototype.slice.call(arguments)))}};var _concat=function(eachfn,arr,fn,callback){var r=[];eachfn(arr,function(x,cb){fn(x,function(err,y){r=r.concat(y||[]),cb(err)})},function(err){callback(err,r)})};async.concat=doParallel(_concat),async.concatSeries=doSeries(_concat),async.whilst=function(test,iterator,callback){test()?iterator(function(err){return err?callback(err):void async.whilst(test,iterator,callback)}):callback()},async.doWhilst=function(iterator,test,callback){iterator(function(err){if(err)return callback(err);var args=Array.prototype.slice.call(arguments,1);test.apply(null,args)?async.doWhilst(iterator,test,callback):callback()})},async.until=function(test,iterator,callback){test()?callback():iterator(function(err){return err?callback(err):void async.until(test,iterator,callback)})},async.doUntil=function(iterator,test,callback){iterator(function(err){if(err)return callback(err);var args=Array.prototype.slice.call(arguments,1);test.apply(null,args)?callback():async.doUntil(iterator,test,callback)})},async.queue=function(worker,concurrency){function _insert(q,data,pos,callback){return q.started||(q.started=!0),_isArray(data)||(data=[data]),0==data.length?async.setImmediate(function(){q.drain&&q.drain()}):void _each(data,function(task){var item={data:task,callback:"function"==typeof callback?callback:null};pos?q.tasks.unshift(item):q.tasks.push(item),q.saturated&&q.tasks.length===q.concurrency&&q.saturated(),async.setImmediate(q.process)})}void 0===concurrency&&(concurrency=1);var workers=0,q={tasks:[],concurrency:concurrency,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(data,callback){_insert(q,data,!1,callback)},kill:function(){q.drain=null,q.tasks=[]},unshift:function(data,callback){_insert(q,data,!0,callback)},process:function(){if(!q.paused&&workers<q.concurrency&&q.tasks.length){var task=q.tasks.shift();q.empty&&0===q.tasks.length&&q.empty(),workers+=1;var next=function(){workers-=1,task.callback&&task.callback.apply(task,arguments),q.drain&&q.tasks.length+workers===0&&q.drain(),q.process()},cb=only_once(next);worker(task.data,cb)}},length:function(){return q.tasks.length},running:function(){return workers},idle:function(){return q.tasks.length+workers===0},pause:function(){q.paused!==!0&&(q.paused=!0)},resume:function(){if(q.paused!==!1){q.paused=!1;for(var w=1;w<=q.concurrency;w++)async.setImmediate(q.process)}}};return q},async.priorityQueue=function(worker,concurrency){function _compareTasks(a,b){return a.priority-b.priority}function _binarySearch(sequence,item,compare){for(var beg=-1,end=sequence.length-1;end>beg;){var mid=beg+(end-beg+1>>>1);compare(item,sequence[mid])>=0?beg=mid:end=mid-1}return beg}function _insert(q,data,priority,callback){return q.started||(q.started=!0),_isArray(data)||(data=[data]),0==data.length?async.setImmediate(function(){q.drain&&q.drain()}):void _each(data,function(task){var item={data:task,priority:priority,callback:"function"==typeof callback?callback:null};q.tasks.splice(_binarySearch(q.tasks,item,_compareTasks)+1,0,item),q.saturated&&q.tasks.length===q.concurrency&&q.saturated(),async.setImmediate(q.process)})}var q=async.queue(worker,concurrency);return q.push=function(data,priority,callback){_insert(q,data,priority,callback)},delete q.unshift,q},async.cargo=function(worker,payload){var working=!1,tasks=[],cargo={tasks:tasks,payload:payload,saturated:null,empty:null,drain:null,drained:!0,push:function(data,callback){_isArray(data)||(data=[data]),_each(data,function(task){tasks.push({data:task,callback:"function"==typeof callback?callback:null}),cargo.drained=!1,cargo.saturated&&tasks.length===payload&&cargo.saturated()}),async.setImmediate(cargo.process)},process:function process(){if(!working){if(0===tasks.length)return cargo.drain&&!cargo.drained&&cargo.drain(),void(cargo.drained=!0);var ts="number"==typeof payload?tasks.splice(0,payload):tasks.splice(0,tasks.length),ds=_map(ts,function(task){return task.data});cargo.empty&&cargo.empty(),working=!0,worker(ds,function(){working=!1;var args=arguments;_each(ts,function(data){data.callback&&data.callback.apply(null,args)}),process()})}},length:function(){return tasks.length},running:function(){return working}};return cargo};var _console_fn=function(name){return function(fn){var args=Array.prototype.slice.call(arguments,1);fn.apply(null,args.concat([function(err){var args=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(err?console.error&&console.error(err):console[name]&&_each(args,function(x){console[name](x)}))}]))}};async.log=_console_fn("log"),async.dir=_console_fn("dir"),async.memoize=function(fn,hasher){var memo={},queues={};hasher=hasher||function(x){return x};var memoized=function(){var args=Array.prototype.slice.call(arguments),callback=args.pop(),key=hasher.apply(null,args);key in memo?async.nextTick(function(){callback.apply(null,memo[key])}):key in queues?queues[key].push(callback):(queues[key]=[callback],fn.apply(null,args.concat([function(){memo[key]=arguments;var q=queues[key];delete queues[key];for(var i=0,l=q.length;l>i;i++)q[i].apply(null,arguments)}])))};return memoized.memo=memo,memoized.unmemoized=fn,memoized},async.unmemoize=function(fn){return function(){return(fn.unmemoized||fn).apply(null,arguments)}},async.times=function(count,iterator,callback){for(var counter=[],i=0;count>i;i++)counter.push(i);return async.map(counter,iterator,callback)},async.timesSeries=function(count,iterator,callback){for(var counter=[],i=0;count>i;i++)counter.push(i);return async.mapSeries(counter,iterator,callback)},async.seq=function(){var fns=arguments;return function(){var that=this,args=Array.prototype.slice.call(arguments),callback=args.pop();async.reduce(fns,args,function(newargs,fn,cb){fn.apply(that,newargs.concat([function(){var err=arguments[0],nextargs=Array.prototype.slice.call(arguments,1);cb(err,nextargs)}]))},function(err,results){callback.apply(that,[err].concat(results))})}},async.compose=function(){return async.seq.apply(null,Array.prototype.reverse.call(arguments))};var _applyEach=function(eachfn,fns){var go=function(){var that=this,args=Array.prototype.slice.call(arguments),callback=args.pop();return eachfn(fns,function(fn,cb){fn.apply(that,args.concat([cb]))},callback)};if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);return go.apply(this,args)}return go};async.applyEach=doParallel(_applyEach),async.applyEachSeries=doSeries(_applyEach),async.forever=function(fn,callback){function next(err){if(err){if(callback)return callback(err);throw err}fn(next)}next()},"undefined"!=typeof module&&module.exports?module.exports=async:"undefined"!=typeof define&&define.amd?define([],function(){return async}):root.async=async}()}).call(this,require("_process"))},{_process:433}],441:[function(require,module,exports){function Loader(baseUrl,concurrency){EventEmitter.call(this),concurrency=concurrency||10,this.baseUrl=baseUrl||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._boundOnLoad=this._onLoad.bind(this),this._buffer=[],this._numToLoad=0,this._queue=async.queue(this._boundLoadResource,concurrency),this.resources={}}var async=require("async"),urlParser=require("url"),Resource=require("./Resource"),EventEmitter=require("eventemitter3");Loader.prototype=Object.create(EventEmitter.prototype),Loader.prototype.constructor=Loader,module.exports=Loader,Loader.prototype.add=Loader.prototype.enqueue=function(name,url,options,cb){if(Array.isArray(name)){for(var i=0;i<name.length;++i)this.add(name[i]);return this}if("object"==typeof name&&(cb=url||name.callback||name.onComplete,options=name,url=name.url,name=name.name||name.key||name.url),"string"!=typeof url&&(cb=options,options=url,url=name),"string"!=typeof url)throw new Error("No url passed to add resource to loader.");if("function"==typeof options&&(cb=options,options=null),this.resources[name])throw new Error('Resource with name "'+name+'" already exists.');return url=this._handleBaseUrl(url),this.resources[name]=new Resource(name,url,options),"function"==typeof cb&&this.resources[name].once("afterMiddleware",cb),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[name]),this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[name]),this._progressChunk=100/this._buffer.length),this},Loader.prototype._handleBaseUrl=function(url){var parsedUrl=urlParser.parse(url);return parsedUrl.protocol||0===parsedUrl.pathname.indexOf("//")?url:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==url.charAt(0)?this.baseUrl+"/"+url:this.baseUrl+url},Loader.prototype.before=Loader.prototype.pre=function(fn){return this._beforeMiddleware.push(fn),this},Loader.prototype.after=Loader.prototype.use=function(fn){return this._afterMiddleware.push(fn),this},Loader.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1,this.resources={}},Loader.prototype.load=function(cb){if("function"==typeof cb&&this.once("complete",cb),this._queue.started)return this;this.emit("start",this);for(var i=0;i<this._buffer.length;++i)this._queue.push(this._buffer[i]);return this._buffer.length=0,this},Loader.prototype._loadResource=function(resource,dequeue){var self=this;resource._dequeue=dequeue,this._runMiddleware(resource,this._beforeMiddleware,function(){resource.load(self._boundOnLoad)})},Loader.prototype._onComplete=function(){this.emit("complete",this,this.resources)},Loader.prototype._onLoad=function(resource){this.progress+=this._progressChunk,this.emit("progress",this,resource),this._runMiddleware(resource,this._afterMiddleware,function(){resource.emit("afterMiddleware",resource),this._numToLoad--,0===this._numToLoad&&(this.progress=100,this._onComplete()),resource.error?this.emit("error",resource.error,this,resource):this.emit("load",this,resource)}),resource._dequeue()},Loader.prototype._runMiddleware=function(resource,fns,cb){var self=this;async.eachSeries(fns,function(fn,next){fn.call(self,resource,next)},cb.bind(this,resource))},Loader.LOAD_TYPE=Resource.LOAD_TYPE,Loader.XHR_READY_STATE=Resource.XHR_READY_STATE,Loader.XHR_RESPONSE_TYPE=Resource.XHR_RESPONSE_TYPE},{"./Resource":442,async:440,eventemitter3:305,url:449}],442:[function(require,module,exports){function Resource(name,url,options){if(EventEmitter.call(this),options=options||{},"string"!=typeof name||"string"!=typeof url)throw new Error("Both name and url are required for constructing a resource.");this.name=name,this.url=url,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=options.crossOrigin===!0?"anonymous":options.crossOrigin,this.loadType=options.loadType||this._determineLoadType(),this.xhrType=options.xhrType,this.metadata=options.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function reqType(xhr){return xhr.toString().replace("object ","")}function setExtMap(map,extname,val){extname&&0===extname.indexOf(".")&&(extname=extname.substring(1)),extname&&(map[extname]=val)}var EventEmitter=require("eventemitter3"),_url=require("url"),useXdr=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),tempAnchor=null;Resource.prototype=Object.create(EventEmitter.prototype),Resource.prototype.constructor=Resource,module.exports=Resource,Resource.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError),this.xhr.removeEventListener("abort",this._boundXhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._boundXhrOnLoad)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.emit("complete",this)},Resource.prototype.load=function(cb){switch(this.emit("start",this),cb&&this.once("complete",cb),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case Resource.LOAD_TYPE.IMAGE:this._loadImage();break;case Resource.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case Resource.LOAD_TYPE.VIDEO:this._loadElement("video");break;case Resource.LOAD_TYPE.XHR:default:useXdr&&this.crossOrigin?this._loadXdr():this._loadXhr()}},Resource.prototype._loadImage=function(){this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.data.src=this.url,this.isImage=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},Resource.prototype._loadElement=function(type){if("audio"===type&&"undefined"!=typeof Audio?this.data=new Audio:this.data=document.createElement(type),null===this.data)return this.error=new Error("Unsupported element "+type),void this.complete();if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(type,this.url[i]));else this.data.appendChild(this._createSource(type,this.url));this["is"+type[0].toUpperCase()+type.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},Resource.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var xhr=this.xhr=new XMLHttpRequest;xhr.open("GET",this.url,!0),this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON||this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT?xhr.responseType=Resource.XHR_RESPONSE_TYPE.TEXT:xhr.responseType=this.xhrType,xhr.addEventListener("error",this._boundXhrOnError,!1),xhr.addEventListener("abort",this._boundXhrOnAbort,!1),xhr.addEventListener("progress",this._boundOnProgress,!1),xhr.addEventListener("load",this._boundXhrOnLoad,!1),xhr.send()},Resource.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var xdr=this.xhr=new XDomainRequest;xdr.timeout=5e3,xdr.onerror=this._boundXhrOnError,xdr.ontimeout=this._boundXdrOnTimeout,xdr.onprogress=this._boundOnProgress,xdr.onload=this._boundXhrOnLoad,xdr.open("GET",this.url,!0),setTimeout(function(){xdr.send()},0)},Resource.prototype._createSource=function(type,url,mime){mime||(mime=type+"/"+url.substr(url.lastIndexOf(".")+1));var source=document.createElement("source");return source.src=url,source.type=mime,source},Resource.prototype._onError=function(event){this.error=new Error("Failed to load element using "+event.target.nodeName),this.complete()},Resource.prototype._onProgress=function(event){event&&event.lengthComputable&&this.emit("progress",this,event.loaded/event.total)},Resource.prototype._xhrOnError=function(){this.error=new Error(reqType(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"'),this.complete()},Resource.prototype._xhrOnAbort=function(){this.error=new Error(reqType(this.xhr)+" Request was aborted by the user."),this.complete()},Resource.prototype._xdrOnTimeout=function(){this.error=new Error(reqType(this.xhr)+" Request timed out."),this.complete()},Resource.prototype._xhrOnLoad=function(){var xhr=this.xhr,status=void 0!==xhr.status?xhr.status:200;if(200===status||204===status||0===status&&xhr.responseText.length>0)if(this.xhrType===Resource.XHR_RESPONSE_TYPE.TEXT)this.data=xhr.responseText;else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(xhr.responseText),this.isJson=!0}catch(e){this.error=new Error("Error trying to parse loaded json:",e)}else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var domparser=new DOMParser;this.data=domparser.parseFromString(xhr.responseText,"text/xml")}else{var div=document.createElement("div");div.innerHTML=xhr.responseText,this.data=div}this.isXml=!0}catch(e){this.error=new Error("Error trying to parse loaded xml:",e)}else this.data=xhr.response||xhr.responseText;else this.error=new Error("["+xhr.status+"]"+xhr.statusText+":"+xhr.responseURL);this.complete()},Resource.prototype._determineCrossOrigin=function(url,loc){if(0===url.indexOf("data:"))return"";loc=loc||window.location,tempAnchor||(tempAnchor=document.createElement("a")),tempAnchor.href=url,url=_url.parse(tempAnchor.href);var samePort=!url.port&&""===loc.port||url.port===loc.port;return url.hostname===loc.hostname&&samePort&&url.protocol===loc.protocol?"":"anonymous"},Resource.prototype._determineXhrType=function(){return Resource._xhrTypeMap[this._getExtension()]||Resource.XHR_RESPONSE_TYPE.TEXT},Resource.prototype._determineLoadType=function(){return Resource._loadTypeMap[this._getExtension()]||Resource.LOAD_TYPE.XHR},Resource.prototype._getExtension=function(){var ext,url=this.url;if(this.isDataUrl){var slashIndex=url.indexOf("/");ext=url.substring(slashIndex+1,url.indexOf(";",slashIndex))}else{var queryStart=url.indexOf("?");-1!==queryStart&&(url=url.substring(0,queryStart)),ext=url.substring(url.lastIndexOf(".")+1)}return ext},Resource.prototype._getMimeFromXhrType=function(type){switch(type){case Resource.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case Resource.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case Resource.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case Resource.XHR_RESPONSE_TYPE.JSON:return"application/json";case Resource.XHR_RESPONSE_TYPE.DEFAULT:case Resource.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},Resource.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},Resource.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},Resource.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},Resource._loadTypeMap={gif:Resource.LOAD_TYPE.IMAGE,png:Resource.LOAD_TYPE.IMAGE,bmp:Resource.LOAD_TYPE.IMAGE,jpg:Resource.LOAD_TYPE.IMAGE,jpeg:Resource.LOAD_TYPE.IMAGE,tif:Resource.LOAD_TYPE.IMAGE,tiff:Resource.LOAD_TYPE.IMAGE,webp:Resource.LOAD_TYPE.IMAGE,tga:Resource.LOAD_TYPE.IMAGE},Resource._xhrTypeMap={xhtml:Resource.XHR_RESPONSE_TYPE.DOCUMENT,html:Resource.XHR_RESPONSE_TYPE.DOCUMENT,htm:Resource.XHR_RESPONSE_TYPE.DOCUMENT,xml:Resource.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Resource.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Resource.XHR_RESPONSE_TYPE.DOCUMENT,svg:Resource.XHR_RESPONSE_TYPE.DOCUMENT,gif:Resource.XHR_RESPONSE_TYPE.BLOB,png:Resource.XHR_RESPONSE_TYPE.BLOB,bmp:Resource.XHR_RESPONSE_TYPE.BLOB,jpg:Resource.XHR_RESPONSE_TYPE.BLOB,jpeg:Resource.XHR_RESPONSE_TYPE.BLOB,tif:Resource.XHR_RESPONSE_TYPE.BLOB,tiff:Resource.XHR_RESPONSE_TYPE.BLOB,webp:Resource.XHR_RESPONSE_TYPE.BLOB,tga:Resource.XHR_RESPONSE_TYPE.BLOB,json:Resource.XHR_RESPONSE_TYPE.JSON,text:Resource.XHR_RESPONSE_TYPE.TEXT,txt:Resource.XHR_RESPONSE_TYPE.TEXT},Resource.setExtensionLoadType=function(extname,loadType){setExtMap(Resource._loadTypeMap,extname,loadType)},Resource.setExtensionXhrType=function(extname,xhrType){setExtMap(Resource._xhrTypeMap,extname,xhrType)}},{eventemitter3:305,url:449}],443:[function(require,module,exports){module.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(input){for(var bytebuffer,output="",encodedCharIndexes=new Array(4),inx=0,jnx=0,paddingBytes=0;inx<input.length;){for(bytebuffer=new Array(3),jnx=0;jnx<bytebuffer.length;jnx++)inx<input.length?bytebuffer[jnx]=255&input.charCodeAt(inx++):bytebuffer[jnx]=0;switch(encodedCharIndexes[0]=bytebuffer[0]>>2,encodedCharIndexes[1]=(3&bytebuffer[0])<<4|bytebuffer[1]>>4,encodedCharIndexes[2]=(15&bytebuffer[1])<<2|bytebuffer[2]>>6,encodedCharIndexes[3]=63&bytebuffer[2],paddingBytes=inx-(input.length-1)){case 2:encodedCharIndexes[3]=64,encodedCharIndexes[2]=64;break;case 1:encodedCharIndexes[3]=64}for(jnx=0;jnx<encodedCharIndexes.length;jnx++)output+=this._keyStr.charAt(encodedCharIndexes[jnx])}return output}}},{}],444:[function(require,module,exports){module.exports=require("./Loader"),module.exports.Resource=require("./Resource"),module.exports.middleware={caching:{memory:require("./middlewares/caching/memory")},parsing:{blob:require("./middlewares/parsing/blob")}}},{"./Loader":441,"./Resource":442,"./middlewares/caching/memory":445,"./middlewares/parsing/blob":446}],445:[function(require,module,exports){var cache={};module.exports=function(){return function(resource,next){cache[resource.url]?(resource.data=cache[resource.url],resource.complete()):resource.once("complete",function(){cache[this.url]=this.data}),next()}}},{}],446:[function(require,module,exports){var Resource=require("../../Resource"),b64=require("../../b64");window.URL=window.URL||window.webkitURL,module.exports=function(){return function(resource,next){if(!resource.data)return next();if(resource.xhr&&resource.xhrType===Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof resource.data){
if(0===resource.data.type.indexOf("image")){var src=URL.createObjectURL(resource.data);resource.blob=resource.data,resource.data=new Image,resource.data.src=src,resource.isImage=!0,resource.data.onload=function(){URL.revokeObjectURL(src),resource.data.onload=null,next()}}}else{var type=resource.xhr.getResponseHeader("content-type");type&&0===type.indexOf("image")&&(resource.data=new Image,resource.data.src="data:"+type+";base64,"+b64.encodeBinary(resource.xhr.responseText),resource.isImage=!0,resource.data.onload=function(){resource.data.onload=null,next()})}else next()}}},{"../../Resource":442,"../../b64":443}],447:[function(require,module,exports){var Stats=function(){var l=Date.now(),m=l,g=0,n=1/0,o=0,h=0,p=1/0,q=0,r=0,s=0,f=document.createElement("div");f.id="stats",f.addEventListener("mousedown",function(b){b.preventDefault(),t(++s%2)},!1),f.style.cssText="width:80px;opacity:0.9;cursor:pointer";var a=document.createElement("div");a.id="fps",a.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",f.appendChild(a);var i=document.createElement("div");i.id="fpsText",i.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",i.innerHTML="FPS",a.appendChild(i);var c=document.createElement("div");for(c.id="fpsGraph",c.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",a.appendChild(c);74>c.children.length;){var j=document.createElement("span");j.style.cssText="width:1px;height:30px;float:left;background-color:#113",c.appendChild(j)}var d=document.createElement("div");d.id="ms",d.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",f.appendChild(d);var k=document.createElement("div");k.id="msText",k.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",k.innerHTML="MS",d.appendChild(k);var e=document.createElement("div");for(e.id="msGraph",e.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",d.appendChild(e);74>e.children.length;)j=document.createElement("span"),j.style.cssText="width:1px;height:30px;float:left;background-color:#131",e.appendChild(j);var t=function(b){switch(s=b){case 0:a.style.display="block",d.style.display="none";break;case 1:a.style.display="none",d.style.display="block"}};return{REVISION:12,domElement:f,setMode:t,begin:function(){l=Date.now()},end:function(){var b=Date.now();g=b-l,n=Math.min(n,g),o=Math.max(o,g),k.textContent=g+" MS ("+n+"-"+o+")";var a=Math.min(30,30-30*(g/200));return e.appendChild(e.firstChild).style.height=a+"px",r++,b>m+1e3&&(h=Math.round(1e3*r/(b-m)),p=Math.min(p,h),q=Math.max(q,h),i.textContent=h+" FPS ("+p+"-"+q+")",a=Math.min(30,30-30*(h/100)),c.appendChild(c.firstChild).style.height=a+"px",m=b,r=0),b},update:function(){l=this.end()}}};"object"==typeof module&&(module.exports=Stats)},{}],448:[function(require,module,exports){void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var TWEEN=TWEEN||function(){var _tweens=[];return{REVISION:"14",getAll:function(){return _tweens},removeAll:function(){_tweens=[]},add:function(tween){_tweens.push(tween)},remove:function(tween){var i=_tweens.indexOf(tween);-1!==i&&_tweens.splice(i,1)},update:function(time){if(0===_tweens.length)return!1;var i=0;for(time=void 0!==time?time:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();i<_tweens.length;)_tweens[i].update(time)?i++:_tweens.splice(i,1);return!0}}}();TWEEN.Tween=function(object){var _object=object,_valuesStart={},_valuesEnd={},_valuesStartRepeat={},_duration=1e3,_repeat=0,_yoyo=!1,_isPlaying=!1,_reversed=!1,_delayTime=0,_startTime=null,_easingFunction=TWEEN.Easing.Linear.None,_interpolationFunction=TWEEN.Interpolation.Linear,_chainedTweens=[],_onStartCallback=null,_onStartCallbackFired=!1,_onUpdateCallback=null,_onCompleteCallback=null,_onStopCallback=null;for(var field in object)_valuesStart[field]=parseFloat(object[field],10);this.to=function(properties,duration){return void 0!==duration&&(_duration=duration),_valuesEnd=properties,this},this.start=function(time){TWEEN.add(this),_isPlaying=!0,_onStartCallbackFired=!1,_startTime=void 0!==time?time:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),_startTime+=_delayTime;for(var property in _valuesEnd){if(_valuesEnd[property]instanceof Array){if(0===_valuesEnd[property].length)continue;_valuesEnd[property]=[_object[property]].concat(_valuesEnd[property])}_valuesStart[property]=_object[property],_valuesStart[property]instanceof Array==!1&&(_valuesStart[property]*=1),_valuesStartRepeat[property]=_valuesStart[property]||0}return this},this.stop=function(){return _isPlaying?(TWEEN.remove(this),_isPlaying=!1,null!==_onStopCallback&&_onStopCallback.call(_object),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var i=0,numChainedTweens=_chainedTweens.length;numChainedTweens>i;i++)_chainedTweens[i].stop()},this.delay=function(amount){return _delayTime=amount,this},this.repeat=function(times){return _repeat=times,this},this.yoyo=function(yoyo){return _yoyo=yoyo,this},this.easing=function(easing){return _easingFunction=easing,this},this.interpolation=function(interpolation){return _interpolationFunction=interpolation,this},this.chain=function(){return _chainedTweens=arguments,this},this.onStart=function(callback){return _onStartCallback=callback,this},this.onUpdate=function(callback){return _onUpdateCallback=callback,this},this.onComplete=function(callback){return _onCompleteCallback=callback,this},this.onStop=function(callback){return _onStopCallback=callback,this},this.update=function(time){var property;if(_startTime>time)return!0;_onStartCallbackFired===!1&&(null!==_onStartCallback&&_onStartCallback.call(_object),_onStartCallbackFired=!0);var elapsed=(time-_startTime)/_duration;elapsed=elapsed>1?1:elapsed;var value=_easingFunction(elapsed);for(property in _valuesEnd){var start=_valuesStart[property]||0,end=_valuesEnd[property];end instanceof Array?_object[property]=_interpolationFunction(end,value):("string"==typeof end&&(end=start+parseFloat(end,10)),"number"==typeof end&&(_object[property]=start+(end-start)*value))}if(null!==_onUpdateCallback&&_onUpdateCallback.call(_object,value),1==elapsed){if(_repeat>0){isFinite(_repeat)&&_repeat--;for(property in _valuesStartRepeat){if("string"==typeof _valuesEnd[property]&&(_valuesStartRepeat[property]=_valuesStartRepeat[property]+parseFloat(_valuesEnd[property],10)),_yoyo){var tmp=_valuesStartRepeat[property];_valuesStartRepeat[property]=_valuesEnd[property],_valuesEnd[property]=tmp}_valuesStart[property]=_valuesStartRepeat[property]}return _yoyo&&(_reversed=!_reversed),_startTime=time+_delayTime,!0}null!==_onCompleteCallback&&_onCompleteCallback.call(_object);for(var i=0,numChainedTweens=_chainedTweens.length;numChainedTweens>i;i++)_chainedTweens[i].start(time);return!1}return!0}},TWEEN.Easing={Linear:{None:function(k){return k}},Quadratic:{In:function(k){return k*k},Out:function(k){return k*(2-k)},InOut:function(k){return(k*=2)<1?.5*k*k:-.5*(--k*(k-2)-1)}},Cubic:{In:function(k){return k*k*k},Out:function(k){return--k*k*k+1},InOut:function(k){return(k*=2)<1?.5*k*k*k:.5*((k-=2)*k*k+2)}},Quartic:{In:function(k){return k*k*k*k},Out:function(k){return 1- --k*k*k*k},InOut:function(k){return(k*=2)<1?.5*k*k*k*k:-.5*((k-=2)*k*k*k-2)}},Quintic:{In:function(k){return k*k*k*k*k},Out:function(k){return--k*k*k*k*k+1},InOut:function(k){return(k*=2)<1?.5*k*k*k*k*k:.5*((k-=2)*k*k*k*k+2)}},Sinusoidal:{In:function(k){return 1-Math.cos(k*Math.PI/2)},Out:function(k){return Math.sin(k*Math.PI/2)},InOut:function(k){return.5*(1-Math.cos(Math.PI*k))}},Exponential:{In:function(k){return 0===k?0:Math.pow(1024,k-1)},Out:function(k){return 1===k?1:1-Math.pow(2,-10*k)},InOut:function(k){return 0===k?0:1===k?1:(k*=2)<1?.5*Math.pow(1024,k-1):.5*(-Math.pow(2,-10*(k-1))+2)}},Circular:{In:function(k){return 1-Math.sqrt(1-k*k)},Out:function(k){return Math.sqrt(1- --k*k)},InOut:function(k){return(k*=2)<1?-.5*(Math.sqrt(1-k*k)-1):.5*(Math.sqrt(1-(k-=2)*k)+1)}},Elastic:{In:function(k){var s,a=.1,p=.4;return 0===k?0:1===k?1:(!a||1>a?(a=1,s=p/4):s=p*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)))},Out:function(k){var s,a=.1,p=.4;return 0===k?0:1===k?1:(!a||1>a?(a=1,s=p/4):s=p*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/p)+1)},InOut:function(k){var s,a=.1,p=.4;return 0===k?0:1===k?1:(!a||1>a?(a=1,s=p/4):s=p*Math.asin(1/a)/(2*Math.PI),(k*=2)<1?-.5*(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)):a*Math.pow(2,-10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)*.5+1)}},Back:{In:function(k){var s=1.70158;return k*k*((s+1)*k-s)},Out:function(k){var s=1.70158;return--k*k*((s+1)*k+s)+1},InOut:function(k){var s=2.5949095;return(k*=2)<1?.5*(k*k*((s+1)*k-s)):.5*((k-=2)*k*((s+1)*k+s)+2)}},Bounce:{In:function(k){return 1-TWEEN.Easing.Bounce.Out(1-k)},Out:function(k){return 1/2.75>k?7.5625*k*k:2/2.75>k?7.5625*(k-=1.5/2.75)*k+.75:2.5/2.75>k?7.5625*(k-=2.25/2.75)*k+.9375:7.5625*(k-=2.625/2.75)*k+.984375},InOut:function(k){return.5>k?.5*TWEEN.Easing.Bounce.In(2*k):.5*TWEEN.Easing.Bounce.Out(2*k-1)+.5}}},TWEEN.Interpolation={Linear:function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f),fn=TWEEN.Interpolation.Utils.Linear;return 0>k?fn(v[0],v[1],f):k>1?fn(v[m],v[m-1],m-f):fn(v[i],v[i+1>m?m:i+1],f-i)},Bezier:function(v,k){var i,b=0,n=v.length-1,pw=Math.pow,bn=TWEEN.Interpolation.Utils.Bernstein;for(i=0;n>=i;i++)b+=pw(1-k,n-i)*pw(k,i)*v[i]*bn(n,i);return b},CatmullRom:function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f),fn=TWEEN.Interpolation.Utils.CatmullRom;return v[0]===v[m]?(0>k&&(i=Math.floor(f=m*(1+k))),fn(v[(i-1+m)%m],v[i],v[(i+1)%m],v[(i+2)%m],f-i)):0>k?v[0]-(fn(v[0],v[0],v[1],v[1],-f)-v[0]):k>1?v[m]-(fn(v[m],v[m],v[m-1],v[m-1],f-m)-v[m]):fn(v[i?i-1:0],v[i],v[i+1>m?m:i+1],v[i+2>m?m:i+2],f-i)},Utils:{Linear:function(p0,p1,t){return(p1-p0)*t+p0},Bernstein:function(n,i){var fc=TWEEN.Interpolation.Utils.Factorial;return fc(n)/fc(i)/fc(n-i)},Factorial:function(){var a=[1];return function(n){var i,s=1;if(a[n])return a[n];for(i=n;i>1;i--)s*=i;return a[n]=s}}(),CatmullRom:function(p0,p1,p2,p3,t){var v0=.5*(p2-p0),v1=.5*(p3-p1),t2=t*t,t3=t*t2;return(2*p1-2*p2+v0+v1)*t3+(-3*p1+3*p2-2*v0-v1)*t2+v0*t+p1}}},module.exports=TWEEN},{}],449:[function(require,module,exports){"use strict";function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;return u.parse(url,parseQueryString,slashesDenoteHost),u}function urlFormat(obj){return util.isString(obj)&&(obj=urlParse(obj)),obj instanceof Url?obj.format():Url.prototype.format.call(obj)}function urlResolve(source,relative){return urlParse(source,!1,!0).resolve(relative)}function urlResolveObject(source,relative){return source?urlParse(source,!1,!0).resolveObject(relative):relative}var punycode=require("punycode"),util=require("./util");exports.parse=urlParse,exports.resolve=urlResolve,exports.resolveObject=urlResolveObject,exports.format=urlFormat,exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require("querystring");Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url))throw new TypeError("Parameter 'url' must be a string, not "+typeof url);var queryIndex=url.indexOf("?"),splitter=-1!==queryIndex&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(splitter),slashRegex=/\\/g;uSplit[0]=uSplit[0].replace(slashRegex,"/"),url=uSplit.join(splitter);var rest=url;if(rest=rest.trim(),!slashesDenoteHost&&1===url.split("#").length){var simplePath=simplePathPattern.exec(rest);if(simplePath)return this.path=rest,this.href=rest,this.pathname=simplePath[1],simplePath[2]?(this.search=simplePath[2],parseQueryString?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):parseQueryString&&(this.search="",this.query={}),this}var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto,rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes="//"===rest.substr(0,2);!slashes||proto&&hostlessProtocol[proto]||(rest=rest.substr(2),this.slashes=!0)}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){for(var hostEnd=-1,i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);-1!==hec&&(-1===hostEnd||hostEnd>hec)&&(hostEnd=hec)}var auth,atSign;atSign=-1===hostEnd?rest.lastIndexOf("@"):rest.lastIndexOf("@",hostEnd),-1!==atSign&&(auth=rest.slice(0,atSign),rest=rest.slice(atSign+1),this.auth=decodeURIComponent(auth)),hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);-1!==hec&&(-1===hostEnd||hostEnd>hec)&&(hostEnd=hec)}-1===hostEnd&&(hostEnd=rest.length),this.host=rest.slice(0,hostEnd),rest=rest.slice(hostEnd),this.parseHost(),this.hostname=this.hostname||"";var ipv6Hostname="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ipv6Hostname)for(var hostparts=this.hostname.split(/\./),i=0,l=hostparts.length;l>i;i++){var part=hostparts[i];if(part&&!part.match(hostnamePartPattern)){for(var newpart="",j=0,k=part.length;k>j;j++)newpart+=part.charCodeAt(j)>127?"x":part[j];if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i),notHost=hostparts.slice(i+1),bit=part.match(hostnamePartStart);bit&&(validParts.push(bit[1]),notHost.unshift(bit[2])),notHost.length&&(rest="/"+notHost.join(".")+rest),this.hostname=validParts.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),ipv6Hostname||(this.hostname=punycode.toASCII(this.hostname));var p=this.port?":"+this.port:"",h=this.hostname||"";this.host=h+p,this.href+=this.host,ipv6Hostname&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==rest[0]&&(rest="/"+rest))}if(!unsafeProtocol[lowerProto])for(var i=0,l=autoEscape.length;l>i;i++){var ae=autoEscape[i];if(-1!==rest.indexOf(ae)){var esc=encodeURIComponent(ae);esc===ae&&(esc=escape(ae)),rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");-1!==hash&&(this.hash=rest.substr(hash),rest=rest.slice(0,hash));var qm=rest.indexOf("?");if(-1!==qm?(this.search=rest.substr(qm),this.query=rest.substr(qm+1),parseQueryString&&(this.query=querystring.parse(this.query)),rest=rest.slice(0,qm)):parseQueryString&&(this.search="",this.query={}),rest&&(this.pathname=rest),slashedProtocol[lowerProto]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var p=this.pathname||"",s=this.search||"";this.path=p+s}return this.href=this.format(),this},Url.prototype.format=function(){var auth=this.auth||"";auth&&(auth=encodeURIComponent(auth),auth=auth.replace(/%3A/i,":"),auth+="@");var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=!1,query="";this.host?host=auth+this.host:this.hostname&&(host=auth+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(host+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(query=querystring.stringify(this.query));var search=this.search||query&&"?"+query||"";return protocol&&":"!==protocol.substr(-1)&&(protocol+=":"),this.slashes||(!protocol||slashedProtocol[protocol])&&host!==!1?(host="//"+(host||""),pathname&&"/"!==pathname.charAt(0)&&(pathname="/"+pathname)):host||(host=""),hash&&"#"!==hash.charAt(0)&&(hash="#"+hash),search&&"?"!==search.charAt(0)&&(search="?"+search),pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)}),search=search.replace("#","%23"),protocol+host+pathname+search+hash},Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,!1,!0)).format()},Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,!1,!0),relative=rel}for(var result=new Url,tkeys=Object.keys(this),tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}if(result.hash=relative.hash,""===relative.href)return result.href=result.format(),result;if(relative.slashes&&!relative.protocol){for(var rkeys=Object.keys(relative),rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];"protocol"!==rkey&&(result[rkey]=relative[rkey])}return slashedProtocol[result.protocol]&&result.hostname&&!result.pathname&&(result.path=result.pathname="/"),result.href=result.format(),result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){for(var keys=Object.keys(relative),v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}return result.href=result.format(),result}if(result.protocol=relative.protocol,relative.host||hostlessProtocol[relative.protocol])result.pathname=relative.pathname;else{for(var relPath=(relative.pathname||"").split("/");relPath.length&&!(relative.host=relPath.shift()););relative.host||(relative.host=""),relative.hostname||(relative.hostname=""),""!==relPath[0]&&relPath.unshift(""),relPath.length<2&&relPath.unshift(""),result.pathname=relPath.join("/")}if(result.search=relative.search,result.query=relative.query,result.host=relative.host||"",result.auth=relative.auth,result.hostname=relative.hostname||relative.host,result.port=relative.port,result.pathname||result.search){var p=result.pathname||"",s=result.search||"";result.path=p+s}return result.slashes=result.slashes||relative.slashes,result.href=result.format(),result}var isSourceAbs=result.pathname&&"/"===result.pathname.charAt(0),isRelAbs=relative.host||relative.pathname&&"/"===relative.pathname.charAt(0),mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic&&(result.hostname="",result.port=null,result.host&&(""===srcPath[0]?srcPath[0]=result.host:srcPath.unshift(result.host)),result.host="",relative.protocol&&(relative.hostname=null,relative.port=null,relative.host&&(""===relPath[0]?relPath[0]=relative.host:relPath.unshift(relative.host)),relative.host=null),mustEndAbs=mustEndAbs&&(""===relPath[0]||""===srcPath[0])),isRelAbs)result.host=relative.host||""===relative.host?relative.host:result.host,result.hostname=relative.hostname||""===relative.hostname?relative.hostname:result.hostname,result.search=relative.search,result.query=relative.query,srcPath=relPath;else if(relPath.length)srcPath||(srcPath=[]),srcPath.pop(),srcPath=srcPath.concat(relPath),result.search=relative.search,result.query=relative.query;else if(!util.isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):!1;authInHost&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift())}return result.search=relative.search,result.query=relative.query,util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.href=result.format(),result}if(!srcPath.length)return result.pathname=null,result.search?result.path="/"+result.search:result.path=null,result.href=result.format(),result;for(var last=srcPath.slice(-1)[0],hasTrailingSlash=(result.host||relative.host||srcPath.length>1)&&("."===last||".."===last)||""===last,up=0,i=srcPath.length;i>=0;i--)last=srcPath[i],"."===last?srcPath.splice(i,1):".."===last?(srcPath.splice(i,1),up++):up&&(srcPath.splice(i,1),up--);if(!mustEndAbs&&!removeAllDots)for(;up--;up)srcPath.unshift("..");!mustEndAbs||""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0)||srcPath.unshift(""),hasTrailingSlash&&"/"!==srcPath.join("/").substr(-1)&&srcPath.push("");var isAbsolute=""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0);if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):!1;authInHost&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift())}return mustEndAbs=mustEndAbs||result.host&&srcPath.length,mustEndAbs&&!isAbsolute&&srcPath.unshift(""),srcPath.length?result.pathname=srcPath.join("/"):(result.pathname=null,result.path=null),util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.auth=relative.auth||result.auth,result.slashes=result.slashes||relative.slashes,result.href=result.format(),result},Url.prototype.parseHost=function(){var host=this.host,port=portPattern.exec(host);port&&(port=port[0],":"!==port&&(this.port=port.substr(1)),host=host.substr(0,host.length-port.length)),host&&(this.hostname=host)}},{"./util":450,punycode:434,querystring:437}],450:[function(require,module,exports){"use strict";module.exports={isString:function(arg){return"string"==typeof arg},isObject:function(arg){return"object"==typeof arg&&null!==arg},isNull:function(arg){return null===arg},isNullOrUndefined:function(arg){return null==arg}}},{}],451:[function(require,module,exports){"use strict";function backgroundScene(game){var tile,scene=new Scene(game),scrollSpeed=.5,bgPath="assets/4954464378_990a3e54a1_b.jpg";return scene.active=!1,scene.stage.visible=!1,game.on("preload",function(assets){assets.push(bgPath)}),game.on("load",function(){var sprite=PIXI.Sprite.fromImage(bgPath);sprite.scale={x:.65,y:.65},scene.stage.addChild(sprite);var texture=new PIXI.Graphics;texture.beginFill(4456450),texture.drawCircle(0,0,game.renderer.width),texture.endFill(),tile=new PIXI.extras.TilingSprite(texture.generateTexture(),game.renderer.width,game.renderer.height),tile.position.y=tile.height/2,scene.stage.addChild(tile),tile.tween=new TWEEN.Tween(tile.position)}),scene.on("active",function(){scene.stage.visible=!0}),scene.on("update",function(){tile.tilePosition.x-=scrollSpeed,game.keyboard.up&&(tile.position.y+=.2,this.tweenTo="+4"),game.keyboard.down&&tile.position.y>tile.height/2?(tile.position.y-=.2,this.tweenTo="-4"):this.tweenTo&&(tile.tween.to({y:this.tweenTo},600).easing(TWEEN.Easing.Quadratic.Out).start(),this.tweenTo=null,this.shouldTween=!0)}),scene.on("render",function(time){this.shouldTween&&(this.shouldTween=tile.tween.update(time))}),scene}var PIXI=require("pixi.js"),TWEEN=require("tween.js"),Scene=require("../engine/scene");module.exports=backgroundScene},{"../engine/scene":3,"pixi.js":413,"tween.js":448}],452:[function(require,module,exports){"use strict";function playScene(game){var stageTween,player,stardustMeter,scene=new Scene(game),bgMusic=new Howl({urls:["assets/gurdonark_-_Relief.mp3"],volume:.5}),rocks=[],dust=[],flash=new PIXI.Graphics,collectedNum=0,maxCollected=32,playerRockCollide=function(time,player,rock){rock.removeFromScene(),player.hit(),scene.stage.alpha<.94&&stageTween.to({alpha:"+0.06"},200).start(),flash.visible=!0,flash.lastVisible=time,collectedNum-=2,0>collectedNum&&(collectedNum=0),stardustMeter.setPercent(collectedNum/maxCollected)},playerDustCollide=function(time,player,dust){dust.removeFromScene(),stageTween.to({alpha:"-0.03"},200).start(),player.shineGet(),collectedNum+=1,stardustMeter.setPercent(collectedNum/maxCollected)};return flash.beginFill(16777215),flash.drawRect(0,0,game.worldBounds.width,game.worldBounds.height),flash.endFill(),flash.visible=!1,scene.stage.addChild(flash),Player.preload(game),game.on("load",function(){scene.active=!1,scene.stage.visible=!1,player=new Player(game,{x:game.worldBounds.width/6,y:game.worldBounds.height/2}),player.addToScene(scene),stardustMeter=new Meter(game),stardustMeter.addToScene(scene)}),scene.on("active",function(){scene.stage.visible=!0,scene.stage.alpha=1,player.reset(),rocks.forEach(function(rock){return rock.removeFromScene()}),rocks=[],dust.forEach(function(d){return d.removeFromScene()}),dust=[],bgMusic.stop().play(),stageTween=new TWEEN.Tween(scene.stage),stardustMeter.setPercent(0),collectedNum=0}),scene.on("update",function(time){if(Math.round(time)%104===0){var rock=new Rock(game);rock.addToScene(scene),rocks.push(rock)}if(Math.round(time)%52===0){var d=new Dust(game);d.addToScene(scene),dust.push(d)}rocks=rocks.filter(function(rock){return!rock.removed}),dust=dust.filter(function(dust){return!dust.removed}),utils.collide(player,dust,curry(playerDustCollide)(time)),utils.collide(player,rocks,curry(playerRockCollide)(time)),collectedNum>=maxCollected&&scene.emit("win"),time-flash.lastVisible>30&&(flash.visible=!1),time-flash.lastVisible>120?scene.stage.position={x:0,y:0}:flash.lastVisible&&(scene.stage.position={x:random.integer(5,-5),y:random.integer(5,-5)})}),scene.on("render",function(time){stageTween&&stageTween.update(time)}),scene}var PIXI=require("pixi.js"),Howl=require("howler").Howl,TWEEN=require("tween.js"),curry=require("curry"),random=require("random-ext"),Scene=require("../engine/scene"),Player=require("../entities/player"),Rock=require("../entities/rock"),Dust=require("../entities/dust"),Meter=require("../entities/meter"),utils=require("../engine/utils");module.exports=playScene},{"../engine/scene":3,"../engine/utils":4,"../entities/dust":5,"../entities/meter":6,"../entities/player":7,"../entities/rock":8,curry:303,howler:307,"pixi.js":413,"random-ext":439,"tween.js":448}],453:[function(require,module,exports){"use strict";function startScene(game){var panes,scene=new Scene(game),activePane=0,shouldTransition=!1,transitionPane=function(){return activePane===panes.length-1?void(scene.active=!1):(panes[activePane].visible=!1,void(panes[++activePane].visible=!0))},prompt=new PIXI.Text("Press space to continue.",{fill:"white",font:"32px Arial"});return prompt.height=prompt.height/game.renderer.resolution,prompt.width=prompt.width/game.renderer.resolution,scene.stage.addChild(prompt),prompt.position={x:game.worldBounds.width-prompt.width-10,y:game.worldBounds.height-prompt.height},scene.on("update",function(){game.keyboard.space?(shouldTransition&&transitionPane(),shouldTransition=!1):shouldTransition=!0}).on("inactive",function(){scene.stage.visible=!1}),scene.active=!0,panes=introText.map(function(text){var pane=makeTextPane(text);return pane.visible=!1,scene.stage.addChild(pane),pane}),panes[0].visible=!0,scene}function makeTextPane(text){var pane=new PIXI.Text(text,{fill:"white"});return pane.position={x:10,y:10},pane}var PIXI=require("pixi.js"),Scene=(require("kb-controls"),require("../engine/scene")),introText=['In the night\na little voice whispers\nrestless,\n\n"Sissy? Sissy! Are you awake?"','Another voice\na little older than the first\nmumbles,\n\n"What now?"','"Sissy, I can\'t sleep."\n\nAfter a thoughtful pause\nthe second voice replies,\n\n"Hmm. I know what will make you sleepy."\n\n"What?"','"Stardust!"\n\n"OK!\nBut we better watch out for asteroids."\n\nAnd together they chanted,\n\n"3, 2, 1, blast off!"'];module.exports=startScene},{"../engine/scene":3,"kb-controls":308,"pixi.js":413}],454:[function(require,module,exports){"use strict";function winScene(game){var scene=new Scene(game),text=new PIXI.Text("Finally the two girls\nlaying their heavy heads down\ndrift peacefully off to sleep.",{fill:"white"}),bg=new PIXI.Graphics;return bg.beginFill(1974067),bg.drawRect(game.worldBounds.x,game.worldBounds.y,game.worldBounds.width,game.worldBounds.height),bg.endFill(),scene.stage.addChild(bg),text.position={x:10,y:10},scene.stage.addChild(text),scene.on("update",function(){scene.active&&game.keyboard.space&&(scene.active=!1)}).on("active",function(){scene.stage.visible=!0,text.alpha=0,text.tween=null,bg.alpha=0,bg.tween=new TWEEN.Tween(bg),bg.tween.to({alpha:1},2e3).onComplete(function(){bg.tween=null,text.tween=new TWEEN.Tween(text).to({alpha:1},1e3).start()}).start()}).on("inactive",function(){scene.stage.visible=!1}).on("update",function(time){bg.tween&&bg.tween.update(time),text.tween&&text.tween.update(time)}),scene.active=!1,scene.stage.visible=!1,scene}var PIXI=require("pixi.js"),TWEEN=require("tween.js"),Scene=require("../engine/scene");module.exports=winScene},{"../engine/scene":3,"pixi.js":413,"tween.js":448}]},{},[9]);
